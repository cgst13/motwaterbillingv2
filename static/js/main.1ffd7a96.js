/*! For license information please see main.1ffd7a96.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var s=n(43),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,r={},c=null,u=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,s)&&!l.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===r[s]&&(r[s]=t[s]);return{$$typeof:a,type:e,key:c,ref:u,props:r,_owner:o.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,p(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,N={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,s){var a,r={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,a)&&!S.hasOwnProperty(a)&&(r[a]=t[a]);var l=arguments.length-2;if(1===l)r.children=s;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===r[a]&&(r[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:o,props:r,_owner:N.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,a,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case s:l=!0}}if(l)return i=i(l=e),e=""===r?"."+E(l,0):r,w(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),T(i,t,a,"",function(e){return e})):null!=i&&(_(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=""===r?".":r+":",w(e))for(var c=0;c<e.length;c++){var u=r+E(o=e[c],c);l+=T(o,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,a,u=r+E(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var s=[],a=0;return T(e,s,"","",function(e){return t.call(n,e,a++)}),s}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},A={transition:null},I={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:A,ReactCurrentOwner:N};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=r,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=D,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=p({},e.props),r=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=s;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:r,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(829)),r=s(n(736));class i{constructor(e){let{headers:t={},schema:n,fetch:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=s}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new a.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:s=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;n||s?(o=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(o="POST",c=t);const u=new Headers(this.headers);return a&&u.set("Prefer","count=".concat(a)),new r.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,a=e[s];if(!(0<r(a,t)))break e;e[s]=t,e[n]=a,n=s}}function s(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,a=e.length,i=a>>>1;s<i;){var o=2*(s+1)-1,l=e[o],c=o+1,u=e[c];if(0>r(l,n))c<a&&0>r(u,l)?(e[s]=u,e[c]=n,s=c):(e[s]=l,e[o]=n,s=o);else{if(!(c<a&&0>r(u,n)))break e;e[s]=u,e[c]=n,s=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=s(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=s(u)}}function w(e){if(g=!1,x(e),!p)if(null!==s(c))p=!0,A(j);else{var t=s(u);null!==t&&I(w,t.startTime-e)}}function j(e,n){p=!1,g&&(g=!1,y(_),_=-1),m=!0;var r=f;try{for(x(n),h=s(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===s(c)&&a(c),x(n)}else a(c);h=s(c)}if(null!==h)var l=!0;else{var d=s(u);null!==d&&I(w,d.startTime-n),l=!1}return l}finally{h=null,f=r,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,S=!1,k=null,_=-1,C=5,E=-1;function T(){return!(t.unstable_now()-E<C)}function P(){if(null!==k){var e=t.unstable_now();E=e;var n=!0;try{n=k(!0,e)}finally{n?N():(S=!1,k=null)}}else S=!1}if("function"===typeof b)N=function(){b(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=P,N=function(){R.postMessage(null)}}else N=function(){v(P,0)};function A(e){k=e,S||(S=!0,N())}function I(e,n){_=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,A(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,r){var i=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>i?(e.sortIndex=r,n(u,e),null===s(c)&&e===s(u)&&(g?(y(_),_=-1):g=!0,I(w,r-i))):(e.sortIndex=o,n(c,e),p||m||(p=!0,A(j))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},286:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(630)),r=s(n(611));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,s,a;let i=null,o=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const a=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),r=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");a&&r&&r.length>1&&(l=parseInt(r[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,u="OK")}catch(d){404===e.status&&""===t?(c=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(a=null===i||void 0===i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&this.shouldThrowOnError)throw new r.default(i)}return{error:i,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,s;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(s=null===e||void 0===e?void 0:e.code)&&void 0!==s?s:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(286));class r extends a.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=a?"".concat(a,".order"):"order",i=this.url.searchParams.get(r);return this.url.searchParams.set(r,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(s,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:s=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof s?"offset":"".concat(s,".offset"),r="undefined"===typeof s?"limit":"".concat(s,".limit");return this.url.searchParams.set(a,"".concat(e)),this.url.searchParams.set(r,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:r="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(r,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=r},391:(e,t,n)=>{var s=n(950);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>r,fetch:()=>a});var s=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const a=s.fetch,r=s.fetch.bind(s),i=s.Headers,o=s.Request,l=s.Response},730:(e,t,n)=>{var s=n(43),a=n(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,s,a,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,s){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,s){if(null===t||"undefined"===typeof t||function(e,t,n,s){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,s)&&(n=null),s||null===a?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,s=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var L,U=Object.assign;function B(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),r=s.stack.split("\n"),i=a.length-1,o=r.length-1;1<=i&&0<=o&&a[i]!==r[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==r[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==r[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function M(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case j:return"Portal";case k:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){s=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=V(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=H(t.value),s=t.type;if(null!=n)"number"===s?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(s&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function re(e,t){var n=H(t.value),s=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=s&&(e.defaultValue=""+s)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var s=0===n.indexOf("--"),a=pe(n,t[n],s);"float"===n&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,Ne=null,Se=null;function ke(e){if(e=ba(e)){if("function"!==typeof je)throw Error(r(280));var t=e.stateNode;t&&(t=wa(t),je(e.stateNode,e.type,t))}}function _e(e){Ne?Se?Se.push(e):Se=[e]:Ne=e}function Ce(){if(Ne){var e=Ne,t=Se;if(Se=Ne=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ee(e,t){return e(t)}function Te(){}var Pe=!1;function Oe(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ee(e,t,n)}finally{Pe=!1,(null!==Ne||null!==Se)&&(Te(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var s=wa(n);if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var Ae=!1;if(u)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){Ae=!1}function De(e,t,n,s,a,r,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Ue=null,Be=!1,Fe=null,ze={onError:function(e){Le=!0,Ue=e}};function Me(e,t,n,s,a,r,i,o,l){Le=!1,Ue=null,De.apply(ze,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(r(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(s=a.return)){n=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return He(a),e;if(i===s)return He(a),t;i=i.sibling}throw Error(r(188))}if(n.return!==s.return)n=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==s)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var $e=a.unstable_scheduleCallback,Je=a.unstable_cancelCallback,Ge=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Ye=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,st=a.unstable_IdlePriority,at=null,rt=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var s=0,a=e.suspendedLanes,r=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~a;0!==o?s=dt(o):0!==(r&=i)&&(s=dt(r))}else 0!==(i=n&~a)?s=dt(i):0!==r&&(s=dt(r));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&a)&&((a=s&-s)>=(r=t&-t)||16===a&&0!==(4194240&r)))return t;if(0!==(4&s)&&(s|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)a=1<<(n=31-it(t)),s|=e[n],t&=~a;return s}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-it(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,Nt,St,kt,_t=!1,Ct=[],Et=null,Tt=null,Pt=null,Ot=new Map,Rt=new Map,At=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,s,a,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&jt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ut(e){var t=ya(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&jt(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);xe=s,n.target.dispatchEvent(s),xe=null,t.shift()}return!0}function Ft(e,t,n){Bt(e)&&n.delete(t)}function zt(){_t=!1,null!==Et&&Bt(Et)&&(Et=null),null!==Tt&&Bt(Tt)&&(Tt=null),null!==Pt&&Bt(Pt)&&(Pt=null),Ot.forEach(Ft),Rt.forEach(Ft)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function Wt(e){function t(t){return Mt(t,e)}if(0<Ct.length){Mt(Ct[0],e);for(var n=1;n<Ct.length;n++){var s=Ct[n];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==Et&&Mt(Et,e),null!==Tt&&Mt(Tt,e),null!==Pt&&Mt(Pt,e),Ot.forEach(t),Rt.forEach(t),n=0;n<At.length;n++)(s=At[n]).blockedOn===e&&(s.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Ut(n),null===n.blockedOn&&At.shift()}var qt=x.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,s){var a=bt,r=qt.transition;qt.transition=null;try{bt=1,$t(e,t,n,s)}finally{bt=a,qt.transition=r}}function Kt(e,t,n,s){var a=bt,r=qt.transition;qt.transition=null;try{bt=4,$t(e,t,n,s)}finally{bt=a,qt.transition=r}}function $t(e,t,n,s){if(Ht){var a=Gt(e,t,n,s);if(null===a)Hs(e,t,s,Jt,n),Dt(e,s);else if(function(e,t,n,s,a){switch(t){case"focusin":return Et=Lt(Et,e,t,n,s,a),!0;case"dragenter":return Tt=Lt(Tt,e,t,n,s,a),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,s,a),!0;case"pointerover":var r=a.pointerId;return Ot.set(r,Lt(Ot.get(r)||null,e,t,n,s,a)),!0;case"gotpointercapture":return r=a.pointerId,Rt.set(r,Lt(Rt.get(r)||null,e,t,n,s,a)),!0}return!1}(a,e,t,n,s))s.stopPropagation();else if(Dt(e,s),4&t&&-1<It.indexOf(e)){for(;null!==a;){var r=ba(a);if(null!==r&&wt(r),null===(r=Gt(e,t,n,s))&&Hs(e,t,s,Jt,n),r===a)break;a=r}null!==a&&s.stopPropagation()}else Hs(e,t,s,null,n)}}var Jt=null;function Gt(e,t,n,s){if(Jt=null,null!==(e=ya(e=we(s))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,s=n.length,a="value"in Yt?Yt.value:Yt.textContent,r=a.length;for(e=0;e<s&&n[e]===a[e];e++);var i=s-e;for(t=1;t<=i&&n[s-t]===a[r-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function an(e){function t(t,n,s,a,r){for(var i in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var rn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=U({},cn,{view:0,detail:0}),hn=an(dn),fn=U({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(rn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=rn=0,ln=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=an(fn),pn=an(U({},fn,{dataTransfer:0})),gn=an(U({},dn,{relatedTarget:0})),vn=an(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(U({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function kn(){return Sn}var _n=U({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(_n),En=an(U({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(U({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Pn=an(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=U({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(On),An=[9,13,27,32],In=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,Un=u&&(!In||Dn&&8<Dn&&11>=Dn),Bn=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Vn(e,t,n,s){_e(s),0<(t=Ks(t,"onChange")).length&&(n=new un("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Kn=null,$n=null;function Jn(e){Bs(e,0)}function Gn(e){if($(xa(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var es=document.createElement("div");es.setAttribute("oninput","return;"),Zn="function"===typeof es.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function ts(){Kn&&(Kn.detachEvent("onpropertychange",ns),$n=Kn=null)}function ns(e){if("value"===e.propertyName&&Gn($n)){var t=[];Vn(t,$n,e,we(e)),Oe(Jn,t)}}function ss(e,t,n){"focusin"===e?(ts(),$n=n,(Kn=t).attachEvent("onpropertychange",ns)):"focusout"===e&&ts()}function as(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn($n)}function rs(e,t){if("click"===e)return Gn(t)}function is(e,t){if("input"===e||"change"===e)return Gn(t)}var os="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ls(e,t){if(os(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!d.call(t,a)||!os(e[a],t[a]))return!1}return!0}function cs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function us(e,t){var n,s=cs(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cs(s)}}function ds(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ds(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hs(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function fs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ms(e){var t=hs(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ds(n.ownerDocument.documentElement,n)){if(null!==s&&fs(n))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,r=Math.min(s.start,a);s=void 0===s.end?r:Math.min(s.end,a),!e.extend&&r>s&&(a=s,s=r,r=a),a=us(n,r);var i=us(n,s);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),r>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ps=u&&"documentMode"in document&&11>=document.documentMode,gs=null,vs=null,ys=null,bs=!1;function xs(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bs||null==gs||gs!==J(s)||("selectionStart"in(s=gs)&&fs(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},ys&&ls(ys,s)||(ys=s,0<(s=Ks(vs,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=gs)))}function ws(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var js={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionend:ws("Transition","TransitionEnd")},Ns={},Ss={};function ks(e){if(Ns[e])return Ns[e];if(!js[e])return e;var t,n=js[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ss)return Ns[e]=n[t];return e}u&&(Ss=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);var _s=ks("animationend"),Cs=ks("animationiteration"),Es=ks("animationstart"),Ts=ks("transitionend"),Ps=new Map,Os="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rs(e,t){Ps.set(e,t),l(t,[e])}for(var As=0;As<Os.length;As++){var Is=Os[As];Rs(Is.toLowerCase(),"on"+(Is[0].toUpperCase()+Is.slice(1)))}Rs(_s,"onAnimationEnd"),Rs(Cs,"onAnimationIteration"),Rs(Es,"onAnimationStart"),Rs("dblclick","onDoubleClick"),Rs("focusin","onFocus"),Rs("focusout","onBlur"),Rs(Ts,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ls=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ds));function Us(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,s,a,i,o,l,c){if(Me.apply(this,arguments),Le){if(!Le)throw Error(r(198));var u=Ue;Le=!1,Ue=null,Be||(Be=!0,Fe=u)}}(s,t,void 0,e),e.currentTarget=null}function Bs(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&a.isPropagationStopped())break e;Us(a,o,c),r=l}else for(i=0;i<s.length;i++){if(l=(o=s[i]).instance,c=o.currentTarget,o=o.listener,l!==r&&a.isPropagationStopped())break e;Us(a,o,c),r=l}}}if(Be)throw e=Fe,Be=!1,Fe=null,e}function Fs(e,t){var n=t[pa];void 0===n&&(n=t[pa]=new Set);var s=e+"__bubble";n.has(s)||(qs(t,e,2,!1),n.add(s))}function zs(e,t,n){var s=0;t&&(s|=4),qs(n,e,s,t)}var Ms="_reactListening"+Math.random().toString(36).slice(2);function Ws(e){if(!e[Ms]){e[Ms]=!0,i.forEach(function(t){"selectionchange"!==t&&(Ls.has(t)||zs(t,!1,e),zs(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ms]||(t[Ms]=!0,zs("selectionchange",!1,t))}}function qs(e,t,n,s){switch(Qt(t)){case 1:var a=Vt;break;case 4:a=Kt;break;default:a=$t}n=a.bind(null,t,n,e),a=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),s?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hs(e,t,n,s,a){var r=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var i=s.tag;if(3===i||4===i){var o=s.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=s.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ya(o)))return;if(5===(l=i.tag)||6===l){s=r=i;continue e}o=o.parentNode}}s=s.return}Oe(function(){var s=r,a=we(n),i=[];e:{var o=Ps.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case _s:case Cs:case Es:l=vn;break;case Ts:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=s;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Re(m,h))&&u.push(Vs(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,a),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[ma])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=s,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(u=mn,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=En,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:xa(l),f=null==c?o:xa(c),(o=new u(p,m+"leave",l,n,a)).target=d,o.relatedTarget=f,p=null,ya(a)===s&&((u=new u(h,m+"enter",c,n,a)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=$s(f))m++;for(f=0,p=h;p;p=$s(p))f++;for(;0<m-f;)u=$s(u),m--;for(;0<f-m;)h=$s(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=$s(u),h=$s(h)}u=null}else u=null;null!==l&&Js(i,o,l,u,!1),null!==c&&null!==d&&Js(i,d,c,u,!0)}if("select"===(l=(o=s?xa(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(Hn(o))if(Yn)g=is;else{g=as;var v=ss}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=rs);switch(g&&(g=g(e,s))?Vn(i,g,n,a):(v&&v(e,o,s),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=s?xa(s):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gs=v,vs=s,ys=null);break;case"focusout":ys=vs=gs=null;break;case"mousedown":bs=!0;break;case"contextmenu":case"mouseup":case"dragend":bs=!1,xs(i,n,a);break;case"selectionchange":if(ps)break;case"keydown":case"keyup":xs(i,n,a)}var y;if(In)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):(Xt="value"in(Yt=a)?Yt.value:Yt.textContent,Wn=!0)),0<(v=Ks(s,b)).length&&(b=new xn(b,e,null,n,a),i.push({event:b,listeners:v}),y?b.data=y:null!==(y=Mn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Bn);case"textInput":return(e=t.data)===Bn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!In&&zn(e,t)?(e=en(),Zt=Xt=Yt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(s=Ks(s,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:s}),a.data=y))}Bs(i,t)})}function Vs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ks(e,t){for(var n=t+"Capture",s=[];null!==e;){var a=e,r=a.stateNode;5===a.tag&&null!==r&&(a=r,null!=(r=Re(e,n))&&s.unshift(Vs(e,r,a)),null!=(r=Re(e,t))&&s.push(Vs(e,r,a))),e=e.return}return s}function $s(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Js(e,t,n,s,a){for(var r=t._reactName,i=[];null!==n&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===s)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Re(n,r))&&i.unshift(Vs(n,l,o)):a||null!=(l=Re(n,r))&&i.push(Vs(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Gs=/\r\n?/g,Qs=/\u0000|\uFFFD/g;function Ys(e){return("string"===typeof e?e:""+e).replace(Gs,"\n").replace(Qs,"")}function Xs(e,t,n){if(t=Ys(t),Ys(e)!==t&&n)throw Error(r(425))}function Zs(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sa="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ra="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ra?function(e){return ra.resolve(null).then(e).catch(oa)}:sa;function oa(e){setTimeout(function(){throw e})}function la(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===s)return e.removeChild(a),void Wt(t);s--}else"$"!==n&&"$?"!==n&&"$!"!==n||s++;n=a}while(n);Wt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,ma="__reactContainer$"+da,pa="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[ha])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function wa(e){return e[fa]||null}var ja=[],Na=-1;function Sa(e){return{current:e}}function ka(e){0>Na||(e.current=ja[Na],ja[Na]=null,Na--)}function _a(e,t){Na++,ja[Na]=e.current,e.current=t}var Ca={},Ea=Sa(Ca),Ta=Sa(!1),Pa=Ca;function Oa(e,t){var n=e.type.contextTypes;if(!n)return Ca;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a,r={};for(a in n)r[a]=t[a];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ra(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Aa(){ka(Ta),ka(Ea)}function Ia(e,t,n){if(Ea.current!==Ca)throw Error(r(168));_a(Ea,t),_a(Ta,n)}function Da(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return n;for(var a in s=s.getChildContext())if(!(a in t))throw Error(r(108,q(e)||"Unknown",a));return U({},n,s)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,Pa=Ea.current,_a(Ea,e),_a(Ta,Ta.current),!0}function Ua(e,t,n){var s=e.stateNode;if(!s)throw Error(r(169));n?(e=Da(e,t,Pa),s.__reactInternalMemoizedMergedChildContext=e,ka(Ta),ka(Ea),_a(Ea,e)):ka(Ta),_a(Ta,n)}var Ba=null,Fa=!1,za=!1;function Ma(e){null===Ba?Ba=[e]:Ba.push(e)}function Wa(){if(!za&&null!==Ba){za=!0;var e=0,t=bt;try{var n=Ba;for(bt=1;e<n.length;e++){var s=n[e];do{s=s(!0)}while(null!==s)}Ba=null,Fa=!1}catch(a){throw null!==Ba&&(Ba=Ba.slice(e+1)),$e(Ze,Wa),a}finally{bt=t,za=!1}}return null}var qa=[],Ha=0,Va=null,Ka=0,$a=[],Ja=0,Ga=null,Qa=1,Ya="";function Xa(e,t){qa[Ha++]=Ka,qa[Ha++]=Va,Va=e,Ka=t}function Za(e,t,n){$a[Ja++]=Qa,$a[Ja++]=Ya,$a[Ja++]=Ga,Ga=e;var s=Qa;e=Ya;var a=32-it(s)-1;s&=~(1<<a),n+=1;var r=32-it(t)+a;if(30<r){var i=a-a%5;r=(s&(1<<i)-1).toString(32),s>>=i,a-=i,Qa=1<<32-it(t)+a|n<<a|s,Ya=r+e}else Qa=1<<r|n<<a|s,Ya=e}function er(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function tr(e){for(;e===Va;)Va=qa[--Ha],qa[Ha]=null,Ka=qa[--Ha],qa[Ha]=null;for(;e===Ga;)Ga=$a[--Ja],$a[Ja]=null,Ya=$a[--Ja],$a[Ja]=null,Qa=$a[--Ja],$a[Ja]=null}var nr=null,sr=null,ar=!1,rr=null;function ir(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function or(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nr=e,sr=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nr=e,sr=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ga?{id:Qa,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nr=e,sr=null,!0);default:return!1}}function lr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(ar){var t=sr;if(t){var n=t;if(!or(e,t)){if(lr(e))throw Error(r(418));t=ca(n.nextSibling);var s=nr;t&&or(e,t)?ir(s,n):(e.flags=-4097&e.flags|2,ar=!1,nr=e)}}else{if(lr(e))throw Error(r(418));e.flags=-4097&e.flags|2,ar=!1,nr=e}}}function ur(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nr=e}function dr(e){if(e!==nr)return!1;if(!ar)return ur(e),ar=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=sr)){if(lr(e))throw hr(),Error(r(418));for(;t;)ir(e,t),t=ca(t.nextSibling)}if(ur(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){sr=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}sr=null}}else sr=nr?ca(e.stateNode.nextSibling):null;return!0}function hr(){for(var e=sr;e;)e=ca(e.nextSibling)}function fr(){sr=nr=null,ar=!1}function mr(e){null===rr?rr=[e]:rr.push(e)}var pr=x.ReactCurrentBatchConfig;function gr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var s=n.stateNode}if(!s)throw Error(r(147,e));var a=s,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function vr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yr(e){return(0,e._init)(e._payload)}function br(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function i(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=2,n):s:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Uc(n,e.mode,s)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,s){var r=n.type;return r===N?d(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===R&&yr(r)===t.type)?((s=a(t,n.props)).ref=gr(e,t,n),s.return=e,s):((s=Ic(n.type,n.key,n.props,null,e.mode,s)).ref=gr(e,t,n),s.return=e,s)}function u(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,s)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,s,r){return null===t||7!==t.tag?((t=Dc(n,e.mode,s,r)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=gr(e,null,t),n.return=e,n;case j:return(t=Bc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;vr(e,t)}return null}function f(e,t,n,s){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,s):null;case j:return n.key===a?u(e,t,n,s):null;case R:return f(e,t,(a=n._init)(n._payload),s)}if(te(n)||D(n))return null!==a?null:d(e,t,n,s,null);vr(e,n)}return null}function m(e,t,n,s,a){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(n)||null,""+s,a);if("object"===typeof s&&null!==s){switch(s.$$typeof){case w:return c(t,e=e.get(null===s.key?n:s.key)||null,s,a);case j:return u(t,e=e.get(null===s.key?n:s.key)||null,s,a);case R:return m(e,t,n,(0,s._init)(s._payload),a)}if(te(s)||D(s))return d(t,e=e.get(n)||null,s,a,null);vr(t,s)}return null}function p(a,r,o,l){for(var c=null,u=null,d=r,p=r=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var v=f(a,d,o[p],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),r=i(v,r,p),null===u?c=v:u.sibling=v,u=v,d=g}if(p===o.length)return n(a,d),ar&&Xa(a,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(a,o[p],l))&&(r=i(d,r,p),null===u?c=d:u.sibling=d,u=d);return ar&&Xa(a,p),c}for(d=s(a,d);p<o.length;p++)null!==(g=m(d,a,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),r=i(g,r,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),ar&&Xa(a,p),c}function g(a,o,l,c){var u=D(l);if("function"!==typeof u)throw Error(r(150));if(null==(l=u.call(l)))throw Error(r(151));for(var d=u=null,p=o,g=o=0,v=null,y=l.next();null!==p&&!y.done;g++,y=l.next()){p.index>g?(v=p,p=null):v=p.sibling;var b=f(a,p,y.value,c);if(null===b){null===p&&(p=v);break}e&&p&&null===b.alternate&&t(a,p),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b,p=v}if(y.done)return n(a,p),ar&&Xa(a,g),u;if(null===p){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return ar&&Xa(a,g),u}for(p=s(a,p);!y.done;g++,y=l.next())null!==(y=m(p,a,g,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(a,e)}),ar&&Xa(a,g),u}return function e(s,r,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,u=r;null!==u;){if(u.key===c){if((c=i.type)===N){if(7===u.tag){n(s,u.sibling),(r=a(u,i.props.children)).return=s,s=r;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&yr(c)===u.type){n(s,u.sibling),(r=a(u,i.props)).ref=gr(s,u,i),r.return=s,s=r;break e}n(s,u);break}t(s,u),u=u.sibling}i.type===N?((r=Dc(i.props.children,s.mode,l,i.key)).return=s,s=r):((l=Ic(i.type,i.key,i.props,null,s.mode,l)).ref=gr(s,r,i),l.return=s,s=l)}return o(s);case j:e:{for(u=i.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(s,r.sibling),(r=a(r,i.children||[])).return=s,s=r;break e}n(s,r);break}t(s,r),r=r.sibling}(r=Bc(i,s.mode,l)).return=s,s=r}return o(s);case R:return e(s,r,(u=i._init)(i._payload),l)}if(te(i))return p(s,r,i,l);if(D(i))return g(s,r,i,l);vr(s,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==r&&6===r.tag?(n(s,r.sibling),(r=a(r,i)).return=s,s=r):(n(s,r),(r=Uc(i,s.mode,l)).return=s,s=r),o(s)):n(s,r)}}var xr=br(!0),wr=br(!1),jr=Sa(null),Nr=null,Sr=null,kr=null;function _r(){kr=Sr=Nr=null}function Cr(e){var t=jr.current;ka(jr),e._currentValue=t}function Er(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Tr(e,t){Nr=e,kr=Sr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Pr(e){var t=e._currentValue;if(kr!==e)if(e={context:e,memoizedValue:t,next:null},null===Sr){if(null===Nr)throw Error(r(308));Sr=e,Nr.dependencies={lanes:0,firstContext:e}}else Sr=Sr.next=e;return t}var Or=null;function Rr(e){null===Or?Or=[e]:Or.push(e)}function Ar(e,t,n,s){var a=t.interleaved;return null===a?(n.next=n,Rr(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ir(e,s)}function Ir(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Dr=!1;function Lr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ur(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Br(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&El)){var a=s.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Ir(e,n)}return null===(a=s.interleaved)?(t.next=t,Rr(s)):(t.next=a.next,a.next=t),s.interleaved=t,Ir(e,n)}function zr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Mr(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var a=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?a=r=i:r=r.next=i,n=n.next}while(null!==n);null===r?a=r=t:r=r.next=t}else a=r=t;return n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:s.shared,effects:s.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wr(e,t,n,s){var a=e.updateQueue;Dr=!1;var r=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?r=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==r){var d=a.baseState;for(i=0,u=c=l=null,o=r;;){var h=o.lane,f=o.eventTime;if((s&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=U({},d,h);break e;case 2:Dr=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===r&&(a.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=d}}function qr(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(null!==a){if(s.callback=null,s=n,"function"!==typeof a)throw Error(r(191,a));a.call(s)}}}var Hr={},Vr=Sa(Hr),Kr=Sa(Hr),$r=Sa(Hr);function Jr(e){if(e===Hr)throw Error(r(174));return e}function Gr(e,t){switch(_a($r,t),_a(Kr,e),_a(Vr,Hr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Vr),_a(Vr,t)}function Qr(){ka(Vr),ka(Kr),ka($r)}function Yr(e){Jr($r.current);var t=Jr(Vr.current),n=le(t,e.type);t!==n&&(_a(Kr,e),_a(Vr,n))}function Xr(e){Kr.current===e&&(ka(Vr),ka(Kr))}var Zr=Sa(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var si=x.ReactCurrentDispatcher,ai=x.ReactCurrentBatchConfig,ri=0,ii=null,oi=null,li=null,ci=!1,ui=!1,di=0,hi=0;function fi(){throw Error(r(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!os(e[n],t[n]))return!1;return!0}function pi(e,t,n,s,a,i){if(ri=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=null===e||null===e.memoizedState?Xi:Zi,e=n(s,a),ui){i=0;do{if(ui=!1,di=0,25<=i)throw Error(r(301));i+=1,li=oi=null,t.updateQueue=null,si.current=eo,e=n(s,a)}while(ui)}if(si.current=Yi,t=null!==oi&&null!==oi.next,ri=0,li=oi=ii=null,ci=!1,t)throw Error(r(300));return e}function gi(){var e=0!==di;return di=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(r(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function bi(e,t){return"function"===typeof t?t(e):t}function xi(e){var t=yi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var s=oi,a=s.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,s=s.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((ri&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,ii.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==i);null===c?o=s:c.next=l,os(s,t.memoizedState)||(bo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Ll|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wi(e){var t=yi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);os(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function ji(){}function Ni(e,t){var n=ii,s=yi(),a=t(),i=!os(s.memoizedState,a);if(i&&(s.memoizedState=a,bo=!0),s=s.queue,Di(_i.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Pi(9,ki.bind(null,n,s,a,t),void 0,null),null===Tl)throw Error(r(349));0!==(30&ri)||Si(n,t,a)}return a}function Si(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ki(e,t,n,s){t.value=n,t.getSnapshot=s,Ci(t)&&Ei(e)}function _i(e,t,n){return n(function(){Ci(t)&&Ei(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!os(e,n)}catch(s){return!0}}function Ei(e){var t=Ir(e,1);null!==t&&nc(t,e,1,-1)}function Ti(e){var t=vi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=$i.bind(null,ii,e),[t.memoizedState,e]}function Pi(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Oi(){return yi().memoizedState}function Ri(e,t,n,s){var a=vi();ii.flags|=e,a.memoizedState=Pi(1|t,n,void 0,void 0===s?null:s)}function Ai(e,t,n,s){var a=yi();s=void 0===s?null:s;var r=void 0;if(null!==oi){var i=oi.memoizedState;if(r=i.destroy,null!==s&&mi(s,i.deps))return void(a.memoizedState=Pi(t,n,r,s))}ii.flags|=e,a.memoizedState=Pi(1|t,n,r,s)}function Ii(e,t){return Ri(8390656,8,e,t)}function Di(e,t){return Ai(2048,8,e,t)}function Li(e,t){return Ai(4,2,e,t)}function Ui(e,t){return Ai(4,4,e,t)}function Bi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ai(4,4,Bi.bind(null,t,e),n)}function zi(){}function Mi(e,t){var n=yi();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&mi(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Wi(e,t){var n=yi();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&mi(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function qi(e,t,n){return 0===(21&ri)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(os(n,t)||(n=pt(),ii.lanes|=n,Ll|=n,e.baseState=!0),t)}function Hi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var s=ai.transition;ai.transition={};try{e(!1),t()}finally{bt=n,ai.transition=s}}function Vi(){return yi().memoizedState}function Ki(e,t,n){var s=tc(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Ji(e))Gi(t,n);else if(null!==(n=Ar(e,t,n,s))){nc(n,e,s,ec()),Qi(n,t,s)}}function $i(e,t,n){var s=tc(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ji(e))Gi(t,a);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=r(i,n);if(a.hasEagerState=!0,a.eagerState=o,os(o,i)){var l=t.interleaved;return null===l?(a.next=a,Rr(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ar(e,t,a,s))&&(nc(n,e,s,a=ec()),Qi(n,t,s))}}function Ji(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Gi(e,t){ui=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qi(e,t,n){if(0!==(4194240&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Yi={readContext:Pr,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},Xi={readContext:Pr,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:Pr,useEffect:Ii,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ri(4194308,4,Bi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ri(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ri(4,2,e,t)},useMemo:function(e,t){var n=vi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=vi();return t=void 0!==n?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:Ti,useDebugValue:zi,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Ti(!1),t=e[0];return e=Hi.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=ii,a=vi();if(ar){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Tl)throw Error(r(349));0!==(30&ri)||Si(s,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Ii(_i.bind(null,s,i,e),[e]),s.flags|=2048,Pi(9,ki.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=vi(),t=Tl.identifierPrefix;if(ar){var n=Ya;t=":"+t+"R"+(n=(Qa&~(1<<32-it(Qa)-1)).toString(32)+n),0<(n=di++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Pr,useCallback:Mi,useContext:Pr,useEffect:Di,useImperativeHandle:Fi,useInsertionEffect:Li,useLayoutEffect:Ui,useMemo:Wi,useReducer:xi,useRef:Oi,useState:function(){return xi(bi)},useDebugValue:zi,useDeferredValue:function(e){return qi(yi(),oi.memoizedState,e)},useTransition:function(){return[xi(bi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1},eo={readContext:Pr,useCallback:Mi,useContext:Pr,useEffect:Di,useImperativeHandle:Fi,useInsertionEffect:Li,useLayoutEffect:Ui,useMemo:Wi,useReducer:wi,useRef:Oi,useState:function(){return wi(bi)},useDebugValue:zi,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:qi(t,oi.memoizedState,e)},useTransition:function(){return[wi(bi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ec(),a=tc(e),r=Br(s,a);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Fr(e,r,a))&&(nc(t,e,a,s),zr(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ec(),a=tc(e),r=Br(s,a);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Fr(e,r,a))&&(nc(t,e,a,s),zr(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),s=tc(e),a=Br(n,s);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Fr(e,a,s))&&(nc(t,e,s,n),zr(t,e,s))}};function ao(e,t,n,s,a,r,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!ls(n,s)||!ls(a,r))}function ro(e,t,n){var s=!1,a=Ca,r=t.contextType;return"object"===typeof r&&null!==r?r=Pr(r):(a=Ra(t)?Pa:Ea.current,r=(s=null!==(s=t.contextTypes)&&void 0!==s)?Oa(e,a):Ca),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=r),t}function io(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Lr(e);var r=t.contextType;"object"===typeof r&&null!==r?a.context=Pr(r):(r=Ra(t)?Pa:Ea.current,a.context=Oa(e,r)),a.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(no(e,t,r,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&so.enqueueReplaceState(a,a.state,null),Wr(e,n,a,s),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",s=t;do{n+=M(s),s=s.return}while(s);var a=n}catch(r){a="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Br(-1,n)).tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=s),uo(0,t)},n}function mo(e,t,n){(n=Br(-1,n)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){uo(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof s&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new ho;var a=new Set;s.set(t,a)}else void 0===(a=s.get(t))&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,s,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Br(-1,1)).tag=2,Fr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yo=x.ReactCurrentOwner,bo=!1;function xo(e,t,n,s){t.child=null===e?wr(t,null,n,s):xr(t,e.child,n,s)}function wo(e,t,n,s,a){n=n.render;var r=t.ref;return Tr(t,a),s=pi(e,t,n,s,r,a),n=gi(),null===e||bo?(ar&&n&&er(t),t.flags|=1,xo(e,t,s,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function jo(e,t,n,s,a){if(null===e){var r=n.type;return"function"!==typeof r||Rc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,s,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,No(e,t,r,s,a))}if(r=e.child,0===(e.lanes&a)){var i=r.memoizedProps;if((n=null!==(n=n.compare)?n:ls)(i,s)&&e.ref===t.ref)return Ho(e,t,a)}return t.flags|=1,(e=Ac(r,s)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,s,a){if(null!==e){var r=e.memoizedProps;if(ls(r,s)&&e.ref===t.ref){if(bo=!1,t.pendingProps=s=r,0===(e.lanes&a))return t.lanes=e.lanes,Ho(e,t,a);0!==(131072&e.flags)&&(bo=!0)}}return _o(e,t,n,s,a)}function So(e,t,n){var s=t.pendingProps,a=s.children,r=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_a(Al,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_a(Al,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==r?r.baseLanes:n,_a(Al,Rl),Rl|=s}else null!==r?(s=r.baseLanes|n,t.memoizedState=null):s=n,_a(Al,Rl),Rl|=s;return xo(e,t,a,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _o(e,t,n,s,a){var r=Ra(n)?Pa:Ea.current;return r=Oa(t,r),Tr(t,a),n=pi(e,t,n,s,r,a),s=gi(),null===e||bo?(ar&&s&&er(t),t.flags|=1,xo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function Co(e,t,n,s,a){if(Ra(n)){var r=!0;La(t)}else r=!1;if(Tr(t,a),null===t.stateNode)qo(e,t),ro(t,n,s),oo(t,n,s,a),s=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Pr(c):c=Oa(t,c=Ra(n)?Pa:Ea.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==s||l!==c)&&io(t,i,s,c),Dr=!1;var h=t.memoizedState;i.state=h,Wr(t,s,i,a),l=t.memoizedState,o!==s||h!==l||Ta.current||Dr?("function"===typeof u&&(no(t,n,u,s),l=t.memoizedState),(o=Dr||ao(t,n,o,s,h,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),i.props=s,i.state=l,i.context=c,s=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Ur(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Pr(l):l=Oa(t,l=Ra(n)?Pa:Ea.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&io(t,i,s,l),Dr=!1,h=t.memoizedState,i.state=h,Wr(t,s,i,a);var m=t.memoizedState;o!==d||h!==m||Ta.current||Dr?("function"===typeof f&&(no(t,n,f,s),m=t.memoizedState),(c=Dr||ao(t,n,c,s,h,m,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(s,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(s,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),i.props=s,i.state=m,i.context=l,s=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Eo(e,t,n,s,r,a)}function Eo(e,t,n,s,a,r){ko(e,t);var i=0!==(128&t.flags);if(!s&&!i)return a&&Ua(t,n,!1),Ho(e,t,r);s=t.stateNode,yo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&i?(t.child=xr(t,e.child,null,r),t.child=xr(t,null,o,r)):xo(e,t,o,r),t.memoizedState=s.state,a&&Ua(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Ia(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(0,t.context,!1),Gr(e,t.containerInfo)}function Po(e,t,n,s,a){return fr(),mr(a),t.flags|=256,xo(e,t,n,s),t.child}var Oo,Ro,Ao,Io,Do={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var s,a=t.pendingProps,i=Zr.current,o=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&i)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),_a(Zr,1&i),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,a,0,null),e=Dc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Do,e):Bo(t,l));if(null!==(i=e.memoizedState)&&null!==(s=i.dehydrated))return function(e,t,n,s,a,i,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,s=co(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Lc({mode:"visible",children:s.children},a,0,null),(i=Dc(i,a,o,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,0!==(1&t.mode)&&xr(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Do,i);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===a.data){if(s=a.nextSibling&&a.nextSibling.dataset)var l=s.dgst;return s=l,Fo(e,t,o,s=co(i=Error(r(419)),s,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(s=Tl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(s.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Ir(e,a),nc(s,e,a,-1))}return pc(),Fo(e,t,o,s=co(Error(r(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,sr=ca(a.nextSibling),nr=t,ar=!0,rr=null,null!==e&&($a[Ja++]=Qa,$a[Ja++]=Ya,$a[Ja++]=Ga,Qa=e.id,Ya=e.overflow,Ga=t),t=Bo(t,s.children),t.flags|=4096,t)}(e,t,l,a,s,i,n);if(o){o=a.fallback,l=t.mode,s=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ac(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==s?o=Ac(s,o):(o=Dc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,a}return e=(o=e.child).sibling,a=Ac(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Bo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,s){return null!==s&&mr(s),xr(t,e.child,null,n),(e=Bo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Er(e.return,t,n)}function Mo(e,t,n,s,a){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=n,r.tailMode=a)}function Wo(e,t,n){var s=t.pendingProps,a=s.revealOrder,r=s.tail;if(xo(e,t,s.children,n),0!==(2&(s=Zr.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(_a(Zr,s),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Mo(t,!1,a,n,r);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Mo(t,!0,n,null,r);break;case"together":Mo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Ac(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ac(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!ar)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,s|=14680064&a.subtreeFlags,s|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function $o(e,t,n){var s=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ra(t.type)&&Aa(),Ko(t),null;case 3:return s=t.stateNode,Qr(),ka(Ta),ka(Ea),ni(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(dr(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(ic(rr),rr=null))),Ro(e,t),Ko(t),null;case 5:Xr(t);var a=Jr($r.current);if(n=t.type,null!==e&&null!=t.stateNode)Ao(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(r(166));return Ko(t),null}if(e=Jr(Vr.current),dr(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[ha]=t,s[fa]=i,e=0!==(1&t.mode),n){case"dialog":Fs("cancel",s),Fs("close",s);break;case"iframe":case"object":case"embed":Fs("load",s);break;case"video":case"audio":for(a=0;a<Ds.length;a++)Fs(Ds[a],s);break;case"source":Fs("error",s);break;case"img":case"image":case"link":Fs("error",s),Fs("load",s);break;case"details":Fs("toggle",s);break;case"input":Q(s,i),Fs("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Fs("invalid",s);break;case"textarea":ae(s,i),Fs("invalid",s)}for(var l in ye(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xs(s.textContent,c,e),a=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xs(s.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fs("scroll",s)}switch(n){case"input":K(s),Z(s,i,!0);break;case"textarea":K(s),ie(s);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(s.onclick=Zs)}s=a,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),"select"===n&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[ha]=t,e[fa]=s,Oo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,s),n){case"dialog":Fs("cancel",e),Fs("close",e),a=s;break;case"iframe":case"object":case"embed":Fs("load",e),a=s;break;case"video":case"audio":for(a=0;a<Ds.length;a++)Fs(Ds[a],e);a=s;break;case"source":Fs("error",e),a=s;break;case"img":case"image":case"link":Fs("error",e),Fs("load",e),a=s;break;case"details":Fs("toggle",e),a=s;break;case"input":Q(e,s),a=G(e,s),Fs("invalid",e);break;case"option":default:a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=U({},s,{value:void 0}),Fs("invalid",e);break;case"textarea":ae(e,s),a=se(e,s),Fs("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Fs("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":K(e),Z(e,s,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=s.value&&e.setAttribute("value",""+H(s.value));break;case"select":e.multiple=!!s.multiple,null!=(i=s.value)?ne(e,!!s.multiple,i,!1):null!=s.defaultValue&&ne(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zs)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(r(166));if(n=Jr($r.current),Jr(Vr.current),dr(t)){if(s=t.stateNode,n=t.memoizedProps,s[ha]=t,(i=s.nodeValue!==n)&&null!==(e=nr))switch(e.tag){case 3:Xs(s.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xs(s.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[ha]=t,t.stateNode=s}return Ko(t),null;case 13:if(ka(Zr),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ar&&null!==sr&&0!==(1&t.mode)&&0===(128&t.flags))hr(),fr(),t.flags|=98560,i=!1;else if(i=dr(t),null!==s&&null!==s.dehydrated){if(null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(r(317));i[ha]=t}else fr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),i=!1}else null!==rr&&(ic(rr),rr=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zr.current)?0===Il&&(Il=3):pc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Qr(),Ro(e,t),null===e&&Ws(t.stateNode.containerInfo),Ko(t),null;case 10:return Cr(t.type._context),Ko(t),null;case 19:if(ka(Zr),null===(i=t.memoizedState))return Ko(t),null;if(s=0!==(128&t.flags),null===(l=i.rendering))if(s)Vo(i,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;null!==n;)e=s,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _a(Zr,1&Zr.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>Wl&&(t.flags|=128,s=!0,Vo(i,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ei(l))){if(t.flags|=128,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!ar)return Ko(t),null}else 2*Ye()-i.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,s=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,n=Zr.current,_a(Zr,s?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return dc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Jo(e,t){switch(tr(t),t.tag){case 1:return Ra(t.type)&&Aa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qr(),ka(Ta),ka(Ea),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xr(t),null;case 13:if(ka(Zr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));fr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(Zr),null;case 4:return Qr(),null;case 10:return Cr(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Oo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Ao=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Jr(Vr.current);var r,i=null;switch(n){case"input":a=G(e,a),s=G(e,s),i=[];break;case"select":a=U({},a,{value:void 0}),s=U({},s,{value:void 0}),i=[];break;case"textarea":a=se(e,a),s=se(e,s),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof s.onClick&&(e.onclick=Zs)}for(u in ye(n,s),n=null,a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=null!=a?a[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fs("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Io=function(e,t,n,s){n!==s&&(t.flags|=4)};var Go=!1,Qo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(s){Sc(e,t,s)}else n.current=null}function el(e,t,n){try{n()}catch(s){Sc(e,t,s)}}var tl=!1;function nl(e,t,n){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var a=s=s.next;do{if((a.tag&e)===e){var r=a.destroy;a.destroy=void 0,void 0!==r&&el(t,n,r)}a=a.next}while(a!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[pa],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,t);case 6:var s=ul,a=dl;ul=null,hl(e,t,n),dl=a,null!==(ul=s)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Wt(e)):la(ul,n.stateNode));break;case 4:s=ul,a=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=s,dl=a;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(s=n.updateQueue)&&null!==(s=s.lastEffect))){a=s=s.next;do{var r=a,i=r.destroy;r=r.tag,void 0!==i&&(0!==(2&r)||0!==(4&r))&&el(n,t,i),a=a.next}while(a!==s)}hl(e,t,n);break;case 1:if(!Qo&&(Zo(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Sc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qo=(s=Qo)||null!==n.memoizedState,hl(e,t,n),Qo=s):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach(function(t){var s=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var a=n[s];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(r(160));fl(i,o,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Sc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),vl(e),4&s){try{nl(3,e,e.return),sl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:pl(t,e),vl(e),512&s&&null!==n&&Zo(n,n.return);break;case 5:if(pl(t,e),vl(e),512&s&&null!==n&&Zo(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){Sc(e,e.return,g)}}if(4&s&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(a,i),be(l,o);var u=be(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,u)}switch(l){case"input":X(a,i);break;case"textarea":re(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ne(a,!!i.multiple,m,!1):f!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[fa]=i}catch(g){Sc(e,e.return,g)}}break;case 6:if(pl(t,e),vl(e),4&s){if(null===e.stateNode)throw Error(r(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Sc(e,e.return,g)}}break;case 3:if(pl(t,e),vl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:pl(t,e),vl(e);break;case 13:pl(t,e),vl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Ml=Ye())),4&s&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(u=Qo)||d,pl(t,e),Qo=u):pl(t,e),vl(e),8192&s){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(m=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){s=f,n=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Sc(s,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==m?(m.return=f,Xo=m):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),vl(e),4&s&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var s=n;break e}n=n.return}throw Error(r(160))}switch(s.tag){case 5:var a=s.stateNode;32&s.flags&&(he(a,""),s.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=s.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(r(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xo=e,bl(e,t,n)}function bl(e,t,n){for(var s=0!==(1&e.mode);null!==Xo;){var a=Xo,r=a.child;if(22===a.tag&&s){var i=null!==a.memoizedState||Go;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Go;var c=Qo;if(Go=i,(Qo=l)&&!c)for(Xo=a;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?jl(a):null!==l?(l.return=i,Xo=l):jl(a);for(;null!==r;)Xo=r,bl(r,t,n),r=r.sibling;Xo=a,Go=o,Qo=c}xl(e)}else 0!==(8772&a.subtreeFlags)&&null!==r?(r.return=a,Xo=r):xl(e)}}function xl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Qo)if(null===n)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&qr(t,i,s);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qr(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(r(163))}Qo||512&t.flags&&al(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function jl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var a=t.return;try{s.componentDidMount()}catch(l){Sc(t,a,l)}}var r=t.return;try{al(t)}catch(l){Sc(t,r,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var Nl,Sl=Math.ceil,kl=x.ReactCurrentDispatcher,_l=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,El=0,Tl=null,Pl=null,Ol=0,Rl=0,Al=Sa(0),Il=0,Dl=null,Ll=0,Ul=0,Bl=0,Fl=null,zl=null,Ml=0,Wl=1/0,ql=null,Hl=!1,Vl=null,Kl=null,$l=!1,Jl=null,Gl=0,Ql=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&El)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Ol?Ol&-Ol:null!==pr.transition?(0===Zl&&(Zl=pt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,s){if(50<Ql)throw Ql=0,Yl=null,Error(r(185));vt(e,n,s),0!==(2&El)&&e===Tl||(e===Tl&&(0===(2&El)&&(Ul|=n),4===Il&&oc(e,Ol)),sc(e,s),1===n&&0===El&&0===(1&t.mode)&&(Wl=Ye()+500,Fa&&Wa()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-it(r),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&s)||(a[i]=ft(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}}(e,t);var s=ht(e,e===Tl?Ol:0);if(0===s)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){Fa=!0,Ma(e)}(lc.bind(null,e)):Ma(lc.bind(null,e)),ia(function(){0===(6&El)&&Wa()}),n=null;else{switch(xt(s)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=st}n=Tc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(r(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var s=ht(e,e===Tl?Ol:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=gc(e,s);else{t=s;var a=El;El|=2;var i=mc();for(Tl===e&&Ol===t||(ql=null,Wl=Ye()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}_r(),kl.current=i,El=a,null!==Pl?t=0:(Tl=null,Ol=0,t=Il)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(s=a,t=rc(e,a))),1===t)throw n=Dl,hc(e,0),oc(e,s),sc(e,Ye()),n;if(6===t)oc(e,s);else{if(a=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var s=0;s<n.length;s++){var a=n[s],r=a.getSnapshot;a=a.value;try{if(!os(r(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,s))&&(0!==(i=mt(e))&&(s=i,t=rc(e,i))),1===t))throw n=Dl,hc(e,0),oc(e,s),sc(e,Ye()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(r(345));case 2:case 5:wc(e,zl,ql);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=Ml+500-Ye())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=sa(wc.bind(null,e,zl,ql),t);break}wc(e,zl,ql);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-it(s);i=1<<o,(o=t[o])>a&&(a=o),s&=~i}if(s=a,10<(s=(120>(s=Ye()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Sl(s/1960))-s)){e.timeoutHandle=sa(wc.bind(null,e,zl,ql),s);break}wc(e,zl,ql);break;default:throw Error(r(329))}}}return sc(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function rc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=n,null!==t&&ic(t)),e}function ic(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Bl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),s=1<<n;e[n]=-1,t&=~s}}function lc(e){if(0!==(6&El))throw Error(r(327));jc();var t=ht(e,0);if(0===(1&t))return sc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var s=mt(e);0!==s&&(t=s,n=rc(e,s))}if(1===n)throw n=Dl,hc(e,0),oc(e,t),sc(e,Ye()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,ql),sc(e,Ye()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Wl=Ye()+500,Fa&&Wa())}}function uc(e){null!==Jl&&0===Jl.tag&&0===(6&El)&&jc();var t=El;El|=1;var n=Cl.transition,s=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=s,Cl.transition=n,0===(6&(El=t))&&Wa()}}function dc(){Rl=Al.current,ka(Al)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Pl)for(n=Pl.return;null!==n;){var s=n;switch(tr(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Aa();break;case 3:Qr(),ka(Ta),ka(Ea),ni();break;case 5:Xr(s);break;case 4:Qr();break;case 13:case 19:ka(Zr);break;case 10:Cr(s.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Pl=e=Ac(e.current,null),Ol=Rl=t,Il=0,Dl=null,Bl=Ul=Ll=0,zl=Fl=null,null!==Or){for(t=0;t<Or.length;t++)if(null!==(s=(n=Or[t]).interleaved)){n.interleaved=null;var a=s.next,r=n.pending;if(null!==r){var i=r.next;r.next=a,s.next=i}n.pending=s}Or=null}return e}function fc(e,t){for(;;){var n=Pl;try{if(_r(),si.current=Yi,ci){for(var s=ii.memoizedState;null!==s;){var a=s.queue;null!==a&&(a.pending=null),s=s.next}ci=!1}if(ri=0,li=oi=ii=null,ui=!1,di=0,_l.current=null,null===n||null===n.return){Il=1,Dl=t,Pl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,vo(m,o,l,0,t),1&m.mode&&po(i,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){po(i,u,t),pc();break e}c=Error(r(426))}else if(ar&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),mr(lo(c,l));break e}}i=c=lo(c,l),4!==Il&&(Il=2),null===Fl?Fl=[i]:Fl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Mr(i,fo(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Mr(i,mo(i,l,t));break e}}i=i.return}while(null!==i)}xc(n)}catch(x){t=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function mc(){var e=kl.current;return kl.current=Yi,null===e?Yi:e}function pc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Tl||0===(268435455&Ll)&&0===(268435455&Ul)||oc(Tl,Ol)}function gc(e,t){var n=El;El|=2;var s=mc();for(Tl===e&&Ol===t||(ql=null,hc(e,t));;)try{vc();break}catch(a){fc(e,a)}if(_r(),El=n,kl.current=s,null!==Pl)throw Error(r(261));return Tl=null,Ol=0,Il}function vc(){for(;null!==Pl;)bc(Pl)}function yc(){for(;null!==Pl&&!Ge();)bc(Pl)}function bc(e){var t=Nl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?xc(e):Pl=t,_l.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$o(n,t,Rl)))return void(Pl=n)}else{if(null!==(n=Jo(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Il=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Il&&(Il=5)}function wc(e,t,n){var s=bt,a=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,s){do{jc()}while(null!==Jl);if(0!==(6&El))throw Error(r(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),r=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~r}}(e,i),e===Tl&&(Pl=Tl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||$l||($l=!0,Tc(tt,function(){return jc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=El;El|=4,_l.current=null,function(e,t){if(ea=Ht,fs(e=hs())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===i&&++d===s&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ht=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(r(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}p=tl,tl=!1}(e,n),gl(n,e),ms(ta),Ht=!!ea,ta=ea=null,e.current=n,yl(n,e,a),Qe(),El=l,bt=o,Cl.transition=i}else e.current=n;if($l&&($l=!1,Jl=e,Gl=a),i=e.pendingLanes,0===i&&(Kl=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Ye()),null!==t)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Gl)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,Wa()}(e,t,n,s)}finally{Cl.transition=a,bt=s}return null}function jc(){if(null!==Jl){var e=xt(Gl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Jl)var s=!1;else{if(e=Jl,Jl=null,Gl=0,0!==(6&El))throw Error(r(331));var a=El;for(El|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var f=(d=Xo).sibling,m=d.return;if(rl(d),d===u){Xo=null;break}if(null!==f){f.return=m,Xo=f;break}Xo=m}}}var p=i.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Xo=y;break e}Xo=i.return}}var b=e.current;for(Xo=b;null!==Xo;){var x=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Xo=x;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(j){Sc(l,l.return,j)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(El=a,Wa(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(at,e)}catch(j){}s=!0}return s}finally{bt=n,Cl.transition=t}}return!1}function Nc(e,t,n){e=Fr(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),sc(e,t))}function Sc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Kl||!Kl.has(s))){t=Fr(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),sc(t,e));break}}t=t.return}}function kc(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Ol&n)===n&&(4===Il||3===Il&&(130023424&Ol)===Ol&&500>Ye()-Ml?hc(e,0):Bl|=n),sc(e,t)}function _c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ir(e,t))&&(vt(e,t,n),sc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_c(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(r(314))}null!==s&&s.delete(t),_c(e,n)}function Tc(e,t){return $e(e,t)}function Pc(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,s){return new Pc(e,t,n,s)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,s,a,i){var o=2;if(s=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Dc(n.children,a,i,t);case S:o=8,a|=8;break;case k:return(e=Oc(12,n,t,2|a)).elementType=k,e.lanes=i,e;case T:return(e=Oc(13,n,t,a)).elementType=T,e.lanes=i,e;case P:return(e=Oc(19,n,t,a)).elementType=P,e.lanes=i,e;case A:return Lc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:o=10;break e;case C:o=9;break e;case E:o=11;break e;case O:o=14;break e;case R:o=16,s=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Oc(o,n,t,a)).elementType=e,t.type=s,t.lanes=i,t}function Dc(e,t,n,s){return(e=Oc(7,e,s,t)).lanes=n,e}function Lc(e,t,n,s){return(e=Oc(22,e,s,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,s,a,r,i,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Oc(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lr(r),e}function Mc(e){if(!e)return Ca;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ra(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Ra(n))return Da(e,n,t)}return t}function Wc(e,t,n,s,a,r,i,o,l){return(e=zc(n,s,!0,e,0,r,0,o,l)).context=Mc(null),n=e.current,(r=Br(s=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Fr(n,r,a),e.current.lanes=a,vt(e,a,s),sc(e,s),e}function qc(e,t,n,s){var a=t.current,r=ec(),i=tc(a);return n=Mc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Br(r,i)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Fr(a,t,i))&&(nc(e,a,i,r),zr(e,a,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:To(t),fr();break;case 5:Yr(t);break;case 1:Ra(t.type)&&La(t);break;case 4:Gr(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;_a(jr,s._currentValue),s._currentValue=a;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(_a(Zr,1&Zr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(_a(Zr,1&Zr.current),null!==(e=Ho(e,t,n))?e.sibling:null);_a(Zr,1&Zr.current);break;case 19:if(s=0!==(n&t.childLanes),0!==(128&e.flags)){if(s)return Wo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),_a(Zr,Zr.current),s)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Ho(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,ar&&0!==(1048576&t.flags)&&Za(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;qo(e,t),e=t.pendingProps;var a=Oa(t,Ea.current);Tr(t,n),a=pi(null,t,s,e,a,n);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ra(s)?(i=!0,La(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Lr(t),a.updater=so,t.stateNode=a,a._reactInternals=t,oo(t,s,e,n),t=Eo(null,t,s,!0,i,n)):(t.tag=0,ar&&i&&er(t),xo(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,s=(a=s._init)(s._payload),t.type=s,a=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===O)return 14}return 2}(s),e=to(s,e),a){case 0:t=_o(null,t,s,e,n);break e;case 1:t=Co(null,t,s,e,n);break e;case 11:t=wo(null,t,s,e,n);break e;case 14:t=jo(null,t,s,to(s.type,e),n);break e}throw Error(r(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,_o(e,t,s,a=t.elementType===s?a:to(s,a),n);case 1:return s=t.type,a=t.pendingProps,Co(e,t,s,a=t.elementType===s?a:to(s,a),n);case 3:e:{if(To(t),null===e)throw Error(r(387));s=t.pendingProps,a=(i=t.memoizedState).element,Ur(e,t),Wr(t,s,null,n);var o=t.memoizedState;if(s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Po(e,t,s,n,a=lo(Error(r(423)),t));break e}if(s!==a){t=Po(e,t,s,n,a=lo(Error(r(424)),t));break e}for(sr=ca(t.stateNode.containerInfo.firstChild),nr=t,ar=!0,rr=null,n=wr(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fr(),s===a){t=Ho(e,t,n);break e}xo(e,t,s,n)}t=t.child}return t;case 5:return Yr(t),null===e&&cr(t),s=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,na(s,a)?o=null:null!==i&&na(s,i)&&(t.flags|=32),ko(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&cr(t),null;case 13:return Uo(e,t,n);case 4:return Gr(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=xr(t,null,s,n):xo(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,wo(e,t,s,a=t.elementType===s?a:to(s,a),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,_a(jr,s._currentValue),s._currentValue=o,null!==i)if(os(i.value,o)){if(i.children===a.children&&!Ta.current){t=Ho(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===i.tag){(c=Br(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Er(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(r(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Er(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}xo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Tr(t,n),s=s(a=Pr(a)),t.flags|=1,xo(e,t,s,n),t.child;case 14:return a=to(s=t.type,t.pendingProps),jo(e,t,s,a=to(s.type,a),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:to(s,a),qo(e,t),t.tag=1,Ra(s)?(e=!0,La(t)):e=!1,Tr(t,n),ro(t,s,a),oo(t,s,a,n),Eo(null,t,s,!0,e,n);case 19:return Wo(e,t,n);case 22:return So(e,t,n)}throw Error(r(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,s,a){var r=n._reactRootContainer;if(r){var i=r;if("function"===typeof a){var o=a;a=function(){var e=Hc(i);o.call(e)}}qc(t,i,e,a)}else i=function(e,t,n,s,a){if(a){if("function"===typeof s){var r=s;s=function(){var e=Hc(i);r.call(e)}}var i=Wc(t,s,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[ma]=i.current,Ws(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof s){var o=s;s=function(){var e=Hc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[ma]=l.current,Ws(8===e.nodeType?e.parentNode:e),uc(function(){qc(t,l,n,s)}),l}(n,t,e,a,s);return Hc(i)}Gc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));qc(e,t,null,null)},Gc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){qc(null,e,null,null)}),t[ma]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Ut(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),sc(t,Ye()),0===(6&El)&&(Wl=Ye()+500,Wa()))}break;case 13:uc(function(){var t=Ir(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},jt=function(e){if(13===e.tag){var t=Ir(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Ir(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},St=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},je=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=wa(s);if(!a)throw Error(r(90));$(s),X(s,a)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[ba,xa,wa,_e,Ce,cc]},tu={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{at=su.inject(nu),rt=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(r(200));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(r(299));var n=!1,s="",a=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,s,a),e[ma]=t.current,Ws(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(r(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(r(405));var s=null!=n&&n.hydratedSources||null,a=!1,i="",o=$c;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,a,0,i,o),e[ma]=t.current,Ws(e),s)for(e=0;e<s.length;e++)a=(a=(n=s[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Gc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(r(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(r(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ma]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Yc(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Zc(e,t,n,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(374));class r extends a.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===s?a="pl":"phrase"===s?a="ph":"websearch"===s&&(a="w");const r=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(a,"fts").concat(r,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=n?"".concat(n,".or"):"or";return this.url.searchParams.append(s,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=r},829:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:s,fetch:a}=t;this.url=e,this.headers=new Headers(n),this.schema=s,this.fetch=a}select(e,t){const{head:n=!1,count:s}=null!==t&&void 0!==t?t:{},r=n?"HEAD":"GET";let i=!1;const o=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer","count=".concat(s)),new a.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;if(t&&this.headers.append("Prefer","count=".concat(t)),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer","count=".concat(s)),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer","count=".concat(t)),new a.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new a.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const a=s(n(210));t.PostgrestClient=a.default;const r=s(n(829));t.PostgrestQueryBuilder=r.default;const i=s(n(736));t.PostgrestFilterBuilder=i.default;const o=s(n(374));t.PostgrestTransformBuilder=o.default;const l=s(n(286));t.PostgrestBuilder=l.default;const c=s(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(s,a){if(1&a&&(s=this(s)),8&a)return s;if("object"===typeof s&&s){if(4&a&&s.__esModule)return s;if(16&a&&"function"===typeof s.then)return s}var r=Object.create(null);n.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&s;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>s[e]);return i.default=()=>s,n.d(r,i),r}})(),n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s,a=n(43),r=n.t(a,2),i=n(391),o=n(950),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,s){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function v(e,t,n,a){void 0===a&&(a={});let{window:r=document.defaultView,v5Compat:i=!1}=a,o=r.history,l=s.Pop,h=null,g=v();function v(){return(o.state||{idx:null}).idx}function y(){l=s.Pop;let e=v(),t=null==e?null:e-g;g=e,h&&h({action:l,location:x.location,delta:t})}function b(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let x={get action(){return l},get location(){return e(r,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(u,y),h=e,()=>{r.removeEventListener(u,y),h=null}},createHref:e=>t(r,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=s.Push;let a=m(x.location,e,t);n&&n(a,e),g=v()+1;let c=f(a,g),u=x.createHref(a);try{o.pushState(c,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;r.location.assign(u)}i&&h&&h({action:l,location:x.location,delta:1})},replace:function(e,t){l=s.Replace;let a=m(x.location,e,t);n&&n(a,e),g=v();let r=f(a,g),c=x.createHref(a);o.replaceState(r,"",c),i&&h&&h({action:l,location:x.location,delta:0})},go:e=>o.go(e)};return x}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),x(e,t,n,!1)}function x(e,t,n,s){let a=I(("string"===typeof t?g(t):t).pathname||"/",n);if(null==a)return null;let r=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let i=null;for(let o=0;null==i&&o<r.length;++o){let e=A(a);i=O(r[o],e,s)}return i}function w(e,t,n,s){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===s&&(s="");let a=(e,a,r)=>{let i={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(d(i.relativePath.startsWith(s),'Absolute route path "'+i.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(s.length));let o=F([s,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:P(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let s of j(e.path))a(e,t,s);else a(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[n,...s]=t,a=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===s.length)return a?[r,""]:[r];let i=j(s.join("/")),o=[];return o.push(...i.map(e=>""===e?r:[r,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const N=/^:[\w-]+$/,S=3,k=2,_=1,C=10,E=-2,T=e=>"*"===e;function P(e,t){let n=e.split("/"),s=n.length;return n.some(T)&&(s+=E),t&&(s+=k),n.filter(e=>!T(e)).reduce((e,t)=>e+(N.test(t)?S:""===t?_:C),s)}function O(e,t,n){void 0===n&&(n=!1);let{routesMeta:s}=e,a={},r="/",i=[];for(let o=0;o<s.length;++o){let e=s[o],l=o===s.length-1,c="/"===r?t:t.slice(r.length)||"/",u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!s[s.length-1].route.index&&(u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:F([r,u.pathname]),pathnameBase:z(F([r,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(r=F([r,u.pathnameBase]))}return i}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(s.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(s.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let r=new RegExp(a,t?void 0:"i");return[r,s]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let r=a[0],i=r.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:s.reduce((e,t,n)=>{let{paramName:s,isOptional:a}=t;if("*"===s){let e=o[n]||"";i=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[s]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:r,pathnameBase:i,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&"/"!==s?null:e.slice(n)||"/"}function D(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function U(e,t){let n=L(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function B(e,t,n,s){let a;void 0===s&&(s=!1),"string"===typeof e?a=g(e):(a=c({},e),d(!a.pathname||!a.pathname.includes("?"),D("?","pathname","search",a)),d(!a.pathname||!a.pathname.includes("#"),D("#","pathname","hash",a)),d(!a.search||!a.search.includes("#"),D("#","search","hash",a)));let r,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)r=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}r=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:s="",hash:a=""}="string"===typeof e?g(e):e,r=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:r,search:M(s),hash:W(a)}}(a,r),u=o&&"/"!==o&&o.endsWith("/"),h=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const F=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],V=(new Set(H),["get",...H]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},K.apply(this,arguments)}const $=a.createContext(null);const J=a.createContext(null);const G=a.createContext(null);const Q=a.createContext(null);const Y=a.createContext({outlet:null,matches:[],isDataRoute:!1});const X=a.createContext(null);function Z(){return null!=a.useContext(Q)}function ee(){return Z()||d(!1),a.useContext(Q).location}function te(e){a.useContext(G).static||a.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=a.useContext(Y);return e?function(){let{router:e}=de(ce.UseNavigateStable),t=fe(ue.UseNavigateStable),n=a.useRef(!1);return te(()=>{n.current=!0}),a.useCallback(function(s,a){void 0===a&&(a={}),n.current&&("number"===typeof s?e.navigate(s):e.navigate(s,K({fromRouteId:t},a)))},[e,t])}():function(){Z()||d(!1);let e=a.useContext($),{basename:t,future:n,navigator:s}=a.useContext(G),{matches:r}=a.useContext(Y),{pathname:i}=ee(),o=JSON.stringify(U(r,n.v7_relativeSplatPath)),l=a.useRef(!1);return te(()=>{l.current=!0}),a.useCallback(function(n,a){if(void 0===a&&(a={}),!l.current)return;if("number"===typeof n)return void s.go(n);let r=B(n,JSON.parse(o),i,"path"===a.relative);null==e&&"/"!==t&&(r.pathname="/"===r.pathname?t:F([t,r.pathname])),(a.replace?s.replace:s.push)(r,a.state,a)},[t,s,o,i,e])}()}function se(e,t,n,r){Z()||d(!1);let{navigator:i}=a.useContext(G),{matches:o}=a.useContext(Y),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=ee();if(t){var m;let e="string"===typeof t?g(t):t;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||d(!1),h=e}else h=f;let p=h.pathname||"/",v=p;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:v});let x=le(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:F([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,r);return t&&x?a.createElement(Q.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:s.Pop}},x):x}function ae(){let e=function(){var e;let t=a.useContext(X),n=he(ue.UseRouteError),s=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[s]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),n?a.createElement("pre",{style:r},n):null,null)}const re=a.createElement(ae,null);class ie extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(Y.Provider,{value:this.props.routeContext},a.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:s}=e,r=a.useContext($);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),a.createElement(Y.Provider,{value:t},s)}function le(e,t,n,s){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===s&&(s=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=s)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(r=n)?void 0:r.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let a=0;a<o.length;a++){let e=o[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=a),e.route.id){let{loaderData:t,errors:s}=n,a=e.route.loader&&void 0===t[e.route.id]&&(!s||void 0===s[e.route.id]);if(e.route.lazy||a){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,s,r)=>{let i,d=!1,h=null,f=null;var m;n&&(i=l&&s.route.id?l[s.route.id]:void 0,h=s.route.errorElement||re,c&&(u<0&&0===r?(m="route-fallback",!1||me[m]||(me[m]=!0),d=!0,f=null):u===r&&(d=!0,f=s.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,r+1)),g=()=>{let t;return t=i?h:d?f:s.route.Component?a.createElement(s.route.Component,null):s.route.element?s.route.element:e,a.createElement(oe,{match:s,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===r)?a.createElement(ie,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let t=a.useContext($);return t||d(!1),t}function he(e){let t=a.useContext(J);return t||d(!1),t}function fe(e){let t=function(){let e=a.useContext(Y);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const me={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function ge(e){let{to:t,replace:n,state:s,relative:r}=e;Z()||d(!1);let{future:i,static:o}=a.useContext(G),{matches:l}=a.useContext(Y),{pathname:c}=ee(),u=ne(),h=B(t,U(l,i.v7_relativeSplatPath),c,"path"===r),f=JSON.stringify(h);return a.useEffect(()=>u(JSON.parse(f),{replace:n,state:s,relative:r}),[u,f,r,n,s]),null}function ve(e){d(!1)}function ye(e){let{basename:t="/",children:n=null,location:r,navigationType:i=s.Pop,navigator:o,static:l=!1,future:c}=e;Z()&&d(!1);let u=t.replace(/^\/*/,"/"),h=a.useMemo(()=>({basename:u,navigator:o,static:l,future:K({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof r&&(r=g(r));let{pathname:f="/",search:m="",hash:p="",state:v=null,key:y="default"}=r,b=a.useMemo(()=>{let e=I(f,u);return null==e?null:{location:{pathname:e,search:m,hash:p,state:v,key:y},navigationType:i}},[u,f,m,p,v,y,i]);return null==b?null:a.createElement(G.Provider,{value:h},a.createElement(Q.Provider,{children:n,value:b}))}function be(e){let{children:t,location:n}=e;return se(xe(t),n)}new Promise(()=>{});a.Component;function xe(e,t){void 0===t&&(t=[]);let n=[];return a.Children.forEach(e,(e,s)=>{if(!a.isValidElement(e))return;let r=[...t,s];if(e.type===a.Fragment)return void n.push.apply(n,xe(e.props.children,r));e.type!==ve&&d(!1),e.props.index&&e.props.children&&d(!1);let i={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=xe(e.props.children,r)),n.push(i)}),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(xa){}new Map;const we=r.startTransition;l.flushSync,r.useId;function je(e){let{basename:t,children:n,future:s,window:r}=e,i=a.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:r,v5Compat:!0})&&(o={}),v(function(e,t){let{pathname:n="/",search:s="",hash:a=""}=g(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),m("",{pathname:n,search:s,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),s="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");s=-1===n?t:t.slice(0,n)}return s+"#"+("string"===typeof t?t:p(t))},function(e,t){h("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=i.current,[c,u]=a.useState({action:l.action,location:l.location}),{v7_startTransition:d}=s||{},f=a.useCallback(e=>{d&&we?we(()=>u(e)):u(e)},[u,d]);return a.useLayoutEffect(()=>l.listen(f),[l,f]),a.useEffect(()=>pe(s),[s]),a.createElement(ye,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ne,Se;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Se||(Se={}));class ke extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class _e extends ke{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ce extends ke{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ee extends ke{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Te;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Te||(Te={}));var Pe=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(xa){r(xa)}}function o(e){try{l(s.throw(e))}catch(xa){r(xa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class Oe{constructor(e){let{headers:t={},customFetch:s,region:a=Te.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=a,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(s)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){return Pe(this,arguments,void 0,function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var s;try{const{headers:a,method:r,body:i,signal:o}=n;let l={},{region:c}=n;c||(c=t.region);const u=new URL("".concat(t.url,"/").concat(e));let d;c&&"any"!==c&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c)),i&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&("undefined"!==typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):"string"===typeof i?(l["Content-Type"]="text/plain",d=i):"undefined"!==typeof FormData&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const h=yield t.fetch(u.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},l),t.headers),a),body:d,signal:o}).catch(e=>{if("AbortError"===e.name)throw e;throw new _e(e)}),f=h.headers.get("x-relay-error");if(f&&"true"===f)throw new Ce(h);if(!h.ok)throw new Ee(h);let m,p=(null!==(s=h.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return m="application/json"===p?yield h.json():"application/octet-stream"===p?yield h.blob():"text/event-stream"===p?h:"multipart/form-data"===p?yield h.formData():yield h.text(),{data:m,error:null,response:h}}catch(a){return a instanceof Error&&"AbortError"===a.name?{data:null,error:new _e(a)}:{data:null,error:a,response:a instanceof Ee||a instanceof Ce?a.context:void 0}}}()})}}var Re=n(980);const{PostgrestClient:Ae,PostgrestQueryBuilder:Ie,PostgrestFilterBuilder:De,PostgrestTransformBuilder:Le,PostgrestBuilder:Ue,PostgrestError:Be}=Re;const Fe=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(n," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(n," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},ze="realtime-js/".concat("2.74.0"),Me=1e4;var We,qe,He,Ve,Ke,$e;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(We||(We={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(qe||(qe={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(He||(He={})),function(e){e.websocket="websocket"}(Ve||(Ve={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Ke||(Ke={}));class Je{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),a=t.getUint8(2);let r=this.HEADER_LENGTH+2;const i=n.decode(e.slice(r,r+s));r+=s;const o=n.decode(e.slice(r,r+a));r+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(n.decode(e.slice(r,e.byteLength)))}}}class Ge{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}($e||($e={}));const Qe=function(e,t){var n;const s=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return t?Object.keys(t).reduce((n,a)=>(n[a]=Ye(a,e,t,s),n),{}):{}},Ye=(e,t,n,s)=>{const a=t.find(t=>t.name===e),r=null===a||void 0===a?void 0:a.type,i=n[e];return r&&!s.includes(r)?Xe(r,i):Ze(i)},Xe=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return st(t,n)}switch(e){case $e.bool:return et(t);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return tt(t);case $e.json:case $e.jsonb:return nt(t);case $e.timestamp:return at(t);case $e.abstime:case $e.date:case $e.daterange:case $e.int4range:case $e.int8range:case $e.money:case $e.reltime:case $e.text:case $e.time:case $e.timestamptz:case $e.timetz:case $e.tsrange:case $e.tstzrange:default:return Ze(t)}},Ze=e=>e,et=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},tt=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},nt=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},st=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch(a){s=r?r.split(","):[]}return s.map(e=>Xe(t,e))}return e},at=e=>"string"===typeof e?e.replace(" ","T"):e,rt=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class it{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Me;this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ot,lt,ct,ut;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(ot||(ot={}));class dt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dt.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=dt.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=dt.syncDiff(this.state,e,t,n),s())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const a=this.cloneDeep(e),r=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{r[e]||(o[e]=t)}),this.map(r,(e,t)=>{const n=a[e];if(n){const s=t.map(e=>e.presence_ref),a=n.map(e=>e.presence_ref),r=t.filter(e=>a.indexOf(e.presence_ref)<0),l=n.filter(e=>s.indexOf(e.presence_ref)<0);r.length>0&&(i[e]=r),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},n,s)}static syncDiff(e,t,n,s){const{joins:a,leaves:r}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(t,s)=>{var a;const r=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(s),r.length>0){const n=e[t].map(e=>e.presence_ref),s=r.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...s)}n(t,r,s)}),this.map(r,(t,n)=>{let a=e[t];if(!a)return;const r=n.map(e=>e.presence_ref);a=a.filter(e=>r.indexOf(e.presence_ref)<0),e[t]=a,s(t,a,n),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(lt||(lt={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(ct||(ct={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(ut||(ut={}));class ht{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;var s,a;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new it(this,He.join,this.params,this.timeout),this.rejoinTimer=new Ge(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=qe.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(He.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new dt(this),this.broadcastEndpointURL=rt(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(s=this.params.config)||void 0===s?void 0:s.broadcast)||void 0===a?void 0:a.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==qe.closed){const{config:{broadcast:r,presence:i,private:o}}=this.params,l=null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==s?s:[],c=!!this.bindings[ct.PRESENCE]&&this.bindings[ct.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),u={},d={broadcast:r,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(ut.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(ut.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var s;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,a=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0,r=[];for(let s=0;s<a;s++){const a=t[s],{filter:{event:i,schema:o,table:l,filter:c}}=a,u=n&&n[s];if(!u||u.event!==i||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=qe.errored,void(null===e||void 0===e||e(ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));r.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=r,void(e&&e(ut.SUBSCRIBED))}null===e||void 0===e||e(ut.SUBSCRIBED)}).receive("error",t=>{this.state=qe.errored,null===e||void 0===e||e(ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===qe.joined&&e===ct.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var s,a,r;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(r=null===(a=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===a?void 0:a.broadcast)||void 0===r?void 0:r.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:r,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=qe.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(He.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new it(this,He.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qe.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),r=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(a),r}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let s=new it(this,e,t,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,a;const r=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=He;if(n&&[i,o,l,c].indexOf(r)>=0&&n!==this._joinRef())return;let u=this._onMessage(r,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===r}).map(e=>e.callback(u,n)):null===(a=this.bindings[r])||void 0===a||a.filter(e=>{var n,s,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(r)){if("id"in e){const r=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return r&&(null===(s=t.ids)||void 0===s?void 0:s.includes(r))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const n=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===r}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:s,type:a,errors:r}=e,i={schema:t,table:n,commit_timestamp:s,eventType:a,new:{},old:{},errors:r};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===qe.closed}_isJoined(){return this.state===qe.joined}_isJoining(){return this.state===qe.joining}_isLeaving(){return this.state===qe.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const s=e.toLocaleLowerCase(),a={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&ht.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(He.close,{},e)}_onError(e){this._on(He.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Qe(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Qe(e.columns,e.old_record)),t}}const ft=()=>{},mt=25e3,pt=10,gt=100,vt=[1e3,2e3,5e3,1e4];class yt{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Me,this.transport=null,this.heartbeatIntervalMs=mt,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ft,this.ref=0,this.reconnectTimer=null,this.logger=ft,this.conn=null,this.sendBuffer=[],this.serializer=new Je,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(s=null===t||void 0===t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(Ve.websocket),this.httpEndpoint=rt(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Fe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case We.connecting:return Ke.Connecting;case We.open:return Ke.Open;case We.closing:return Ke.Closing;default:return Ke.Closed}}isConnected(){return this.connectionState()===Ke.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),s=this.getChannels().find(e=>e.topic===n);if(s)return s;{const n=new ht("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:s,ref:a}=e,r=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(a,")"),s),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(xa){this.log("error","error in heartbeat callback",xa)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},gt)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(xa){this.log("error","error in heartbeat callback",xa)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(xa){this.log("error","error in heartbeat callback",xa)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(xa){this.log("error","error in heartbeat callback",xa)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:s,ref:a}=e,r=a?"(".concat(a,")"):"",i=s.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(n," ").concat(r).trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,s,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(He.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return"".concat(e).concat(n).concat(s)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:ze};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(He.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(xa){this.log("error","error in ".concat(e," callback"),xa)}})}catch(xa){this.log("error","error triggering ".concat(e," callbacks"),xa)}}_setupReconnectionTimer(){this.reconnectTimer=new Ge(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pt)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,s,a,r,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:Me,this.heartbeatIntervalMs=null!==(s=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:mt,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(r=null===e||void 0===e?void 0:e.accessToken)&&void 0!==r?r:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:ft,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>vt[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class bt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xt(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class wt extends bt{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jt extends bt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Nt=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(xa){r(xa)}}function o(e){try{l(s.throw(e))}catch(xa){r(xa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const St=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},kt=e=>{if(Array.isArray(e))return e.map(e=>kt(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,s]=e;const a=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=kt(s)}),t};var _t=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(xa){r(xa)}}function o(e){try{l(s.throw(e))}catch(xa){r(xa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Ct=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Et=(e,t,s)=>_t(void 0,void 0,void 0,function*(){const a=yield Nt(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof a&&!(null===s||void 0===s?void 0:s.noResolveJson)?e.json().then(n=>{const s=e.status||500,a=(null===n||void 0===n?void 0:n.statusCode)||s+"";t(new wt(Ct(n),s,a))}).catch(e=>{t(new jt(Ct(e),e))}):t(new jt(Ct(e),e))}),Tt=(e,t,n,s)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(s)?(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n)):a};function Pt(e,t,n,s,a,r){return _t(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,Tt(t,s,a,r)).then(e=>{if(!e.ok)throw e;return(null===s||void 0===s?void 0:s.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Et(e,o,s))})})}function Ot(e,t,n,s){return _t(this,void 0,void 0,function*(){return Pt(e,"GET",t,n,s)})}function Rt(e,t,n,s,a){return _t(this,void 0,void 0,function*(){return Pt(e,"POST",t,s,a,n)})}function At(e,t,n,s,a){return _t(this,void 0,void 0,function*(){return Pt(e,"PUT",t,s,a,n)})}function It(e,t,n,s,a){return _t(this,void 0,void 0,function*(){return Pt(e,"DELETE",t,s,a,n)})}var Dt=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(xa){r(xa)}}function o(e){try{l(s.throw(e))}catch(xa){r(xa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class Lt{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Dt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xt(e))return{data:null,error:e};throw e}})}}var Ut=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(xa){r(xa)}}function o(e){try{l(s.throw(e))}catch(xa){r(xa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class Bt{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new Lt(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return Ut(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xt(e))return{data:null,error:e};throw e}})}}var Ft=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(xa){r(xa)}}function o(e){try{l(s.throw(e))}catch(xa){r(xa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const zt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Wt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=St(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,s){return Ft(this,void 0,void 0,function*(){try{let a;const r=Object.assign(Object.assign({},Mt),s);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(r.upsert)});const o=r.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(a=new FormData,a.append("cacheControl",r.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(a=n,a.append("cacheControl",r.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=n,i["cache-control"]="max-age=".concat(r.cacheControl),i["content-type"]=r.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===s||void 0===s?void 0:s.headers)&&(i=Object.assign(Object.assign({},i),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?At:Rt)(this.fetch,"".concat(this.url,"/object/").concat(c),a,Object.assign({headers:i},(null===r||void 0===r?void 0:r.duplex)?{duplex:r.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}upload(e,t,n){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return Ft(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),r=this._getFinalPath(a),i=new URL(this.url+"/object/upload/sign/".concat(r));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Mt.upsert},s),r=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,r["cache-control"]="max-age=".concat(t.cacheControl),r["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield At(this.fetch,i.toString(),e,{headers:r})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xt(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Ft(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(s["x-upsert"]="true");const a=yield Rt(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:s}),r=new URL(this.url+a.url),i=r.searchParams.get("token");if(!i)throw new bt("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:i},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}update(e,t,n){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Ft(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}})}copy(e,t,n){return Ft(this,void 0,void 0,function*(){try{return{data:{path:(yield Rt(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return Ft(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Rt(this.fetch,"".concat(this.url,"/object/sign/").concat(s),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const r=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return a={signedUrl:encodeURI("".concat(this.url).concat(a.signedURL).concat(r))},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return Ft(this,void 0,void 0,function*(){try{const s=yield Rt(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),a=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(a)):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}})}download(e,t){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=s?"?".concat(s):"",r=this._getFinalPath(e);return new Bt(()=>Ot(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(r).concat(a),{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return Ft(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Ot(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:kt(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}exists(e){return Ft(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,s){return _t(this,void 0,void 0,function*(){return Pt(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n)&&n instanceof jt){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],a=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&s.push(a);const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&s.push(i);let o=s.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(r,"/public/").concat(n).concat(o))}}}remove(e){return Ft(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xt(t))return{data:null,error:t};throw t}})}list(e,t,n){return Ft(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},zt),t),{prefix:e||""});return{data:yield Rt(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}})}listV2(e,t){return Ft(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Rt(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const qt={"X-Client-Info":"storage-js/".concat("2.74.0")};var Ht=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(xa){r(xa)}}function o(e){try{l(s.throw(e))}catch(xa){r(xa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class Vt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const a=new URL(e);if(null===s||void 0===s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qt),t),this.fetch=St(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ht(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ht(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xt(t))return{data:null,error:t};throw t}})}createBucket(e){return Ht(this,arguments,void 0,function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return function*(){try{return{data:yield Rt(t.fetch,"".concat(t.url,"/bucket"),{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}}()})}updateBucket(e,t){return Ht(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ht(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ht(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xt(t))return{data:null,error:t};throw t}})}}class Kt extends Vt{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new Wt(this.url,this.headers,e,this.fetch)}}let $t="";$t="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Jt={headers:{"X-Client-Info":"supabase-js-".concat($t,"/").concat("2.74.0")}},Gt={schema:"public"},Qt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Yt={};var Xt=n(630),Zt=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(xa){r(xa)}}function o(e){try{l(s.throw(e))}catch(xa){r(xa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const en=e=>{let t;return t=e||("undefined"===typeof fetch?Xt.default:fetch),function(){return t(...arguments)}},tn=(e,t,n)=>{const s=en(n),a="undefined"===typeof Headers?Xt.Headers:Headers;return(n,r)=>Zt(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null===r||void 0===r?void 0:r.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),s(n,Object.assign(Object.assign({},r),{headers:l}))})};var nn=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(xa){r(xa)}}function o(e){try{l(s.throw(e))}catch(xa){r(xa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const sn="2.74.0",an=3e4,rn=9e4,on={"X-Client-Info":"gotrue-js/".concat(sn)},ln="X-Supabase-Api-Version",cn={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},un=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class dn extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function hn(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class fn extends dn{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class mn extends dn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class pn extends dn{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class gn extends pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class vn extends pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yn extends pn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class bn extends pn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xn extends pn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wn extends pn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function jn(e){return hn(e)&&"AuthRetryableFetchError"===e.name}class Nn extends pn{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Sn extends pn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_n=" \t\n\r=".split(""),Cn=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<_n.length;t+=1)e[_n[t].charCodeAt(0)]=-2;for(let t=0;t<kn.length;t+=1)e[kn[t].charCodeAt(0)]=t;return e})();function En(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(kn[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(kn[e]),t.queuedBits-=6}}function Tn(e,t,n){const s=Cn[e];if(!(s>-1)){if(-2===s)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Pn(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},r=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,s,n)};for(let i=0;i<e.length;i+=1)Tn(e.charCodeAt(i),a,r);return t.join("")}function On(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Rn(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}On(s,t)}}function An(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Tn(e.charCodeAt(a),n,s);return new Uint8Array(t)}function In(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>En(e,n,s)),En(null,n,s),t.join("")}const Dn=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Ln={tested:!1,writable:!1},Un=()=>{if(!Dn())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(xa){return!1}if(Ln.tested)return Ln.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ln.tested=!0,Ln.writable=!0}catch(xa){Ln.tested=!0,Ln.writable=!1}return Ln.writable};const Bn=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Fn=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},zn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(s){return n}},Mn=async(e,t)=>{await e.removeItem(t)};class Wn{constructor(){this.promise=new Wn.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function qn(e){const t=e.split(".");if(3!==t.length)throw new Sn("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!un.test(t[n]))throw new Sn("JWT not in base64url format");return{header:JSON.parse(Pn(t[0])),payload:JSON.parse(Pn(t[1])),signature:An(t[2]),raw:{header:t[0],payload:t[1]}}}function Hn(e){return("0"+e.toString(16)).substr(-2)}async function Vn(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Hn).join("")}();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await Fn(e,"".concat(t,"-code-verifier"),a);const r=await Vn(s);return[r,s===r?"plain":"s256"]}Wn.promiseConstructor=Promise;const $n=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Jn=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gn(e){if(!Jn.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Qn(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function Yn(e){return JSON.parse(JSON.stringify(e))}var Xn=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const Zn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),es=[502,503,504];async function ts(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new wn(Zn(e),0);if(es.includes(e.status))throw new wn(Zn(e),e.status);let s,a;try{s=await e.json()}catch(xa){throw new mn(Zn(xa),xa)}const r=function(e){const t=e.headers.get(ln);if(!t)return null;if(!t.match($n))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(xa){return null}}(e);if(r&&r.getTime()>=cn.timestamp&&"object"===typeof s&&s&&"string"===typeof s.code?a=s.code:"object"===typeof s&&s&&"string"===typeof s.error_code&&(a=s.error_code),a){if("weak_password"===a)throw new Nn(Zn(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new gn}else if("object"===typeof s&&s&&"object"===typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Nn(Zn(s),e.status,s.weak_password.reasons);throw new fn(Zn(s),e.status||500,a)}async function ns(e,t,n,s){var a;const r=Object.assign({},null===s||void 0===s?void 0:s.headers);r[ln]||(r[ln]=cn.name),(null===s||void 0===s?void 0:s.jwt)&&(r.Authorization="Bearer ".concat(s.jwt));const i=null!==(a=null===s||void 0===s?void 0:s.query)&&void 0!==a?a:{};(null===s||void 0===s?void 0:s.redirectTo)&&(i.redirect_to=s.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,s,a,r){const i=((e,t,n,s)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))})(t,s,a,r);let o;try{o=await e(n,Object.assign({},i))}catch(xa){throw console.error(xa),new wn(Zn(xa),0)}o.ok||await ts(o);if(null===s||void 0===s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(xa){await ts(xa)}}(e,t,n+o,{headers:r,noResolveJson:null===s||void 0===s?void 0:s.noResolveJson},{},null===s||void 0===s?void 0:s.body);return(null===s||void 0===s?void 0:s.xform)?null===s||void 0===s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function ss(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function as(e){const t=ss(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function rs(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function is(e){return{data:e,error:null}}function os(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:r}=e,i=Xn(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:r},user:Object.assign({},i)},error:null}}function ls(e){return e}const cs=["global","local","others"];var us=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};class ds{constructor(e){let{url:t="",headers:n={},fetch:s}=e;this.url=t,this.headers=n,this.fetch=Bn(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cs[0];if(cs.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(cs.join(", ")));try{return await ns(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(hn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await ns(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:rs})}catch(n){if(hn(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=us(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null===n||void 0===n?void 0:n.newEmail,delete s.newEmail),await ns(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:s,headers:this.headers,xform:os,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(hn(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ns(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:rs})}catch(t){if(hn(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,a,r,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await ns(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(s=null===e||void 0===e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==a?a:""},xform:ls});if(c.error)throw c.error;const u=await c.json(),d=null!==(r=c.headers.get("x-total-count"))&&void 0!==r?r:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(hn(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Gn(e);try{return await ns(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:rs})}catch(t){if(hn(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Gn(e);try{return await ns(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:rs})}catch(n){if(hn(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Gn(e);try{return await ns(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:rs})}catch(n){if(hn(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Gn(e.userId);try{const{data:t,error:n}=await ns(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(hn(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Gn(e.userId),Gn(e.id);try{return{data:await ns(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(hn(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,s,a,r,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await ns(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(s=null===e||void 0===e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==a?a:""},xform:ls});if(c.error)throw c.error;const u=await c.json(),d=null!==(r=c.headers.get("x-total-count"))&&void 0!==r?r:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(hn(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await ns(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(hn(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await ns(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(hn(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await ns(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(hn(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await ns(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(hn(t))return{data:null,error:t};throw t}}}function hs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const fs=!!(globalThis&&Un()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class ms extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ps extends ms{}async function gs(e,t,n){fs&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),fs&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw fs&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ps('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(fs)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(xa){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",xa)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}fs&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{fs&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}function vs(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function ys(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class bs extends Error{constructor(e){let{message:t,code:n,cause:s,name:a}=e;var r;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=null!==(r=null!==a&&void 0!==a?a:s instanceof Error?s.name:void 0)&&void 0!==r?r:"Unknown Error",this.code=n}}class xs extends bs{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function ws(e){let{error:t,options:n}=e;var s,a,r;const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new bs({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(s=i.authenticatorSelection)||void 0===s?void 0:s.requireResidentKey))return new bs({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===n.mediation&&"required"===(null===(a=i.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new bs({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new bs({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new bs({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new bs({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name){return 0===i.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new bs({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new bs({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t})}if("SecurityError"===t.name){const e=window.location.hostname;if(!Ts(e))return new bs({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(i.rp.id!==e)return new bs({message:'The RP ID "'.concat(i.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new bs({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new bs({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new bs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function js(e){let{error:t,options:n}=e;const{publicKey:s}=n;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new bs({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new bs({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const e=window.location.hostname;if(!Ts(e))return new bs({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(s.rpId!==e)return new bs({message:'The RP ID "'.concat(s.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new bs({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new bs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var Ns=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const Ss=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function ks(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!==typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:s}=e,a=Ns(e,["challenge","user","excludeCredentials"]),r=An(t).buffer,i=Object.assign(Object.assign({},n),{id:An(n.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:r,user:i});if(s&&s.length>0){o.excludeCredentials=new Array(s.length);for(let e=0;e<s.length;e++){const t=s[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:An(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function _s(e){if(!e)throw new Error("Credential request options are required");if("undefined"!==typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,s=Ns(e,["challenge","allowCredentials"]),a=An(t).buffer,r=Object.assign(Object.assign({},s),{challenge:a});if(n&&n.length>0){r.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];r.allowCredentials[e]=Object.assign(Object.assign({},t),{id:An(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return r}function Cs(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:In(new Uint8Array(e.response.attestationObject)),clientDataJSON:In(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Es(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const n=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:In(new Uint8Array(a.authenticatorData)),clientDataJSON:In(new Uint8Array(a.clientDataJSON)),signature:In(new Uint8Array(a.signature)),userHandle:a.userHandle?In(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Ts(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ps(){var e,t;return!!(Dn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"===typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"===typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const Os={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Rs={userVerification:"preferred",hints:["security-key"]};function As(){const e=e=>null!==e&&"object"===typeof e&&!Array.isArray(e),t=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),n={};for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];for(const i of a)if(i)for(const s in i){const a=i[s];if(void 0!==a)if(Array.isArray(a))n[s]=a;else if(t(a))n[s]=a;else if(e(a)){const t=n[s];e(t)?n[s]=As(t,a):n[s]=As(a)}else n[s]=a}return n}class Is{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge(e,t){let{factorId:n,webauthn:s,friendlyName:a,signal:r}=e;try{const{data:e,error:i}=await this.client.mfa.challenge({factorId:n,webauthn:s});if(!e)return{data:null,error:i};const o=null!==r&&void 0!==r?r:Ss.createNewAbortSignal();if("create"===e.webauthn.type){const{user:t}=e.webauthn.credential_options.publicKey;t.name||(t.name="".concat(t.id,":").concat(a)),t.displayName||(t.displayName=t.name)}switch(e.webauthn.type){case"create":{const s=function(e,t){return As(Os,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.create),{data:a,error:r}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xs("Browser returned unexpected credential type",t)}:{data:null,error:new xs("Empty credential response",t)}}catch(t){return{data:null,error:ws({error:t,options:e})}}}({publicKey:s,signal:o});return a?{data:{factorId:n,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:r}}case"request":{const s=function(e,t){return As(Rs,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.request),{data:a,error:r}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xs("Browser returned unexpected credential type",t)}:{data:null,error:new xs("Empty credential response",t)}}catch(t){return{data:null,error:js({error:t,options:e})}}}(Object.assign(Object.assign({},e.webauthn.credential_options),{publicKey:s,signal:o}));return a?{data:{factorId:n,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:r}}}}catch(i){return hn(i)?{data:null,error:i}:{data:null,error:new mn("Unexpected error in challenge",i)}}}async _verify(e){let{challengeId:t,factorId:n,webauthn:s}=e;return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:s})}async _authenticate(e,t){let{factorId:n,webauthn:{rpId:s=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:r}}=e;if(!s)return{data:null,error:new dn("rpId is required for WebAuthn authentication")};try{if(!Ps())return{data:null,error:new mn("Browser does not support WebAuthn",null)};const{data:e,error:i}=await this.challenge({factorId:n,webauthn:{rpId:s,rpOrigins:a},signal:r},{request:t});if(!e)return{data:null,error:i};const{webauthn:o}=e;return this._verify({factorId:n,challengeId:e.challengeId,webauthn:{type:o.type,rpId:s,rpOrigins:a,credential_response:o.credential_response}})}catch(i){return hn(i)?{data:null,error:i}:{data:null,error:new mn("Unexpected error in authenticate",i)}}}async _register(e,t){let{friendlyName:n,rpId:s=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:r}=e;if(!s)return{data:null,error:new dn("rpId is required for WebAuthn registration")};try{if(!Ps())return{data:null,error:new mn("Browser does not support WebAuthn",null)};const{data:e,error:i}=await this._enroll({friendlyName:n});if(!e)return await this.client.mfa.listFactors().then(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.all.find(e=>"webauthn"===e.factor_type&&e.friendly_name===n&&"unverified"!==e.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null===e||void 0===e?void 0:e.id}):void 0),{data:null,error:i};const{data:o,error:l}=await this._challenge({factorId:e.id,friendlyName:e.friendly_name,webauthn:{rpId:s,rpOrigins:a},signal:r},{create:t});return o?this._verify({factorId:e.id,challengeId:o.challengeId,webauthn:{rpId:s,rpOrigins:a,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(i){return hn(i)?{data:null,error:i}:{data:null,error:new mn("Unexpected error in register",i)}}}}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(xa){"undefined"!==typeof self&&(self.globalThis=self)}}();const Ds={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:on,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ls(e,t,n){return await n()}const Us={};class Bs{get jwks(){var e,t;return null!==(t=null===(e=Us[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Us[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{cachedAt:e})}constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Bs.nextInstanceID,Bs.nextInstanceID+=1,this.instanceID>0&&Dn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Ds),e);if(this.logDebugMessages=!!s.debug,"function"===typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ds({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Bn(s.fetch),this.lock=s.lock||Ls,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Dn()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=gs:this.lock=Ls,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Is(this)},this.persistSession?(s.storage?this.storage=s.storage:Un()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hs(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=hs(this.memoryStorage)),Dn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(xa){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",xa)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(sn,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(xa){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Dn()&&this.detectSessionInUrl&&"none"!==n){const{data:s,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return hn(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:r,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return hn(t)?{error:t}:{error:new mn("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const a=await ns(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:ss}),{data:r,error:i}=a;if(i||!r)return{data:{user:null,session:null},error:i};const o=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(hn(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,n,s;try{let a;if("email"in e){const{email:n,password:s,options:r}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Kn(this.storage,this.storageKey)),a=await ns(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:o},xform:ss})}else{if(!("phone"in e))throw new yn("You must provide either an email or phone number and a password");{const{phone:t,password:r,options:i}=e;a=await ns(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:r,data:null!==(n=null===i||void 0===i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(s=null===i||void 0===i?void 0:i.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:ss})}}const{data:r,error:i}=a;if(i||!r)return{data:{user:null,session:null},error:i};const o=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(hn(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:s,options:a}=e;t=await ns(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:as})}else{if(!("phone"in e))throw new yn("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:a}=e;t=await ns(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:as})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s}):{data:{user:null,session:null},error:new vn}}catch(t){if(hn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}}async signInWithEthereum(e){var t,n,s,a,r,i,o,l,c,u,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:m,options:p}=e;let g;if(Dn())if("object"===typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!==typeof e.ethereum||!("request"in e.ethereum)||"function"!==typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!==typeof d||!(null===p||void 0===p?void 0:p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const v=new URL(null!==(t=null===p||void 0===p?void 0:p.url)&&void 0!==t?t:window.location.href),y=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=vs(y[0]);let x=null===(n=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!x){const e=await g.request({method:"eth_chainId"});x=parseInt(e,16)}h=function(e){var t;const{chainId:n,domain:s,expirationTime:a,issuedAt:r=new Date,nonce:i,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(n))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(n));if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(i));if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(h));if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));const f=vs(e.address),m=u?"".concat(u,"://").concat(s):s,p=e.statement?"".concat(e.statement,"\n"):"",g="".concat(m," wants you to sign in with your Ethereum account:\n").concat(f,"\n\n").concat(p);let v="URI: ".concat(d,"\nVersion: ").concat(h,"\nChain ID: ").concat(n).concat(i?"\nNonce: ".concat(i):"","\nIssued At: ").concat(r.toISOString());if(a&&(v+="\nExpiration Time: ".concat(a.toISOString())),o&&(v+="\nNot Before: ".concat(o.toISOString())),l&&(v+="\nRequest ID: ".concat(l)),c){let e="\nResources:";for(const t of c){if(!t||"string"!==typeof t)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(t));e+="\n- ".concat(t)}v+=e}return"".concat(g,"\n").concat(v)}({domain:v.host,address:b,statement:m,uri:v.href,version:"1",chainId:x,nonce:null===(s=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(r=null===(a=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==r?r:new Date,expirationTime:null===(i=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(o=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await g.request({method:"personal_sign",params:[ys(h),b]})}try{const{data:t,error:n}=await ns(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:ss});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new vn}}catch(m){if(hn(m))return{data:{user:null,session:null},error:m};throw m}}async signInWithSolana(e){var t,n,s,a,r,i,o,l,c,u,d,h;let f,m;if("message"in e)f=e.message,m=e.signature;else{const{chain:d,wallet:h,statement:p,options:g}=e;let v;if(Dn())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),p?{statement:p}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(y.host," wants you to sign in with your Solana account:"),v.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1","URI: ".concat(y.href),"Issued At: ".concat(null!==(s=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==s?s:(new Date).toISOString()),...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:n}=await ns(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:In(m)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ss});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new vn}}catch(p){if(hn(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(e){const t=await zn(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,s]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:a}=await ns(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ss});if(await Mn(this.storage,"".concat(this.storageKey,"-code-verifier")),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==s&&void 0!==s?s:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new vn}}catch(a){if(hn(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:a,nonce:r}=e,i=await ns(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:r,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:ss}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new vn}}catch(t){if(hn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,a,r;try{if("email"in e){const{email:s,options:a}=e;let r=null,i=null;"pkce"===this.flowType&&([r,i]=await Kn(this.storage,this.storageKey));const{error:o}=await ns(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:s,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(n=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:r,code_challenge_method:i},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await ns(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(s=null===n||void 0===n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(a=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(r=null===n||void 0===n?void 0:n.channel)&&void 0!==r?r:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new yn("You must provide either an email or phone number.")}catch(i){if(hn(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let s,a;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:r,error:i}=await ns(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:ss});if(i)throw i;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,l=r.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(hn(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let a=null,r=null;return"pkce"===this.flowType&&([a,r]=await Kn(this.storage,this.storageKey)),await ns(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:r}),headers:this.headers,xform:is})}catch(a){if(hn(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new gn;const{error:s}=await ns(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(hn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:s,options:a}=e,{error:r}=await ns(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:r}}if("phone"in e){const{phone:n,type:s,options:a}=e,{data:r,error:i}=await ns(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null===r||void 0===r?void 0:r.message_id},error:i}}throw new yn("You must provide either an email or phone number and a type")}catch(t){if(hn(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(xa){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(xa){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await zn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<rn;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await zn(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=Qn()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,s)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,s))})}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await ns(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:rs}):await this._useSession(async e=>{var t,n,s;const{data:a,error:r}=e;if(r)throw r;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await ns(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(s=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0,xform:rs}):{data:{user:null},error:new gn}})}catch(t){if(hn(t))return function(e){return hn(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Mn(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new gn;const r=s.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Kn(this.storage,this.storageKey));const{data:l,error:c}=await ns(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:r.access_token,xform:rs});if(c)throw c;return r.user=l.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(n){if(hn(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new gn;const t=Date.now()/1e3;let n=t,s=!0,a=null;const{payload:r}=qn(e.access_token);if(r.exp&&(n=r.exp,s=n<=t),s){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:s,error:r}=await this._getUser(e.access_token);if(r)throw r;a={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(hn(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:s,error:a}=t;if(a)throw a;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new gn;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(hn(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Dn())throw new bn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new bn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new xn("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new bn("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new xn("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:r,expires_in:i,expires_at:o,token_type:l}=e;if(!a||!i||!r||!l)throw new bn("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=an&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(u,"s"));const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:m,error:p}=await this._getUser(a);if(p)throw p;const g={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:u,expires_at:d,refresh_token:r,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(hn(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await zn(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:s,error:a}=t;if(a)return{error:a};const r=null===(n=s.session)||void 0===n?void 0:n.access_token;if(r){const{error:t}=await this.admin.signOut(r,e);if(t&&(!function(e){return hn(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Mn(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:s},error:a}=t;if(a)throw a;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(a){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,s=null;"pkce"===this.flowType&&([n,s]=await Kn(this.storage,this.storageKey,!0));try{return await ns(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(hn(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(hn(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:s}=await this._useSession(async t=>{var n,s,a,r,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await ns(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(r=o.session)||void 0===r?void 0:r.access_token)&&void 0!==i?i:void 0})});if(s)throw s;return Dn()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(hn(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:s,data:{session:a}}=t;if(s)throw s;const{options:r,provider:i,token:o,access_token:l,nonce:c}=e,u=await ns(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,jwt:null!==(n=null===a||void 0===a?void 0:a.access_token)&&void 0!==n?n:void 0,body:{provider:i,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:ss}),{data:d,error:h}=u;return h?{data:{user:null,session:null},error:h}:d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),{data:d,error:h}):{data:{user:null,session:null},error:new vn}}catch(s){if(hn(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:a,error:r}=t;if(r)throw r;return await ns(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(s=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0})})}catch(t){if(hn(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const a=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await ns(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:ss})),s=(e,t)=>{const n=200*Math.pow(2,e);return t&&jn(t)&&Date.now()+n-a<an},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await n(a);if(!s(a,null,t))return void e(t)}catch(xa){if(!s(a,xa))return void t(xa)}})()}))}catch(a){if(this._debug(t,"error",a),hn(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Dn()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await zn(this.storage,this.storageKey);if(a&&this.userStorage){let t=await zn(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await Fn(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:Qn()}else if(a&&!a.user&&!a.user){const e=await zn(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await Mn(this.storage,this.storageKey+"-user"),await Fn(this.storage,this.storageKey,a)):a.user=Qn()}if(this._debug(n,"session from storage",a),!this._isValidSession(a))return this._debug(n,"session is not valid"),void(null!==a&&await this._removeSession());const r=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<rn;if(this._debug(n,"session has".concat(r?"":" not"," expired with margin of ").concat(rn,"s")),r){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),jn(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(n,"error",a),void console.error(a)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new gn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(s,"begin");try{this.refreshingDeferred=new Wn;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new gn;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={data:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(s,"error",a),hn(a)){const e={data:null,error:a};return jn(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s="#_notifyAllSubscribers(".concat(e,")");this._debug(s,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(xa){s.push(xa)}});if(await Promise.all(a),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Fn(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=Yn(e);await Fn(this.storage,this.storageKey,s)}else{const e=Yn(t);await Fn(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Mn(this.storage,this.storageKey),await Mn(this.storage,this.storageKey+"-code-verifier"),await Mn(this.storage,this.storageKey+"-user"),this.userStorage&&await Mn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Dn()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(xa){console.error("removing visibilitychange callback failed",xa)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),an);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-e)/an);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(s," ticks, a tick lasts ").concat(an,"ms, refresh threshold is ").concat(3," ticks")),s<=3&&await this._callRefreshToken(n.refresh_token)})}catch(xa){console.error("Auto refresh tick failed with error. This is likely a transient error.",xa)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(xa){if(!(xa.isAcquireTimeout||xa instanceof ms))throw xa;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dn()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&s.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&s.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await Kn(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});s.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);s.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&s.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(s.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;return a?{data:null,error:a}:await ns(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(hn(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:a,error:r}=t;if(r)return{data:null,error:r};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await ns(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(n=null===a||void 0===a?void 0:a.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&"totp"===o.type&&(null===(s=null===o||void 0===o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(hn(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;if(a)return{data:null,error:a};const r=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Cs(e.webauthn.credential_response):Es(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:o}=await ns(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:r,headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})})}catch(t){if(hn(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;if(a)return{data:null,error:a};const r=await ns(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});if(r.error)return r;const{data:i}=r;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:ks(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:_s(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(hn(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null===t||void 0===t?void 0:t.factors)&&void 0!==e?e:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=qn(s.access_token);let i=null;r.aal&&(i=r.aal);let o=i;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:r.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:s,error:a}=await ns(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(a)throw a;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=n,t=s.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:s,payload:a,signature:r,raw:{header:i,payload:o}}=qn(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:a,header:s,signature:r},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,r,function(e){const t=[];return Rn(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new Sn("Invalid JWT signature");return{data:{claims:a,header:s,signature:r},error:null}}catch(n){if(hn(n))return{data:null,error:n};throw n}}}Bs.nextInstanceID=0;const Fs=Bs;class zs extends Fs{constructor(e){super(e)}}var Ms=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(xa){r(xa)}}function o(e){try{l(s.throw(e))}catch(xa){r(xa)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class Ws{constructor(e,t,n){var s,a,r;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(s){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o="sb-".concat(i.hostname.split(".")[0],"-auth-token"),l=function(e,t){var n,s;const{db:a,auth:r,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(s=null===o||void 0===o?void 0:o.headers)&&void 0!==s?s:{})}),accessToken:()=>nn(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:Gt,realtime:Yt,auth:Object.assign(Object.assign({},Qt),{storageKey:o}),global:Jt});this.storageKey=null!==(s=l.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(a=l.global.headers)&&void 0!==a?a:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(r=l.auth)&&void 0!==r?r:{},this.headers,l.global.fetch),this.fetch=tn(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Ae(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Kt(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Oe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Ms(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:s,persistSession:a,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:l,flowType:c,lock:u,debug:d}=e;const h={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new zs({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),t),storageKey:l,autoRefreshToken:s,persistSession:a,detectSessionInUrl:r,storage:i,userStorage:o,flowType:c,lock:u,debug:d,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new yt(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qs=((e,t,n)=>new Ws(e,t,n))("https://rzyrhnupwzppwiudfuxk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6eXJobnVwd3pwcHdpdWRmdXhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4ODA5NjksImV4cCI6MjA2NzQ1Njk2OX0.aq0cp84sxMjLPvr_8E4btcQLjhT9zZSUEPgr0bqHMUs"),Hs=["password"],Vs={async login(e,t){try{const{data:n,error:s}=await qs.from("users").select("*").eq("email",e).eq("status","active").single();if(s){if("PGRST116"===s.code)throw new Error("Invalid email or password");throw new Error("Login failed: "+s.message)}if(!n)throw new Error("Invalid email or password");if(!(t===n.password))throw new Error("Invalid email or password");await qs.from("users").update({lastlogin:(new Date).toISOString()}).eq("userid",n.userid);const{password:a}=n;return{success:!0,user:function(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(n,Hs)}}catch(n){return{success:!1,error:n.message}}},setUserSession(e){localStorage.setItem("user",JSON.stringify(e)),window.dispatchEvent(new Event("authChange"))},getUserSession(){const e=localStorage.getItem("user");return e?JSON.parse(e):null},logout(){localStorage.removeItem("user"),window.dispatchEvent(new Event("authChange"))},isAuthenticated(){return null!==this.getUserSession()}};var Ks=n(579);const $s=e=>{let{onLoginSuccess:t}=e;const[n,s]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),d=ne();return(0,Ks.jsxs)("div",{className:"login-container",children:[(0,Ks.jsx)("div",{className:"login-left",children:(0,Ks.jsxs)("div",{className:"login-branding",children:[(0,Ks.jsxs)("div",{className:"logo-section",children:[(0,Ks.jsx)("div",{className:"logo-icon",children:(0,Ks.jsx)("i",{className:"fas fa-building"})}),(0,Ks.jsxs)("div",{className:"logo-text",children:[(0,Ks.jsx)("h1",{className:"system-title",children:"Water Billing System"}),(0,Ks.jsx)("p",{className:"system-subtitle",children:"Local Government Unit"}),(0,Ks.jsx)("p",{className:"system-location",children:"Concepcion, Romblon"})]})]}),(0,Ks.jsxs)("div",{className:"login-features",children:[(0,Ks.jsxs)("div",{className:"feature-item",children:[(0,Ks.jsx)("i",{className:"fas fa-shield-alt"}),(0,Ks.jsx)("span",{children:"Secure Access"})]}),(0,Ks.jsxs)("div",{className:"feature-item",children:[(0,Ks.jsx)("i",{className:"fas fa-users"}),(0,Ks.jsx)("span",{children:"Customer Management"})]}),(0,Ks.jsxs)("div",{className:"feature-item",children:[(0,Ks.jsx)("i",{className:"fas fa-file-invoice-dollar"}),(0,Ks.jsx)("span",{children:"Billing & Payments"})]})]})]})}),(0,Ks.jsx)("div",{className:"login-right",children:(0,Ks.jsxs)("div",{className:"login-form-container",children:[(0,Ks.jsxs)("div",{className:"form-header",children:[(0,Ks.jsx)("h2",{className:"form-title",children:"Sign In"}),(0,Ks.jsx)("p",{className:"form-subtitle",children:"Access your account to continue"})]}),(0,Ks.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l(!0),u(""),!n||!r)return u("Please fill in all fields"),void l(!1);try{const e=await Vs.login(n,r);e.success?(Vs.setUserSession(e.user),t&&t(),d("/dashboard",{replace:!0})):u(e.error)}catch(s){u("An unexpected error occurred")}finally{l(!1)}},className:"professional-form",children:[c&&(0,Ks.jsxs)("div",{className:"error-message",children:[(0,Ks.jsx)("i",{className:"fas fa-exclamation-circle"}),(0,Ks.jsx)("span",{children:c}),(0,Ks.jsx)("button",{className:"error-close",onClick:()=>u(""),type:"button",children:(0,Ks.jsx)("i",{className:"fas fa-times"})})]}),(0,Ks.jsxs)("div",{className:"form-group",children:[(0,Ks.jsx)("label",{className:"form-label",children:"Email Address"}),(0,Ks.jsxs)("div",{className:"input-wrapper",children:[(0,Ks.jsx)("input",{className:"form-input",type:"email",placeholder:"Enter your email address",value:n,onChange:e=>s(e.target.value),disabled:o,required:!0}),(0,Ks.jsx)("i",{className:"fas fa-envelope input-icon"})]})]}),(0,Ks.jsxs)("div",{className:"form-group",children:[(0,Ks.jsx)("label",{className:"form-label",children:"Password"}),(0,Ks.jsxs)("div",{className:"input-wrapper",children:[(0,Ks.jsx)("input",{className:"form-input",type:"password",placeholder:"Enter your password",value:r,onChange:e=>i(e.target.value),disabled:o,required:!0}),(0,Ks.jsx)("i",{className:"fas fa-lock input-icon"})]})]}),(0,Ks.jsx)("button",{className:"login-button ".concat(o?"loading":""),type:"submit",disabled:o,children:o?(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("i",{className:"fas fa-spinner fa-spin"}),(0,Ks.jsx)("span",{children:"Signing In..."})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("i",{className:"fas fa-sign-in-alt"}),(0,Ks.jsx)("span",{children:"Sign In"})]})})]}),(0,Ks.jsx)("div",{className:"form-footer",children:(0,Ks.jsx)("p",{children:"\xa9 2024 LGU Concepcion, Romblon. All rights reserved."})})]})})]})},Js=e=>{var t;let{user:n}=e;return(0,Ks.jsxs)("div",{className:"dashboard-content",children:[(0,Ks.jsxs)("div",{className:"page-header",children:[(0,Ks.jsx)("h1",{className:"page-title",children:"Dashboard"}),(0,Ks.jsxs)("p",{className:"page-subtitle",children:["Welcome back, ",n.firstname,"! Here's your system overview."]})]}),(0,Ks.jsxs)("div",{className:"info-card",children:[(0,Ks.jsx)("div",{className:"card-header",children:(0,Ks.jsx)("h2",{className:"card-title",children:"User Information"})}),(0,Ks.jsxs)("div",{className:"card-content",children:[(0,Ks.jsxs)("div",{className:"info-grid",children:[(0,Ks.jsxs)("div",{className:"info-item",children:[(0,Ks.jsx)("label",{children:"Name"}),(0,Ks.jsxs)("span",{children:[n.firstname," ",n.lastname]})]}),(0,Ks.jsxs)("div",{className:"info-item",children:[(0,Ks.jsx)("label",{children:"Email"}),(0,Ks.jsx)("span",{children:n.email})]}),(0,Ks.jsxs)("div",{className:"info-item",children:[(0,Ks.jsx)("label",{children:"Department"}),(0,Ks.jsx)("span",{children:n.department||"Not specified"})]}),(0,Ks.jsxs)("div",{className:"info-item",children:[(0,Ks.jsx)("label",{children:"Position"}),(0,Ks.jsx)("span",{children:n.position||"Not specified"})]}),(0,Ks.jsxs)("div",{className:"info-item",children:[(0,Ks.jsx)("label",{children:"Role"}),(0,Ks.jsx)("span",{className:"status-badge ".concat(null===(t=n.role)||void 0===t?void 0:t.toLowerCase()),children:n.role||"Not specified"})]}),(0,Ks.jsxs)("div",{className:"info-item",children:[(0,Ks.jsx)("label",{children:"Status"}),(0,Ks.jsx)("span",{className:"status-badge ".concat("active"===n.status?"active":"inactive"),children:n.status})]})]}),n.lastlogin&&(0,Ks.jsxs)("div",{className:"last-login",children:[(0,Ks.jsx)("i",{className:"fas fa-clock"}),(0,Ks.jsxs)("span",{children:["Last login: ",new Date(n.lastlogin).toLocaleString()]})]})]})]}),(0,Ks.jsxs)("div",{className:"stats-grid",children:[(0,Ks.jsxs)("div",{className:"stat-card blue",children:[(0,Ks.jsx)("div",{className:"stat-icon",children:(0,Ks.jsx)("i",{className:"fas fa-users"})}),(0,Ks.jsxs)("div",{className:"stat-content",children:[(0,Ks.jsx)("div",{className:"stat-number",children:"1,234"}),(0,Ks.jsx)("div",{className:"stat-label",children:"Total Customers"})]})]}),(0,Ks.jsxs)("div",{className:"stat-card green",children:[(0,Ks.jsx)("div",{className:"stat-icon",children:(0,Ks.jsx)("i",{className:"fas fa-file-invoice-dollar"})}),(0,Ks.jsxs)("div",{className:"stat-content",children:[(0,Ks.jsx)("div",{className:"stat-number",children:"\u20b145,678"}),(0,Ks.jsx)("div",{className:"stat-label",children:"Monthly Revenue"})]})]}),(0,Ks.jsxs)("div",{className:"stat-card orange",children:[(0,Ks.jsx)("div",{className:"stat-icon",children:(0,Ks.jsx)("i",{className:"fas fa-exclamation-triangle"})}),(0,Ks.jsxs)("div",{className:"stat-content",children:[(0,Ks.jsx)("div",{className:"stat-number",children:"23"}),(0,Ks.jsx)("div",{className:"stat-label",children:"Pending Bills"})]})]}),(0,Ks.jsxs)("div",{className:"stat-card red",children:[(0,Ks.jsx)("div",{className:"stat-icon",children:(0,Ks.jsx)("i",{className:"fas fa-clock"})}),(0,Ks.jsxs)("div",{className:"stat-content",children:[(0,Ks.jsx)("div",{className:"stat-number",children:"12"}),(0,Ks.jsx)("div",{className:"stat-label",children:"Overdue Accounts"})]})]})]})]})};function Gs(e){return Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gs(e)}function Qs(e){var t=function(e,t){if("object"!=Gs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=Gs(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gs(t)?t:t+""}function Ys(e,t,n){return(t=Qs(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xs(Object(n),!0).forEach(function(t){Ys(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const ea={async testConnection(){try{console.log("Testing Supabase connection..."),console.log("Supabase URL:",qs.supabaseUrl),console.log("Auth status:",await qs.auth.getSession());const{data:e,error:t,count:n}=await qs.from("customers").select("*",{count:"exact"}).range(0,99999);return console.log("Connection test result:",{data:e,error:t,count:n}),t?(console.error("Possible RLS issue. Error details:",t),{success:!1,error:"".concat(t.message,". This might be a Row Level Security (RLS) issue. Check console for details.")}):{success:!0,message:"Connection successful! Found ".concat(n," records in database.")}}catch(e){return console.error("Connection test failed:",e),{success:!1,error:e.message}}},async getCustomers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{console.log("Fetching customers with filters:",e);let t=qs.from("customers").select("*").order("date_added",{ascending:!1});if(e.search){const n=e.search.trim();if(n){const e=/^\d+$/.test(n);console.log("Search term:",n,"Is numeric:",e),e?(console.log("Searching both name and customerid for:",n),t=t.or("name.ilike.%".concat(n,"%,customerid.eq.").concat(n))):(console.log("Searching only name for:",n),t=t.ilike("name","%".concat(n,"%")))}}e.barangay&&"all"!==e.barangay&&(console.log("Filtering by barangay (case-insensitive):",e.barangay),t=t.ilike("barangay",e.barangay)),e.type&&"all"!==e.type&&(console.log("Filtering by type (case-insensitive):",e.type),t=t.ilike("type",e.type)),e.status&&"all"!==e.status&&(console.log("Filtering by status (case-insensitive):",e.status),t=t.ilike("status",e.status));const n=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=[],s=0,a=!0;for(;a;){console.log("Fetching batch starting at ".concat(s,"..."));const{data:r,error:i}=await e.range(s,s+t-1);if(i)throw i;r&&r.length>0?(n=[...n,...r],console.log("Fetched ".concat(r.length," records, total so far: ").concat(n.length)),r.length<t?a=!1:s+=t):a=!1}return n}(t);return console.log("Successfully fetched ALL customers:",n.length,"records (truly unlimited)"),{success:!0,data:n}}catch(t){return console.error("Error in getCustomers:",t),{success:!1,error:t.message}}},async getCustomerById(e){try{const{data:t,error:n}=await qs.from("customers").select("*").eq("customerid",e).single();if(n)throw n;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},async generateCustomerId(){try{const{data:e,error:t}=await qs.from("customers").select("customerid").order("customerid",{ascending:!1}).limit(1);if(t)throw t;return{success:!0,data:(e.length>0?e[0].customerid:0)+1}}catch(e){return{success:!1,error:e.message}}},async addCustomer(e){try{const{data:t,error:n}=await qs.from("customers").insert([Zs(Zs({},e),{},{date_added:(new Date).toISOString().split("T")[0],status:e.status||"Active"})]).select();if(n)throw n;return{success:!0,data:t[0]}}catch(t){return{success:!1,error:t.message}}},async updateCustomer(e,t){try{const{data:n,error:s}=await qs.from("customers").update(t).eq("customerid",e).select();if(s)throw s;return{success:!0,data:n[0]}}catch(n){return{success:!1,error:n.message}}},async deleteCustomer(e){try{const{error:t}=await qs.from("customers").delete().eq("customerid",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:t.message}}},async updateCustomerStatus(e,t,n,s){try{const a={status:t,remarks:n||null};"Disconnected"===t?(a.disconnection_date=(new Date).toISOString().split("T")[0],a.disconnected_by=s):"Active"===t&&(a.disconnection_date=null,a.disconnected_by=null);const{data:r,error:i}=await qs.from("customers").update(a).eq("customerid",e).select();if(i)throw i;return{success:!0,data:r[0]}}catch(a){return{success:!1,error:a.message}}},async getCustomerStats(){try{let e=[],t=0;const n=1e3;let s=!0;for(;s;){const{data:a,error:r}=await qs.from("customers").select("status").range(t,t+n-1);if(r)throw r;a&&a.length>0?(e=[...e,...a],a.length<n?s=!1:t+=n):s=!1}const a={total:e.length,active:e.filter(e=>e.status&&"active"===e.status.toLowerCase()).length,disconnected:e.filter(e=>e.status&&"disconnected"===e.status.toLowerCase()).length};return console.log("Stats calculated from",e.length,"total records"),{success:!0,data:a}}catch(e){return{success:!1,error:e.message,data:[]}}},async getCustomerTypes(){try{const{data:e,error:t}=await qs.from("customer_type").select("type, rate1, rate2").order("type",{ascending:!0}).limit(1e4);if(t)throw t;return{success:!0,data:e||[]}}catch(e){return console.error("Error getting customer types:",e),{success:!1,error:e.message,data:[]}}},async getDiscounts(){try{const{data:e,error:t}=await qs.from("discount").select("type, discountpercentage").order("type",{ascending:!0}).limit(1e4);if(t)throw t;return{success:!0,data:e||[]}}catch(e){return console.error("Error getting discounts:",e),{success:!1,error:e.message,data:[]}}},exportToCSV(e){const t=[["Customer ID","Name","Type","Barangay","Discount %","Status","Date Added","Added By","Credit Balance","Disconnection Date","Disconnected By","Remarks"].join(","),...e.map(e=>[e.customerid,'"'.concat(e.name||"",'"'),'"'.concat(e.type||"",'"'),'"'.concat(e.barangay||"",'"'),e.discount||0,'"'.concat(e.status||"",'"'),e.date_added||"",'"'.concat(e.added_by||"",'"'),e.credit_balance||0,e.disconnection_date||"",'"'.concat(e.disconnected_by||"",'"'),'"'.concat(e.remarks||"",'"')].join(","))].join("\n"),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),a=URL.createObjectURL(n);s.setAttribute("href",a),s.setAttribute("download","customers_".concat((new Date).toISOString().split("T")[0],".csv")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}},ta=()=>{const[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)(!0),[r,i]=(0,a.useState)("Loading customers..."),[o,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[d,h]=(0,a.useState)("add"),[f,m]=(0,a.useState)(null),[p,g]=(0,a.useState)(!1),[v,y]=(0,a.useState)(""),[b,x]=(0,a.useState)("all"),[w,j]=(0,a.useState)("all"),[N,S]=(0,a.useState)("all"),[k,_]=(0,a.useState)("date_added"),[C,E]=(0,a.useState)("desc"),[T,P]=(0,a.useState)(1),O=50,[R,A]=(0,a.useState)({customerid:"",name:"",type:"",barangay:"",discount:0,status:"Active",remarks:""}),[I,D]=(0,a.useState)({total:0,active:0,disconnected:0}),[L,U]=(0,a.useState)([]),[B,F]=(0,a.useState)([]),[z,M]=(0,a.useState)([]),W=Vs.getUserSession(),q=()=>B.length>0?B[0].type:"",H=()=>L.length>0?L[0].barangay:"",V=()=>z.length>0?Number(z[0].discountpercentage):0;(0,a.useEffect)(()=>{K(),$(),J()},[]),(0,a.useEffect)(()=>{B.length>0&&A(e=>Zs(Zs({},e),{},{type:e.type||B[0].type}))},[B]),(0,a.useEffect)(()=>{L.length>0&&A(e=>Zs(Zs({},e),{},{barangay:e.barangay||L[0].barangay}))},[L]),(0,a.useEffect)(()=>{z.length>0&&A(e=>{var t;return Zs(Zs({},e),{},{discount:null!==(t=e.discount)&&void 0!==t?t:V()})})},[z]),(0,a.useEffect)(()=>{const e=setTimeout(()=>{P(1),K()},300);return()=>clearTimeout(e)},[v,b,w,N]);const K=async()=>{s(!0);try{const e=await ea.getCustomers({search:v,barangay:b,type:w,status:N});e.success?(t(e.data||[]),l("")):(e.error.includes("404")||e.error.includes('relation "public.customers" does not exist')?l("The customers table has not been created yet. Please create the customers table in your Supabase database."):l(e.error),t([]))}catch(e){console.error("Error loading customers:",e),l("Failed to load customers. Please check your database connection."),t([])}s(!1)},$=async()=>{try{const[e,t,n]=await Promise.all([ea.getBarangays(),ea.getCustomerTypes(),ea.getDiscounts()]);e.success?U(e.data||[]):U([]),t.success?F(t.data||[]):F([]),n.success?M((n.data||[]).map(e=>({type:e.type,discountpercentage:null!==e.discountpercentage?Number(e.discountpercentage):0}))):M([])}catch(e){console.error("Error loading filter options:",e),U([]),F([]),M([])}},J=async()=>{try{const e=await ea.getCustomerStats();e.success&&D(e.data||{total:0,active:0,disconnected:0})}catch(e){console.error("Error loading stats:",e),D({total:0,active:0,disconnected:0})}},G=async e=>{let t;e.preventDefault(),"add"===d?t=await ea.addCustomer(R):"edit"===d?t=await ea.updateCustomer(f.customerid,R):"status"===d&&(t=await ea.updateCustomerStatus(f.customerid,R.status,R.remarks,W.firstname+" "+W.lastname)),t.success?(K(),J(),$(),u(!1),m(null),Q()):l(t.error)},Q=()=>{A({customerid:"",name:"",type:q(),barangay:H(),discount:V(),status:"Active",remarks:""})},Y=e=>{k===e?E("asc"===C?"desc":"asc"):(_(e),E("asc"))},X=(0,a.useMemo)(()=>[...e].sort((e,t)=>{let n=e[k],s=t[k];return"string"===typeof n&&(n=n.toLowerCase(),s=s.toLowerCase()),"asc"===C?n>s?1:-1:n<s?1:-1}),[e,k,C]),Z=(0,a.useMemo)(()=>{const e=(T-1)*O;return X.slice(e,e+O)},[X,T,O]),ee=Math.ceil(X.length/O);return(0,Ks.jsxs)("div",{className:"customers-page",children:[(0,Ks.jsx)("div",{className:"compact-header",children:(0,Ks.jsxs)("div",{className:"header-row",children:[(0,Ks.jsxs)("div",{className:"title-section",children:[(0,Ks.jsx)("h1",{className:"page-title",children:"Customer Management"}),(0,Ks.jsxs)("div",{className:"stats-inline",children:[(0,Ks.jsxs)("span",{className:"stat-item",children:[(0,Ks.jsx)("i",{className:"fas fa-users"}),(0,Ks.jsx)("strong",{children:I.total})," Total"]}),(0,Ks.jsxs)("span",{className:"stat-item active",children:[(0,Ks.jsx)("i",{className:"fas fa-check-circle"}),(0,Ks.jsx)("strong",{children:I.active})," Active"]}),(0,Ks.jsxs)("span",{className:"stat-item disconnected",children:[(0,Ks.jsx)("i",{className:"fas fa-times-circle"}),(0,Ks.jsx)("strong",{children:I.disconnected})," Disconnected"]})]})]}),(0,Ks.jsxs)("div",{className:"header-actions",children:[(0,Ks.jsxs)("button",{className:"button is-info",onClick:()=>{ea.exportToCSV(e)},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-download"})}),(0,Ks.jsx)("span",{children:"Export"})]}),0===e.length&&!n&&(0,Ks.jsxs)("button",{className:"button is-link",onClick:async()=>{const e=[{customerid:1,name:"Juan Tolentino",type:"Residential",barangay:"Poblacion",discount:0,status:"Active",added_by:W.firstname+" "+W.lastname},{customerid:2,name:"Maria Santos",type:"Commercial",barangay:"Barangay 1",discount:5,status:"Active",added_by:W.firstname+" "+W.lastname},{customerid:3,name:"Pedro Garcia",type:"Residential",barangay:"Barangay 2",discount:0,status:"Disconnected",added_by:W.firstname+" "+W.lastname},{customerid:4,name:"Ana Cruz",type:"Residential",barangay:"Poblacion",discount:10,status:"Active",added_by:W.firstname+" "+W.lastname},{customerid:5,name:"Roberto Reyes",type:"Industrial",barangay:"Barangay 3",discount:0,status:"Active",added_by:W.firstname+" "+W.lastname}];try{for(const t of e)await ea.addCustomer(t);K(),J(),l("")}catch(t){l("Failed to create sample data: "+t.message)}},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-database"})}),(0,Ks.jsx)("span",{children:"Sample Data"})]}),(0,Ks.jsxs)("button",{className:"button is-primary",onClick:async()=>{if(!W)return void l("Your session has expired. Please log in again to add customers.");if(0===B.length)return void l("No customer types are configured. Please add customer types before creating a customer.");if(0===L.length)return void l("No barangays are configured. Please add barangays before creating a customer.");if(0===z.length)return void l("No discounts are configured. Please add discount options before creating a customer.");const e=await ea.generateCustomerId();if(!e.success)return void l(e.error||"Failed to generate a new customer ID. Please try again.");const{firstname:t="",lastname:n=""}=W,s="".concat(t," ").concat(n).trim()||"Unknown User";A({customerid:e.data,name:"",type:q(),barangay:H(),discount:V(),status:"Active",remarks:"",added_by:s}),h("add"),u(!0)},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-plus"})}),(0,Ks.jsx)("span",{children:"Add Customer"})]})]})]})}),(()=>{if(!c)return null;const e="view"===d,t="status"===d,n="add"===d,s="edit"===d,a=()=>{u(!1),m(null),Q()};return(0,Ks.jsxs)("div",{className:"modal ".concat(c?"is-active":""),children:[(0,Ks.jsx)("div",{className:"modal-background",onClick:a}),(0,Ks.jsxs)("div",{className:"modal-card",children:[(0,Ks.jsxs)("header",{className:"modal-card-head",children:[(0,Ks.jsxs)("p",{className:"modal-card-title",children:[n&&"Add Customer",s&&"Edit Customer",e&&"Customer Details",t&&"Update Customer Status"]}),(0,Ks.jsx)("button",{className:"delete","aria-label":"close",onClick:a})]}),(0,Ks.jsx)("section",{className:"modal-card-body",children:e?(0,Ks.jsxs)("div",{className:"content",children:[(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"ID:"})," ",R.customerid]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Name:"})," ",R.name]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Type:"})," ",R.type]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Barangay:"})," ",R.barangay]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Status:"})," ",R.status]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Discount:"})," ",R.discount,"%"]}),(0,Ks.jsxs)("p",{children:[(0,Ks.jsx)("strong",{children:"Remarks:"})," ",R.remarks]})]}):(0,Ks.jsxs)("form",{onSubmit:G,children:[(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Customer ID"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("input",{className:"input",type:"text",value:R.customerid,readOnly:!0})})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Name"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("input",{className:"input",type:"text",value:R.name,onChange:e=>A(Zs(Zs({},R),{},{name:e.target.value})),required:!0,disabled:t})})]}),!t&&(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Type"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsx)("select",{value:R.type,onChange:e=>A(Zs(Zs({},R),{},{type:e.target.value})),disabled:t,children:B.map(e=>(0,Ks.jsx)("option",{value:e.type,children:e.type},e.type))})})})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Barangay"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:R.barangay,onChange:e=>A(Zs(Zs({},R),{},{barangay:e.target.value})),children:[L.map(e=>(0,Ks.jsx)("option",{value:e.barangay,children:e.barangay},e.barangay)),R.barangay&&!L.some(e=>e.barangay===R.barangay)&&(0,Ks.jsx)("option",{value:R.barangay,children:R.barangay})]})})})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Discount (%)"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:R.discount,onChange:e=>A(Zs(Zs({},R),{},{discount:Number(e.target.value)})),children:[z.map(e=>(0,Ks.jsxs)("option",{value:e.discountpercentage,children:[e.type," (",e.discountpercentage,"%)"]},e.type)),"number"===typeof R.discount&&!z.some(e=>e.discountpercentage===Number(R.discount))&&(0,Ks.jsxs)("option",{value:R.discount,children:[R.discount,"%"]})]})})})]})]}),(n||s)&&(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Remarks"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("textarea",{className:"textarea",value:R.remarks,onChange:e=>A(Zs(Zs({},R),{},{remarks:e.target.value}))})})]}),t&&(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Status"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:R.status,onChange:e=>A(Zs(Zs({},R),{},{status:e.target.value})),children:[(0,Ks.jsx)("option",{value:"Active",children:"Active"}),(0,Ks.jsx)("option",{value:"Disconnected",children:"Disconnected"})]})})})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Remarks"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("textarea",{className:"textarea",value:R.remarks,onChange:e=>A(Zs(Zs({},R),{},{remarks:e.target.value})),placeholder:"Reason for status change"})})]})]}),(0,Ks.jsxs)("footer",{className:"modal-card-foot",children:[(0,Ks.jsxs)("button",{type:"submit",className:"button is-primary",children:[n&&"Save Customer",s&&"Update Customer",t&&"Update Status"]}),(0,Ks.jsx)("button",{type:"button",className:"button",onClick:a,children:"Cancel"})]})]})})]})]})})(),(0,Ks.jsxs)("div",{className:"compact-filters",children:[(0,Ks.jsx)("div",{className:"search-input",children:(0,Ks.jsxs)("div",{className:"control has-icons-left",children:[(0,Ks.jsx)("input",{className:"input",type:"text",placeholder:"Search customers...",value:v,onChange:e=>y(e.target.value)}),(0,Ks.jsx)("span",{className:"icon is-small is-left",children:(0,Ks.jsx)("i",{className:"fas fa-search"})})]})}),(0,Ks.jsxs)("div",{className:"filter-row",children:[(0,Ks.jsx)("div",{className:"filter-group",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:b,onChange:e=>x(e.target.value),children:[(0,Ks.jsx)("option",{value:"all",children:"All Barangays"}),L.map(e=>(0,Ks.jsx)("option",{value:e.barangay,children:e.barangay},e.barangay))]})})}),(0,Ks.jsx)("div",{className:"filter-group",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:w,onChange:e=>j(e.target.value),children:[(0,Ks.jsx)("option",{value:"all",children:"All Types"}),B.map(e=>(0,Ks.jsx)("option",{value:e.type,children:e.type},e.type))]})})}),(0,Ks.jsx)("div",{className:"filter-group",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:N,onChange:e=>S(e.target.value),children:[(0,Ks.jsx)("option",{value:"all",children:"All Status"}),(0,Ks.jsx)("option",{value:"Active",children:"Active"}),(0,Ks.jsx)("option",{value:"Disconnected",children:"Disconnected"})]})})})]})]}),o&&(0,Ks.jsxs)("div",{className:"notification is-warning",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>l("")}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("strong",{children:"Database Setup Required:"}),(0,Ks.jsx)("p",{children:o}),o.includes("customers table")&&(0,Ks.jsxs)("div",{className:"mt-3",children:[(0,Ks.jsx)("p",{children:(0,Ks.jsx)("strong",{children:"To fix this issue:"})}),(0,Ks.jsxs)("ol",{children:[(0,Ks.jsx)("li",{children:"Go to your Supabase Dashboard"}),(0,Ks.jsx)("li",{children:"Navigate to SQL Editor"}),(0,Ks.jsx)("li",{children:"Run the SQL provided in the console or documentation"}),(0,Ks.jsx)("li",{children:"Refresh this page"})]}),(0,Ks.jsxs)("div",{className:"buttons",children:[(0,Ks.jsxs)("button",{className:"button is-small is-info",onClick:()=>{console.log("\nCREATE TABLE public.customers (\n  customerid bigint not null,\n  name text not null,\n  type text null,\n  barangay text null,\n  discount numeric null,\n  date_added date null default CURRENT_DATE,\n  remarks text null,\n  credit_balance numeric null,\n  status text null,\n  disconnection_date date null,\n  added_by text null,\n  disconnected_by text null,\n  constraint customers_pkey primary key (customerid)\n);\n                      "),alert("SQL command copied to console. Check browser console for the CREATE TABLE statement.")},children:[(0,Ks.jsx)("i",{className:"fas fa-copy"}),"Show SQL in Console"]}),(0,Ks.jsxs)("button",{className:"button is-small is-primary",onClick:()=>{l(""),K(),J(),$()},children:[(0,Ks.jsx)("i",{className:"fas fa-sync"}),"Retry Connection"]}),(0,Ks.jsxs)("button",{className:"button is-small is-success",onClick:async()=>{const e=await ea.testConnection();e.success?alert("Connection successful! Check console for details."):alert("Connection failed: "+e.error)},children:[(0,Ks.jsx)("i",{className:"fas fa-plug"}),"Test Connection"]})]})]})]})]}),(0,Ks.jsx)("div",{className:"table-container",children:n?(0,Ks.jsxs)("div",{className:"loading-container",children:[(0,Ks.jsxs)("div",{className:"loading-message",children:[(0,Ks.jsx)("div",{className:"loading-spinner"}),(0,Ks.jsx)("h3",{className:"title is-5",children:r}),(0,Ks.jsx)("p",{className:"has-text-grey",children:"Fetching all customer records from database..."})]}),(0,Ks.jsx)("div",{className:"loading-skeleton",children:[...Array(5)].map((e,t)=>(0,Ks.jsxs)("div",{className:"skeleton-row",children:[(0,Ks.jsx)("div",{className:"skeleton-avatar"}),(0,Ks.jsx)("div",{className:"skeleton-text"}),(0,Ks.jsx)("div",{className:"skeleton-text short"}),(0,Ks.jsx)("div",{className:"skeleton-text"}),(0,Ks.jsx)("div",{className:"skeleton-badge"})]},t))})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Customer"}),(0,Ks.jsxs)("th",{onClick:()=>Y("customerid"),className:"sortable",children:["ID ","customerid"===k&&(0,Ks.jsx)("i",{className:"fas fa-sort-".concat("asc"===C?"up":"down")})]}),(0,Ks.jsxs)("th",{onClick:()=>Y("type"),className:"sortable",children:["Type ","type"===k&&(0,Ks.jsx)("i",{className:"fas fa-sort-".concat("asc"===C?"up":"down")})]}),(0,Ks.jsxs)("th",{onClick:()=>Y("barangay"),className:"sortable",children:["Barangay ","barangay"===k&&(0,Ks.jsx)("i",{className:"fas fa-sort-".concat("asc"===C?"up":"down")})]}),(0,Ks.jsxs)("th",{onClick:()=>Y("status"),className:"sortable",children:["Status ","status"===k&&(0,Ks.jsx)("i",{className:"fas fa-sort-".concat("asc"===C?"up":"down")})]}),(0,Ks.jsxs)("th",{onClick:()=>Y("date_added"),className:"sortable",children:["Date Added ","date_added"===k&&(0,Ks.jsx)("i",{className:"fas fa-sort-".concat("asc"===C?"up":"down")})]}),(0,Ks.jsx)("th",{children:"Actions"})]})}),(0,Ks.jsx)("tbody",{children:Z.length>0?Z.map(e=>{return(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("div",{className:"customer-info",children:[(0,Ks.jsx)("div",{className:"customer-avatar",children:(t=e.name,t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))}),(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("div",{className:"customer-name",children:e.name}),(0,Ks.jsx)("div",{className:"customer-discount",children:e.discount>0&&"".concat(e.discount,"% discount")})]})]})}),(0,Ks.jsx)("td",{children:e.customerid}),(0,Ks.jsx)("td",{children:e.type}),(0,Ks.jsx)("td",{children:e.barangay}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag ".concat(e.status&&"active"===e.status.toLowerCase()?"is-success":"is-danger"),children:e.status})}),(0,Ks.jsx)("td",{children:new Date(e.date_added).toLocaleDateString()}),(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("div",{className:"buttons are-small",children:[(0,Ks.jsx)("button",{className:"button is-info is-small",onClick:()=>(e=>{m(e),h("view"),u(!0)})(e),title:"View Customer",children:(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-eye"})})}),(0,Ks.jsx)("button",{className:"button is-link is-small",onClick:()=>(e=>{A(e),m(e),h("edit"),u(!0)})(e),title:"Edit Customer",children:(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-edit"})})}),(0,Ks.jsx)("button",{className:"button is-warning is-small",onClick:()=>(e=>{m(e),A(Zs(Zs({},e),{},{remarks:""})),h("status"),u(!0)})(e),title:"Change Status",children:(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-power-off"})})}),(0,Ks.jsx)("button",{className:"button is-danger is-small",onClick:()=>(e=>{m(e),g(!0)})(e),title:"Delete Customer",children:(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-trash"})})})]})})]},e.customerid);var t}):(0,Ks.jsx)("tr",{children:(0,Ks.jsx)("td",{colSpan:"7",className:"has-text-centered",style:{padding:"3rem"},children:(0,Ks.jsxs)("div",{className:"empty-state",children:[(0,Ks.jsx)("i",{className:"fas fa-users fa-3x has-text-grey-light"}),(0,Ks.jsx)("h3",{className:"title is-5 has-text-grey mt-4",children:"No customers found"}),(0,Ks.jsx)("p",{className:"has-text-grey",children:o?"Please check the error message above.":v||"all"!==b||"all"!==w||"all"!==N?"Try adjusting your search or filters.":"Start by adding your first customer."})]})})})})]}),ee>1&&(0,Ks.jsxs)("div",{className:"pagination-container",children:[(0,Ks.jsxs)("div",{className:"pagination-info",children:[(0,Ks.jsxs)("span",{children:["Showing ",(T-1)*O+1," to ",Math.min(T*O,X.length)," of ",X.length," customers"]}),ee>5&&(0,Ks.jsxs)("div",{className:"page-jump",children:[(0,Ks.jsx)("span",{children:"Go to page:"}),(0,Ks.jsx)("input",{type:"number",min:"1",max:ee,value:T,onChange:e=>{const t=parseInt(e.target.value);t>=1&&t<=ee&&P(t)},className:"page-input"}),(0,Ks.jsxs)("span",{children:["of ",ee]})]})]}),(0,Ks.jsxs)("nav",{className:"pagination is-centered",role:"navigation",children:[(0,Ks.jsxs)("button",{className:"pagination-previous",disabled:1===T,onClick:()=>P(T-1),children:[(0,Ks.jsx)("i",{className:"fas fa-chevron-left"}),"Previous"]}),(0,Ks.jsxs)("button",{className:"pagination-next",disabled:T===ee,onClick:()=>P(T+1),children:["Next",(0,Ks.jsx)("i",{className:"fas fa-chevron-right"})]}),(0,Ks.jsxs)("ul",{className:"pagination-list",children:[T>3&&(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("li",{children:(0,Ks.jsx)("button",{className:"pagination-link",onClick:()=>P(1),children:"1"})}),T>4&&(0,Ks.jsx)("li",{children:(0,Ks.jsx)("span",{className:"pagination-ellipsis",children:"\u2026"})})]}),[...Array(ee)].map((e,t)=>{const n=t+1;return n===T||n>=T-2&&n<=T+2||T<=3&&n<=5||T>=ee-2&&n>=ee-4?(0,Ks.jsx)("li",{children:(0,Ks.jsx)("button",{className:"pagination-link ".concat(T===n?"is-current":""),onClick:()=>P(n),children:n})},t):null}),T<ee-2&&(0,Ks.jsxs)(Ks.Fragment,{children:[T<ee-3&&(0,Ks.jsx)("li",{children:(0,Ks.jsx)("span",{className:"pagination-ellipsis",children:"\u2026"})}),(0,Ks.jsx)("li",{children:(0,Ks.jsx)("button",{className:"pagination-link",onClick:()=>P(ee),children:ee})})]})]})]})]})]})})]})},na={async getBills(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"billedmonth",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{const a=(e-1)*t,r=a+t-1,{data:i,error:o,count:l}=await qs.from("bills").select("*",{count:"exact"}).order(n,{ascending:s}).range(a,r);if(o)throw o;const c=[...new Set(i.map(e=>e.customerid).filter(e=>e))],{data:u}=await qs.from("customers").select("customerid, name, type, barangay").in("customerid",c).limit(1e4),d={};u&&u.forEach(e=>{d[e.customerid]=e});return{success:!0,data:i.map(e=>Zs(Zs({},e),{},{customers:d[e.customerid]||null})),count:l}}catch(a){return console.error("Error getting bills:",a),{success:!1,error:a.message,data:[],count:0}}},async getCustomerTypes(){try{const{data:e,error:t}=await qs.from("customer_type").select("type, rate1, rate2").order("type",{ascending:!0}).limit(1e4);if(t)throw t;return{success:!0,data:e||[]}}catch(e){return console.error("Error getting customer types:",e),{success:!1,error:e.message,data:[]}}},async getLastBill(e){try{const{data:t,error:n}=await qs.from("bills").select("*").eq("customerid",e).order("billedmonth",{ascending:!1}).limit(1).single();if(n&&"PGRST116"!==n.code)throw n;return{success:!0,data:t||null}}catch(t){return console.error("Error getting last bill:",t),{success:!1,error:t.message,data:null}}},async checkDuplicateBill(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{let s=qs.from("bills").select("billid").eq("customerid",e).eq("billedmonth",t);n&&(s=s.neq("billid",n));const{data:a,error:r}=await s;if(r)throw r;return{success:!0,exists:a&&a.length>0}}catch(s){return console.error("Error checking duplicate bill:",s),{success:!1,error:s.message,exists:!1}}},async checkBillIdExists(e){try{const{data:t,error:n}=await qs.from("bills").select("billid").eq("billid",e).maybeSingle();if(n)throw n;return{success:!0,data:{exists:null!==t}}}catch(t){return console.error("Error checking bill ID exists:",t),{success:!1,error:t.message,data:{exists:!1}}}},calculateBasicAmount(e,t){if(!t)return 0;const n=parseFloat(t.rate1||0),s=parseFloat(t.rate2||0);let a=0;return a=0===e?n:e<=3?e*n:3*n+(e-3)*s,parseFloat(a.toFixed(2))},calculateDiscountAmount:(e,t)=>!t||t<=0?0:e*t/100,async addBill(e){try{const{data:t,error:n}=await qs.from("bills").insert([e]).select().single();if(n)throw n;return{success:!0,data:t}}catch(t){return console.error("Error adding bill:",t),{success:!1,error:t.message}}},async updateBill(e,t){try{const{data:n,error:s}=await qs.from("bills").update(t).eq("billid",e).select().single();if(s)throw s;return{success:!0,data:n}}catch(n){return console.error("Error updating bill:",n),{success:!1,error:n.message}}},async deleteBill(e){try{const{error:t}=await qs.from("bills").delete().eq("billid",e);if(t)throw t;return{success:!0}}catch(t){return console.error("Error deleting bill:",t),{success:!1,error:t.message}}},async getCustomerBills(e){try{const{data:t,error:n}=await qs.from("bills").select("*").eq("customerid",e).order("billedmonth",{ascending:!1}).limit(1e4);if(n)throw n;return{success:!0,data:t||[]}}catch(t){return console.error("Error getting customer bills:",t),{success:!1,error:t.message,data:[]}}},async getEncodingStats(e){try{let t=[],n=0;const s=1e3;let a=!0;for(;a;){const{data:e,error:r}=await qs.from("customers").select("customerid, name, barangay, type, status").order("barangay",{ascending:!0}).range(n,n+s-1);if(r)throw r;e&&e.length>0?(t=[...t,...e],e.length<s?a=!1:n+=s):a=!1}let r=[];for(n=0,a=!0;a;){const{data:t,error:i}=await qs.from("bills").select("customerid").eq("billedmonth",e).range(n,n+s-1);if(i)throw i;t&&t.length>0?(r=[...r,...t],t.length<s?a=!1:n+=s):a=!1}const i=new Set(r.map(e=>e.customerid));console.log("Encoding Stats: Fetched ".concat(t.length," total customers and ").concat(r.length," bills for ").concat(e));const o={};return t.forEach(e=>{const t=e.barangay||"Unknown";o[t]||(o[t]={barangay:t,totalCustomers:0,encodedCount:0,allCustomers:[],notEncodedCustomers:[]});const n={customerid:e.customerid,name:e.name,type:e.type,status:e.status,isEncoded:i.has(e.customerid)};o[t].allCustomers.push(n),o[t].totalCustomers++,i.has(e.customerid)?o[t].encodedCount++:o[t].notEncodedCustomers.push({customerid:e.customerid,name:e.name,type:e.type,status:e.status})}),{success:!0,data:Object.values(o).sort((e,t)=>e.barangay.localeCompare(t.barangay))}}catch(t){return console.error("Error getting encoding stats:",t),{success:!1,error:t.message,data:[]}}},exportToCSV(e){const t=e.map(e=>{var t,n;return[e.billid,e.customerid,(null===(t=e.customers)||void 0===t?void 0:t.name)||"",(null===(n=e.customers)||void 0===n?void 0:n.barangay)||"",e.billedmonth,e.previousreading||0,e.currentreading||0,e.consumption||0,e.basicamount||0,e.surchargeamount||0,e.discountamount||0,e.totalbillamount||0,e.paymentstatus||""]});return[["Bill ID","Customer ID","Customer Name","Barangay","Billed Month","Previous Reading","Current Reading","Consumption","Basic Amount","Surcharge","Discount","Total Bill","Payment Status"].join(","),...t.map(e=>e.join(","))].join("\n")}},sa={async searchCustomers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=qs.from("customers").select("*").order("name",{ascending:!0});if(e){n=/^\d+$/.test(e.trim())?n.or("customerid.eq.".concat(e,",name.ilike.%").concat(e,"%")):n.ilike("name","%".concat(e,"%"))}t.barangay&&(n=n.eq("barangay",t.barangay)),t.type&&(n=n.eq("type",t.type)),t.status&&(n=n.eq("status",t.status)),n=n.limit(1e4);const{data:s,error:a}=await n;if(a)throw a;return{success:!0,data:s}}catch(n){return console.error("Error searching customers:",n),{success:!1,error:n.message}}},async getBarangays(){try{const{data:e,error:t}=await qs.from("barangays").select("*").order("barangay",{ascending:!0}).limit(1e4);if(t)throw t;return{success:!0,data:e||[]}}catch(e){return console.error("Error getting barangays:",e),{success:!1,error:e.message,data:[]}}},async getCustomerDetails(e){try{const{data:t,error:n}=await qs.from("customers").select("*").eq("customerid",e).single();if(n)throw n;return{success:!0,data:t}}catch(t){return console.error("Error getting customer details:",t),{success:!1,error:t.message}}},async getCustomerDetails(e){try{const{data:t,error:n}=await qs.from("customers").select("customerid, name, barangay, type, status, credit_balance, discount").eq("customerid",e).single();if(n)throw n;return{success:!0,data:t}}catch(t){return console.error("Error getting customer details:",t),{success:!1,error:t.message}}},async getUnpaidBills(e){try{const{data:t,error:n}=await qs.from("bills").select("*").eq("customerid",e).or("paymentstatus.eq.Unpaid,paymentstatus.eq.Partial").order("billedmonth",{ascending:!0});if(n)throw n;return{success:!0,data:t||[]}}catch(t){return console.error("Error getting unpaid bills:",t),{success:!1,error:t.message}}},async getPaymentHistory(e){try{const{data:t,error:n}=await qs.from("bills").select("*").eq("customerid",e).eq("paymentstatus","Paid").order("billedmonth",{ascending:!1}).limit(10);if(n)throw n;return{success:!0,data:t||[]}}catch(t){return console.error("Error getting payment history:",t),{success:!1,error:t.message}}},async getSurchargeSettings(){try{const{data:e,error:t}=await qs.from("surcharge_settings").select("*").limit(1).single();if(t)throw t;return{success:!0,data:e}}catch(e){return console.error("Error getting surcharge settings:",e),{success:!0,data:{due_day:10,first_surcharge_percent:10,second_surcharge_percent:15}}}},calculateSurcharge(e,t){if(!e||!e.billedmonth||!e.basicamount)return{surchargeAmount:0,firstSurcharge:0,secondSurcharge:0,daysOverdue:0,surchargeType:null};const n=new Date,s=new Date(e.billedmonth),a=new Date(s.getFullYear(),s.getMonth()+1,t.due_day),r=Math.floor((n-a)/864e5);if(r<=0)return{surchargeAmount:0,firstSurcharge:0,secondSurcharge:0,daysOverdue:0,surchargeType:null,dueDate:a};const i=parseFloat(e.basicamount),o=new Date(a.getFullYear(),a.getMonth()+1,0),l=n>o;let c=0,u=0,d=null;if(r>=1&&(c=i*t.first_surcharge_percent/100,d="first"),l){u=(i+c)*t.second_surcharge_percent/100,d="both"}const h=c+u;return{surchargeAmount:Math.round(100*h)/100,firstSurcharge:Math.round(100*c)/100,secondSurcharge:Math.round(100*u)/100,daysOverdue:r,surchargeType:d,dueDate:a,endOfDueMonth:o,firstSurchargePercent:t.first_surcharge_percent,secondSurchargePercent:t.second_surcharge_percent}},calculateTotalWithSurcharge(e,t){const n=parseFloat(e.basicamount||0),s=parseFloat(e.discountamount||0),a=parseFloat(e.surchargeamount||0);return n+(t?t.surchargeAmount:a)-s},async processPayment(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;try{const s=e.map(e=>qs.from("bills").update({paymentstatus:"Paid",paidby:t,datepaid:(new Date).toISOString(),basicamount:e.basicamount||0,surchargeamount:e.surchargeamount||0,discountamount:e.discountamount||0,totalbillamount:e.totalbillamount||0,advancepaymentamount:e.advancepaymentamount||0}).eq("billid",e.billid)),a=await Promise.all(s);if(a.some(e=>e.error))throw new Error("Some bills failed to update");if(0!==n&&e.length>0){const{data:t,error:s}=await qs.from("bills").select("customerid").eq("billid",e[0].billid).single();if(!s&&t){const{data:e,error:s}=await qs.from("customers").select("credit_balance").eq("customerid",t.customerid).single();if(!s&&e){const s=parseFloat(e.credit_balance||0)+n;await qs.from("customers").update({credit_balance:s}).eq("customerid",t.customerid)}}}return{success:!0,data:{paidCount:e.length,creditApplied:n}}}catch(s){return console.error("Error processing payment:",s),{success:!1,error:s.message}}},async getPaymentStats(){try{const e=new Date;e.setHours(0,0,0,0);const t=new Date;t.setDate(1),t.setHours(0,0,0,0);const{data:n,error:s}=await qs.from("bills").select("totalbillamount").eq("paymentstatus","Paid").gte("datepaid",e.toISOString()),{data:a,error:r}=await qs.from("bills").select("totalbillamount").eq("paymentstatus","Paid").gte("datepaid",t.toISOString());if(s||r)throw new Error("Error fetching statistics");const i=n.reduce((e,t)=>e+parseFloat(t.totalbillamount||0),0),o=a.reduce((e,t)=>e+parseFloat(t.totalbillamount||0),0);return{success:!0,data:{todayCollection:i,todayCount:n.length,monthCollection:o,monthCount:a.length}}}catch(e){return console.error("Error getting payment stats:",e),{success:!1,error:e.message}}},async getRecentPayments(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{const{data:t,error:n}=await qs.from("bills").select("*").eq("paymentstatus","Paid").not("datepaid","is",null).order("datepaid",{ascending:!1}).limit(e);if(n)throw n;const s=[...new Set(t.map(e=>e.customerid))],{data:a,error:r}=await qs.from("customers").select("customerid, name, type, barangay").in("customerid",s).limit(1e4);if(r)throw r;return{success:!0,data:t.map(e=>Zs(Zs({},e),{},{customer:a.find(t=>t.customerid===e.customerid)}))}}catch(t){return console.error("Error getting recent payments:",t),{success:!1,error:t.message,data:[]}}},async markBillAsUnpaid(e){try{const{data:t,error:n}=await qs.from("bills").select("customerid, advancepaymentamount").eq("billid",e).single();if(n)throw n;if(t.advancepaymentamount&&parseFloat(t.advancepaymentamount)>0){const e=parseFloat(t.advancepaymentamount),{data:n,error:s}=await qs.from("customers").select("credit_balance").eq("customerid",t.customerid).single();if(!s&&n){const s=parseFloat(n.credit_balance||0)+e;await qs.from("customers").update({credit_balance:s}).eq("customerid",t.customerid)}}const{error:s}=await qs.from("bills").update({paymentstatus:"Unpaid",paidby:null,datepaid:null,advancepaymentamount:null}).eq("billid",e);if(s)throw s;return{success:!0,message:"Bill marked as unpaid successfully"}}catch(t){return console.error("Error marking bill as unpaid:",t),{success:!1,error:t.message}}}},aa=e=>{let{isOpen:t,onClose:n,mode:s,bill:r,preSelectedCustomer:i,onSuccess:o,customerTypes:l,surchargeSettings:c}=e;const[u,d]=(0,a.useState)(!1),[h,f]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[g,v]=(0,a.useState)([]),[y,b]=(0,a.useState)(null),[x,w]=(0,a.useState)(null),[j,N]=(0,a.useState)([]),[S,k]=(0,a.useState)(!1),[_,C]=(0,a.useState)(null),[E,T]=(0,a.useState)({customerid:"",billedmonth:"",previousreading:0,currentreading:0,consumption:0,basicamount:0});(0,a.useEffect)(()=>{t&&("edit"===s&&r?P():"add"===s&&i?O():R())},[t,s,r,i]);const P=async()=>{var e,t,n,s;const a={customerid:r.customerid,name:(null===(e=r.customers)||void 0===e?void 0:e.name)||"",type:(null===(t=r.customers)||void 0===t?void 0:t.type)||"",barangay:(null===(n=r.customers)||void 0===n?void 0:n.barangay)||"",discount:(null===(s=r.customers)||void 0===s?void 0:s.discount)||0};b(a),T({customerid:r.customerid,billedmonth:r.billedmonth.substring(0,7),previousreading:r.previousreading,currentreading:r.currentreading,consumption:r.consumption,basicamount:r.basicamount});const i=await na.getCustomerBills(r.customerid);i.success&&N(i.data)},O=async()=>{await D(i)},R=()=>{b(null),v([]),p(""),w(null),N([]),f(""),T({customerid:"",billedmonth:A(),previousreading:0,currentreading:0,consumption:0,basicamount:0})},A=()=>{const e=new Date;return"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"))},I=async()=>{if(!m.trim())return void f("Please enter customer name or ID");d(!0),f("");const e=await sa.searchCustomers(m);e.success?(v(e.data),0===e.data.length&&f("No customers found")):f(e.error),d(!1)},D=async e=>{var t;b(e),v([]),p("");const n=await na.getLastBill(e.customerid);n.success&&n.data?(w(n.data),T(e=>Zs(Zs({},e),{},{previousreading:n.data.currentreading||0}))):(w(null),T(e=>Zs(Zs({},e),{},{previousreading:0})));const s=await na.getCustomerBills(e.customerid);s.success&&N(s.data);const a=L(null===(t=n.data)||void 0===t?void 0:t.billedmonth);T(t=>Zs(Zs({},t),{},{customerid:e.customerid,billedmonth:a}))},L=e=>{if(!e)return A();const t=e.substring(0,7),n=new Date(t+"-01");return n.setMonth(n.getMonth()+1),"".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"))},U=(e,t)=>{const n=Zs(Zs({},E),{},{[e]:t});if("previousreading"===e||"currentreading"===e){const s=parseFloat("previousreading"===e?t:n.previousreading)||0,a=parseFloat("currentreading"===e?t:n.currentreading)||0;n.consumption=Math.max(0,a-s)}if("consumption"===e||"previousreading"===e||"currentreading"===e){const e=l.find(e=>e.type===(null===y||void 0===y?void 0:y.type));e&&n.consumption>=0&&(n.basicamount=na.calculateBasicAmount(n.consumption,e))}T(n)},B=e=>"\u20b1".concat(parseFloat(e||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})),F=e=>e?new Date(e).toLocaleDateString("en-PH",{year:"numeric",month:"long"}):"N/A";return t?(0,Ks.jsxs)("div",{className:"modal is-active",children:[(0,Ks.jsx)("div",{className:"modal-background",onClick:n}),(0,Ks.jsxs)("div",{className:"modal-card",style:{width:"90vw",maxWidth:"1000px"},children:[(0,Ks.jsxs)("header",{className:"modal-card-head",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[(0,Ks.jsxs)("p",{className:"modal-card-title",style:{color:"white",fontSize:"1.25rem",fontWeight:"600"},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-file-invoice-dollar"})}),(0,Ks.jsx)("span",{children:"add"===s?"Add New Bill":"Edit Bill"})]}),(0,Ks.jsx)("button",{className:"delete",onClick:n})]}),(0,Ks.jsxs)("section",{className:"modal-card-body",style:{maxHeight:"75vh",overflowY:"auto",padding:"1.5rem"},children:[h&&(0,Ks.jsxs)("div",{className:"notification is-danger",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>f("")}),h]}),!y&&"add"===s&&(0,Ks.jsxs)("div",{className:"box",children:[(0,Ks.jsx)("h3",{className:"title is-5",children:"Select Customer"}),(0,Ks.jsxs)("div",{className:"field has-addons",children:[(0,Ks.jsx)("div",{className:"control is-expanded",children:(0,Ks.jsx)("input",{className:"input",type:"text",placeholder:"Search by customer name or ID...",value:m,onChange:e=>p(e.target.value),onKeyPress:e=>"Enter"===e.key&&I()})}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("button",{className:"button is-primary ".concat(u?"is-loading":""),onClick:I,children:"Search"})})]}),g.length>0&&(0,Ks.jsx)("div",{className:"table-container mt-3",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"ID"}),(0,Ks.jsx)("th",{children:"Name"}),(0,Ks.jsx)("th",{children:"Type"}),(0,Ks.jsx)("th",{children:"Barangay"}),(0,Ks.jsx)("th",{children:"Action"})]})}),(0,Ks.jsx)("tbody",{children:g.map(e=>(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{children:e.customerid}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("strong",{children:e.name})}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag is-info",children:e.type})}),(0,Ks.jsx)("td",{children:e.barangay}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("button",{className:"button is-small is-primary",onClick:()=>D(e),children:"Select"})})]},e.customerid))})]})})]}),y&&(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)",border:"1px solid #e0e0e0",borderRadius:"8px",padding:"1.25rem",marginBottom:"1.5rem"},children:[(0,Ks.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:[(0,Ks.jsx)("span",{className:"icon has-text-primary",style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:(0,Ks.jsx)("i",{className:"fas fa-user-circle"})}),(0,Ks.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",margin:0},children:"Customer Information"})]}),(0,Ks.jsxs)("div",{className:"columns is-multiline is-mobile",style:{marginBottom:"0"},children:[(0,Ks.jsxs)("div",{className:"column is-3",children:[(0,Ks.jsx)("p",{style:{fontSize:"0.75rem",color:"#7a7a7a",marginBottom:"0.25rem",textTransform:"uppercase",fontWeight:"600"},children:"ID"}),(0,Ks.jsx)("p",{style:{fontSize:"1rem",fontWeight:"600",color:"#363636"},children:y.customerid})]}),(0,Ks.jsxs)("div",{className:"column is-3",children:[(0,Ks.jsx)("p",{style:{fontSize:"0.75rem",color:"#7a7a7a",marginBottom:"0.25rem",textTransform:"uppercase",fontWeight:"600"},children:"Name"}),(0,Ks.jsx)("p",{style:{fontSize:"1rem",fontWeight:"600",color:"#363636"},children:y.name})]}),(0,Ks.jsxs)("div",{className:"column is-3",children:[(0,Ks.jsx)("p",{style:{fontSize:"0.75rem",color:"#7a7a7a",marginBottom:"0.25rem",textTransform:"uppercase",fontWeight:"600"},children:"Type"}),(0,Ks.jsx)("span",{className:"tag is-info is-light",style:{fontWeight:"600"},children:y.type})]}),(0,Ks.jsxs)("div",{className:"column is-3",children:[(0,Ks.jsx)("p",{style:{fontSize:"0.75rem",color:"#7a7a7a",marginBottom:"0.25rem",textTransform:"uppercase",fontWeight:"600"},children:"Barangay"}),(0,Ks.jsx)("p",{style:{fontSize:"1rem",fontWeight:"600",color:"#363636"},children:y.barangay})]}),x&&(0,Ks.jsx)("div",{className:"column is-full",children:(0,Ks.jsxs)("div",{style:{background:"#fff",padding:"0.75rem",borderRadius:"6px",border:"1px solid #e0e0e0",marginTop:"0.5rem"},children:[(0,Ks.jsxs)("p",{style:{fontSize:"0.75rem",color:"#7a7a7a",marginBottom:"0.25rem",textTransform:"uppercase",fontWeight:"600"},children:[(0,Ks.jsx)("i",{className:"fas fa-history"})," Last Reading"]}),(0,Ks.jsxs)("p",{style:{fontSize:"1rem",fontWeight:"600",color:"#3273dc"},children:[x.currentreading," cu.m ",(0,Ks.jsxs)("span",{style:{color:"#7a7a7a",fontWeight:"400"},children:["(",F(x.billedmonth),")"]})]})]})})]})]}),(0,Ks.jsxs)("div",{style:{background:"white",border:"1px solid #e0e0e0",borderRadius:"8px",padding:"1.25rem",marginBottom:"1.5rem"},children:[(0,Ks.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"1.25rem"},children:[(0,Ks.jsx)("span",{className:"icon has-text-link",style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:(0,Ks.jsx)("i",{className:"fas fa-file-invoice"})}),(0,Ks.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",margin:0},children:"Bill Details"})]}),(0,Ks.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,Ks.jsxs)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#363636",marginBottom:"0.5rem"},children:[(0,Ks.jsx)("i",{className:"fas fa-calendar-alt",style:{marginRight:"0.5rem",color:"#667eea"}}),"Billing Month *"]}),(0,Ks.jsx)("input",{className:"input",type:"month",value:E.billedmonth,onChange:e=>U("billedmonth",e.target.value),disabled:"edit"===s,style:{fontSize:"1rem",borderRadius:"6px",borderColor:"#e0e0e0"}}),(0,Ks.jsx)("p",{className:"help",style:{fontSize:"0.75rem",color:"#7a7a7a",marginTop:"0.25rem"},children:"Select month and year for billing"})]}),(0,Ks.jsxs)("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[(0,Ks.jsxs)("p",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#4b5563",marginBottom:"0.75rem"},children:[(0,Ks.jsx)("i",{className:"fas fa-tachometer-alt",style:{marginRight:"0.5rem"}}),"Meter Readings & Amount"]}),(0,Ks.jsxs)("div",{className:"columns",style:{marginBottom:"0"},children:[(0,Ks.jsxs)("div",{className:"column is-3",children:[(0,Ks.jsx)("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280",marginBottom:"0.5rem"},children:"Previous Reading *"}),(0,Ks.jsx)("input",{className:"input",type:"number",step:"0.01",value:E.previousreading,onChange:e=>U("previousreading",e.target.value),style:{borderRadius:"6px",fontSize:"1rem",fontWeight:"500"}}),x&&(0,Ks.jsxs)("p",{className:"help is-info",style:{fontSize:"0.7rem",marginTop:"0.25rem"},children:[(0,Ks.jsx)("i",{className:"fas fa-info-circle"})," Last: ",x.currentreading," cu.m"]})]}),(0,Ks.jsxs)("div",{className:"column is-3",children:[(0,Ks.jsx)("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280",marginBottom:"0.5rem"},children:"Current Reading *"}),(0,Ks.jsx)("input",{className:"input",type:"number",step:"0.01",value:E.currentreading,onChange:e=>U("currentreading",e.target.value),style:{borderRadius:"6px",fontSize:"1rem",fontWeight:"500"}})]}),(0,Ks.jsxs)("div",{className:"column is-3",children:[(0,Ks.jsx)("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280",marginBottom:"0.5rem"},children:"Consumption"}),(0,Ks.jsx)("input",{className:"input",type:"number",step:"0.01",value:E.consumption,readOnly:!0,style:{borderRadius:"6px",fontSize:"1rem",fontWeight:"700",background:"#fff",color:"#667eea",borderColor:"#667eea"}}),(0,Ks.jsx)("p",{className:"help",style:{fontSize:"0.7rem",color:"#9ca3af",marginTop:"0.25rem"},children:"Auto-calculated"})]}),(0,Ks.jsxs)("div",{className:"column is-3",children:[(0,Ks.jsxs)("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280",marginBottom:"0.5rem"},children:[(0,Ks.jsx)("i",{className:"fas fa-coins",style:{marginRight:"0.25rem"}}),"Basic Amount"]}),(0,Ks.jsx)("input",{className:"input",type:"number",step:"0.01",value:E.basicamount,readOnly:!0,style:{borderRadius:"6px",fontSize:"1rem",fontWeight:"700",background:"#fff",color:"#667eea",borderColor:"#667eea"}}),(0,Ks.jsx)("p",{className:"help",style:{fontSize:"0.7rem",color:"#9ca3af",marginTop:"0.25rem"},children:"Auto-calculated"})]})]})]})]}),j.length>0&&(0,Ks.jsxs)("div",{style:{background:"white",border:"1px solid #e0e0e0",borderRadius:"8px",padding:"1.25rem"},children:[(0,Ks.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:[(0,Ks.jsx)("span",{className:"icon has-text-info",style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:(0,Ks.jsx)("i",{className:"fas fa-history"})}),(0,Ks.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",margin:0},children:"Recent Billing History"})]}),(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-narrow is-striped is-hoverable",style:{fontSize:"0.9rem"},children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Month"}),(0,Ks.jsx)("th",{children:"Reading"}),(0,Ks.jsx)("th",{children:"Consumption"}),(0,Ks.jsx)("th",{children:"Basic Amount"}),(0,Ks.jsx)("th",{children:"Status"}),(0,Ks.jsx)("th",{width:"120",children:"Actions"})]})}),(0,Ks.jsx)("tbody",{children:j.slice(0,5).map(e=>(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{children:F(e.billedmonth)}),(0,Ks.jsxs)("td",{children:[e.previousreading," \u2192 ",e.currentreading]}),(0,Ks.jsxs)("td",{children:[e.consumption," cu.m"]}),(0,Ks.jsx)("td",{children:B(e.basicamount)}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag is-small ".concat("Paid"===e.paymentstatus?"is-success":"Partial"===e.paymentstatus?"is-warning":"is-danger"),children:e.paymentstatus})}),(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("div",{style:{display:"flex",gap:"0.25rem"},children:[(0,Ks.jsx)("button",{className:"button is-small is-info is-light",onClick:()=>{const t=Zs(Zs({},e),{},{customers:y});n(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("editBill",{detail:t}))},100)},title:"Edit this bill",style:{borderRadius:"4px"},children:(0,Ks.jsx)("span",{className:"icon is-small",children:(0,Ks.jsx)("i",{className:"fas fa-edit"})})}),(0,Ks.jsx)("button",{className:"button is-small is-danger is-light",onClick:()=>{C(e),k(!0)},title:"Delete this bill",style:{borderRadius:"4px"},children:(0,Ks.jsx)("span",{className:"icon is-small",children:(0,Ks.jsx)("i",{className:"fas fa-trash"})})})]})})]},e.billid))})]})})]})]})]}),(0,Ks.jsxs)("footer",{className:"modal-card-foot",style:{background:"#f9fafb",borderTop:"1px solid #e5e7eb",padding:"1.25rem 1.5rem",display:"flex",justifyContent:"flex-end",gap:"0.75rem"},children:[(0,Ks.jsxs)("button",{className:"button",onClick:n,style:{borderRadius:"6px",fontWeight:"600",padding:"0.75rem 1.5rem"},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-times"})}),(0,Ks.jsx)("span",{children:"Cancel"})]}),(0,Ks.jsxs)("button",{className:"button is-primary ".concat(u?"is-loading":""),onClick:async()=>{if(await(async()=>{if(!y)return f("Please select a customer"),!1;if(!E.billedmonth)return f("Please select billing month"),!1;if(parseFloat(E.currentreading)<parseFloat(E.previousreading))return f("Current reading cannot be less than previous reading"),!1;const e=E.billedmonth+"-01";return!(await na.checkDuplicateBill(E.customerid,e,"edit"===s?null===r||void 0===r?void 0:r.billid:null)).exists||(f("A bill for this customer and month already exists"),!1)})()){d(!0),f("");try{const e=Vs.getUserSession(),t={customerid:E.customerid,billedmonth:E.billedmonth+"-01",previousreading:parseFloat(E.previousreading)||0,currentreading:parseFloat(E.currentreading)||0,consumption:parseFloat(E.consumption)||0,basicamount:parseFloat(E.basicamount)||0,surchargeamount:0,discountamount:0,totalbillamount:0,paymentstatus:"Unpaid",encodedby:e?"".concat(e.firstname," ").concat(e.lastname):"Unknown"};let a;if("add"===s){const e=await(async()=>{const e=()=>Math.floor(1e7+9e7*Math.random());let t=e(),n=0;for(;n<10;){const{data:s,error:a}=await na.checkBillIdExists(t);if(a)throw new Error("Error checking bill ID: "+a);if(!s.exists)return t;t=e(),n++}throw new Error("Could not generate unique bill ID after 10 attempts")})();t.billid=e,a=await na.addBill(t)}else a=await na.updateBill(r.billid,t);a.success?(o("Bill ".concat("add"===s?"added":"updated"," successfully!")),n()):f(a.error)}catch(h){f(h.message)}d(!1)}},disabled:!y,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"6px",fontWeight:"600",padding:"0.75rem 2rem",boxShadow:"0 4px 6px rgba(102, 126, 234, 0.25)"},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-save"})}),(0,Ks.jsx)("span",{children:"add"===s?"Add Bill":"Update Bill"})]})]})]}),S&&_&&(0,Ks.jsx)("div",{className:"dialog-overlay",children:(0,Ks.jsxs)("div",{style:{background:"white",borderRadius:"12px",padding:"2rem",maxWidth:"450px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",animation:"fadeIn 0.2s ease-out"},children:[(0,Ks.jsxs)("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[(0,Ks.jsx)("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",boxShadow:"0 8px 16px rgba(255, 107, 107, 0.3)"},children:(0,Ks.jsx)("i",{className:"fas fa-exclamation-triangle",style:{fontSize:"2rem",color:"white"}})}),(0,Ks.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#363636",marginBottom:"0.5rem"},children:"Delete Bill?"}),(0,Ks.jsx)("p",{style:{fontSize:"0.95rem",color:"#7a7a7a"},children:"This action cannot be undone"})]}),(0,Ks.jsxs)("div",{style:{background:"#f9fafb",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #e5e7eb"},children:[(0,Ks.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,Ks.jsx)("span",{style:{color:"#7a7a7a",fontSize:"0.875rem"},children:"Billing Month:"}),(0,Ks.jsx)("span",{style:{fontWeight:"600",color:"#363636"},children:F(_.billedmonth)})]}),(0,Ks.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,Ks.jsx)("span",{style:{color:"#7a7a7a",fontSize:"0.875rem"},children:"Consumption:"}),(0,Ks.jsxs)("span",{style:{fontWeight:"600",color:"#363636"},children:[_.consumption," cu.m"]})]}),(0,Ks.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Ks.jsx)("span",{style:{color:"#7a7a7a",fontSize:"0.875rem"},children:"Amount:"}),(0,Ks.jsx)("span",{style:{fontWeight:"600",color:"#667eea"},children:B(_.basicamount)})]})]}),(0,Ks.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,Ks.jsxs)("button",{className:"button is-light",onClick:()=>{k(!1),C(null)},style:{flex:1,borderRadius:"8px",fontWeight:"600",padding:"0.75rem 1.5rem",border:"2px solid #e5e7eb"},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-times"})}),(0,Ks.jsx)("span",{children:"Cancel"})]}),(0,Ks.jsxs)("button",{className:"button is-danger",onClick:()=>{n(),k(!1),setTimeout(()=>{window.dispatchEvent(new CustomEvent("deleteBill",{detail:_.billid}))},100),C(null)},style:{flex:1,background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%)",border:"none",borderRadius:"8px",fontWeight:"600",padding:"0.75rem 1.5rem",boxShadow:"0 4px 12px rgba(255, 107, 107, 0.3)"},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-trash"})}),(0,Ks.jsx)("span",{children:"Delete"})]})]})]})})]}):null},ra=()=>{const[e,t]=(0,a.useState)(""),[n,s]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(""),[f,m]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[v,y]=(0,a.useState)([]);(0,a.useEffect)(()=>{t(b())},[]);const b=()=>{const e=new Date;return"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"))},x=function(){let e=[...arguments.length>0&&void 0!==arguments[0]?arguments[0]:n];d&&(e=e.filter(e=>e.barangay===d)),(f||p)&&(e=e.map(e=>{const t=(e.allCustomers||[]).filter(e=>{const t=!f||e.type===f,n=!p||e.status===p;return t&&n}),n=t.filter(e=>e.isEncoded).length,s=t.filter(e=>!e.isEncoded);return Zs(Zs({},e),{},{totalCustomers:t.length,encodedCount:n,notEncodedCustomers:s})})),i(e)};(0,a.useEffect)(()=>{n.length>0&&x()},[d,f,p,n]);return(0,Ks.jsxs)("div",{className:"encoding-stats",children:[c&&(0,Ks.jsxs)("div",{className:"notification is-danger is-light py-3",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>u("")}),c]}),(0,Ks.jsx)("div",{className:"box",style:{marginBottom:"1rem",padding:"1.5rem"},children:(0,Ks.jsxs)("div",{className:"level",style:{marginBottom:"0"},children:[(0,Ks.jsx)("div",{className:"level-left",children:(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("div",{className:"field has-addons",style:{marginBottom:"0"},children:[(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("input",{className:"input",type:"month",value:e,onChange:e=>t(e.target.value)})}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsxs)("button",{className:"button is-primary ".concat(o?"is-loading":""),onClick:async()=>{if(!e)return;l(!0),u("");const t="".concat(e,"-01"),n=await na.getEncodingStats(t);n.success?(s(n.data),x(n.data)):u(n.error),l(!1)},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-search"})}),(0,Ks.jsx)("span",{children:"Load Stats"})]})})]})})}),(0,Ks.jsx)("div",{className:"level-right",children:n.length>0&&(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("button",{className:"button is-info",onClick:()=>{const t=n.map(e=>[e.barangay,e.totalCustomers,e.encodedCount,e.notEncodedCustomers.length,e.notEncodedCustomers.map(e=>"".concat(e.customerid,": ").concat(e.name)).join("; ")]),s=[["Barangay","Total Customers","Encoded","Not Encoded","Not Encoded List"].join(","),...t.map(e=>e.join(","))].join("\n"),a=new Blob([s],{type:"text/csv"}),r=window.URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download="encoding_stats_".concat(e,".csv"),i.click(),window.URL.revokeObjectURL(r)},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-file-excel"})}),(0,Ks.jsx)("span",{children:"Export"})]})}),(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("button",{className:"button is-link",onClick:()=>{const t='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Encoding Stats Report</title>\n        <style>\n          body { font-family: Arial, sans-serif; padding: 20px; }\n          h1 { text-align: center; color: #333; }\n          h2 { color: #666; margin-top: 30px; border-bottom: 2px solid #ddd; padding-bottom: 5px; }\n          h3 { color: #888; margin-top: 20px; }\n          table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n          th { background-color: #f2f2f2; font-weight: bold; }\n          .summary { background-color: #f9f9f9; padding: 15px; margin: 20px 0; border-radius: 5px; }\n          .stat-box { display: inline-block; padding: 10px 15px; margin: 5px; background: #e8f4f8; border-radius: 5px; }\n          .no-print { margin-top: 30px; text-align: center; }\n          @media print {\n            .no-print { display: none; }\n          }\n        </style>\n      </head>\n      <body>\n        <h1>\ud83d\udcca Billing Encoding Statistics Report</h1>\n        <div class="summary">\n          <p><strong>Report Period:</strong> '.concat(new Date(e+"-01").toLocaleDateString("en-PH",{year:"numeric",month:"long"}),"</p>\n          <p><strong>Generated:</strong> ").concat((new Date).toLocaleString("en-PH"),"</p>\n          <p><strong>Total Barangays:</strong> ").concat(n.length,"</p>\n        </div>\n        \n        ").concat(n.map(e=>"\n          <h2>\ud83c\udfd8\ufe0f ".concat(e.barangay,'</h2>\n          <div style="margin: 10px 0;">\n            <div class="stat-box">\n              <strong>Total Customers:</strong> ').concat(e.totalCustomers,'\n            </div>\n            <div class="stat-box" style="background: #d4edda;">\n              <strong>Encoded Bills:</strong> ').concat(e.encodedCount,'\n            </div>\n            <div class="stat-box" style="background: ').concat(e.notEncodedCustomers.length>0?"#f8d7da":"#d4edda",';">\n              <strong>Not Encoded:</strong> ').concat(e.notEncodedCustomers.length,'\n            </div>\n            <div class="stat-box" style="background: #d1ecf1;">\n              <strong>Completion:</strong> ').concat((e.encodedCount/e.totalCustomers*100).toFixed(1),"%\n            </div>\n          </div>\n          \n          ").concat(e.notEncodedCustomers.length>0?"\n            <h3>\u26a0\ufe0f Customers Without Bills (".concat(e.notEncodedCustomers.length,')</h3>\n            <table>\n              <thead>\n                <tr>\n                  <th style="width: 20%;">Customer ID</th>\n                  <th>Customer Name</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat(e.notEncodedCustomers.map(e=>"\n                  <tr>\n                    <td><strong>".concat(e.customerid,"</strong></td>\n                    <td>").concat(e.name,"</td>\n                  </tr>\n                ")).join(""),"\n              </tbody>\n            </table>\n          "):'<p style="color: #28a745; font-weight: bold;">\u2705 All customers in this barangay have been encoded!</p>',"\n        ")).join(""),'\n        \n        <div class="summary" style="margin-top: 40px;">\n          <h3>\ud83d\udcc8 Overall Summary</h3>\n          <p><strong>Total Customers:</strong> ').concat(n.reduce((e,t)=>e+t.totalCustomers,0),"</p>\n          <p><strong>Total Encoded:</strong> ").concat(n.reduce((e,t)=>e+t.encodedCount,0),"</p>\n          <p><strong>Total Not Encoded:</strong> ").concat(n.reduce((e,t)=>e+t.notEncodedCustomers.length,0),"</p>\n          <p><strong>Overall Completion:</strong> ").concat((n.reduce((e,t)=>e+t.encodedCount,0)/n.reduce((e,t)=>e+t.totalCustomers,0)*100).toFixed(1),'%</p>\n        </div>\n        \n        <div class="no-print">\n          <button onclick="window.print()" style="padding: 10px 20px; font-size: 16px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 5px; margin-right: 10px;">\n            \ud83d\udda8\ufe0f Print Report\n          </button>\n          <button onclick="window.close()" style="padding: 10px 20px; font-size: 16px; cursor: pointer; background: #6c757d; color: white; border: none; border-radius: 5px;">\n            \u274c Close\n          </button>\n        </div>\n      </body>\n      </html>\n    '),s=window.open("","_blank");s.document.write(t),s.document.close()},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-print"})}),(0,Ks.jsx)("span",{children:"Print"})]})})]})})]})}),n.length>0&&(0,Ks.jsxs)("div",{className:"box",style:{marginBottom:"1rem",padding:"1.5rem"},children:[(0,Ks.jsxs)("h3",{className:"title is-6 mb-3",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-filter"})}),"Filters"]}),(0,Ks.jsxs)("div",{className:"columns",style:{marginBottom:"0"},children:[(0,Ks.jsx)("div",{className:"column is-3",children:(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:d,onChange:e=>h(e.target.value),children:[(0,Ks.jsx)("option",{value:"",children:"All Barangays"}),n.map(e=>(0,Ks.jsx)("option",{value:e.barangay,children:e.barangay},e.barangay))]})})})}),(0,Ks.jsx)("div",{className:"column is-3",children:(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:f,onChange:e=>m(e.target.value),children:[(0,Ks.jsx)("option",{value:"",children:"All Types"}),(0,Ks.jsx)("option",{value:"Residential",children:"Residential"}),(0,Ks.jsx)("option",{value:"Commercial",children:"Commercial"}),(0,Ks.jsx)("option",{value:"Industrial",children:"Industrial"})]})})})}),(0,Ks.jsx)("div",{className:"column is-3",children:(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:p,onChange:e=>g(e.target.value),children:[(0,Ks.jsx)("option",{value:"",children:"All Status"}),(0,Ks.jsx)("option",{value:"Active",children:"Active"}),(0,Ks.jsx)("option",{value:"Disconnected",children:"Disconnected"})]})})})}),(0,Ks.jsx)("div",{className:"column is-3",children:(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsxs)("button",{className:"button is-light is-fullwidth",onClick:()=>{h(""),m(""),g(""),i(n)},disabled:!d&&!f&&!p,children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-times"})}),(0,Ks.jsx)("span",{children:"Clear Filters"})]})})})]})]}),o?(0,Ks.jsx)("div",{className:"has-text-centered",style:{padding:"2rem"},children:(0,Ks.jsx)("button",{className:"button is-loading is-large is-ghost"})}):0===n.length?(0,Ks.jsxs)("div",{className:"has-text-centered",style:{padding:"2rem"},children:[(0,Ks.jsx)("span",{className:"icon is-large has-text-grey-light",children:(0,Ks.jsx)("i",{className:"fas fa-chart-bar fa-3x"})}),(0,Ks.jsx)("p",{className:"has-text-grey mt-4",children:'Select a month and click "Load Stats" to view encoding statistics'})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsxs)("div",{className:"box has-background-info-light mb-3 p-4",children:[(0,Ks.jsx)("h3",{className:"title is-6 mb-3",children:"Overall Summary"}),(0,Ks.jsxs)("div",{className:"columns is-mobile",children:[(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"notification is-info is-light p-3",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Customers"}),(0,Ks.jsx)("p",{className:"title is-4",children:r.reduce((e,t)=>e+t.totalCustomers,0)})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"notification is-success is-light p-3",children:[(0,Ks.jsx)("p",{className:"heading",children:"Encoded Bills"}),(0,Ks.jsx)("p",{className:"title is-4",children:r.reduce((e,t)=>e+t.encodedCount,0)})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"notification is-danger is-light p-3",children:[(0,Ks.jsx)("p",{className:"heading",children:"Not Encoded"}),(0,Ks.jsx)("p",{className:"title is-4",children:r.reduce((e,t)=>e+t.notEncodedCustomers.length,0)})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"notification is-primary is-light p-3",children:[(0,Ks.jsx)("p",{className:"heading",children:"Completion Rate"}),(0,Ks.jsxs)("p",{className:"title is-4",children:[r.reduce((e,t)=>e+t.totalCustomers,0)>0?(r.reduce((e,t)=>e+t.encodedCount,0)/r.reduce((e,t)=>e+t.totalCustomers,0)*100).toFixed(1):0,"%"]})]})})]})]}),r.map(e=>(0,Ks.jsxs)("div",{className:"box mb-3 p-3",children:[(0,Ks.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,Ks.jsxs)("h3",{className:"title is-5",style:{marginBottom:"0"},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-map-marker-alt"})}),e.barangay]}),e.notEncodedCustomers.length>0&&(0,Ks.jsxs)("button",{className:"button is-small is-info is-light",onClick:()=>{return t=e.barangay,void y(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-chevron-".concat(v.includes(e.barangay)?"up":"down")})}),(0,Ks.jsxs)("span",{children:[v.includes(e.barangay)?"Hide":"View"," Details"]})]})]}),(0,Ks.jsxs)("div",{className:"columns is-mobile",children:[(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"notification is-info is-light p-2",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Customers"}),(0,Ks.jsx)("p",{className:"title is-5",children:e.totalCustomers})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"notification is-success is-light p-2",children:[(0,Ks.jsx)("p",{className:"heading",children:"Encoded Bills"}),(0,Ks.jsx)("p",{className:"title is-5",children:e.encodedCount})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"notification is-danger is-light p-2",children:[(0,Ks.jsx)("p",{className:"heading",children:"Not Encoded"}),(0,Ks.jsx)("p",{className:"title is-5",children:e.notEncodedCustomers.length})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"notification is-primary is-light p-2",children:[(0,Ks.jsx)("p",{className:"heading",children:"Completion"}),(0,Ks.jsxs)("p",{className:"title is-5",children:[(e.encodedCount/e.totalCustomers*100).toFixed(1),"%"]})]})})]}),e.notEncodedCustomers.length>0&&v.includes(e.barangay)&&(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsxs)("h4",{className:"title is-6 has-text-danger mb-2 mt-3",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-exclamation-triangle"})}),"Customers Without Bills (",e.notEncodedCustomers.length,")"]}),(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-narrow is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{width:"150",children:"Customer ID"}),(0,Ks.jsx)("th",{children:"Customer Name"}),(0,Ks.jsx)("th",{width:"120",children:"Type"}),(0,Ks.jsx)("th",{width:"120",children:"Status"})]})}),(0,Ks.jsx)("tbody",{children:e.notEncodedCustomers.map(e=>(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{className:"has-text-weight-bold",children:e.customerid}),(0,Ks.jsx)("td",{children:e.name}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag is-info is-light",children:e.type})}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag ".concat("Active"===e.status?"is-success":"is-warning"," is-light"),children:e.status})})]},e.customerid))})]})})]}),0===e.notEncodedCustomers.length&&(0,Ks.jsxs)("div",{className:"notification is-success is-light p-2 mt-3",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-check-circle"})}),(0,Ks.jsx)("strong",{children:"All customers in this barangay have been encoded!"})]})]},e.barangay))]})]})},ia=e=>{let{isOpen:t,onClose:n,onConfirm:s,title:a,message:r,subMessage:i,confirmText:o="Confirm",cancelText:l="Cancel",type:c="info",loading:u=!1,icon:d=null}=e;if(!t)return null;return(0,Ks.jsx)("div",{className:"confirmation-dialog-overlay",children:(0,Ks.jsxs)("div",{className:"confirmation-dialog-content ".concat(c),children:[(0,Ks.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,Ks.jsxs)("h3",{className:"title is-5 mb-3",children:[(0,Ks.jsx)("span",{className:"icon ".concat((()=>{switch(c){case"danger":return"has-text-danger";case"warning":return"has-text-warning";case"success":return"has-text-success";default:return"has-text-info"}})()),style:{marginRight:"0.5rem"},children:(()=>{if(d)return d;switch(c){case"danger":return(0,Ks.jsx)("i",{className:"fas fa-exclamation-triangle"});case"warning":return(0,Ks.jsx)("i",{className:"fas fa-exclamation-circle"});case"success":return(0,Ks.jsx)("i",{className:"fas fa-check-circle"});default:return(0,Ks.jsx)("i",{className:"fas fa-info-circle"})}})()}),a]}),(0,Ks.jsx)("p",{className:"mb-3",style:{fontSize:"1rem",color:"#4a5568"},children:r}),i&&(0,Ks.jsx)("p",{className:"has-text-grey is-size-7",children:i})]}),(0,Ks.jsxs)("div",{className:"buttons is-right",style:{marginBottom:"0"},children:[(0,Ks.jsx)("button",{className:"button",onClick:n,disabled:u,children:l}),(0,Ks.jsxs)("button",{className:"button ".concat((()=>{switch(c){case"danger":return"is-danger";case"warning":return"is-warning";case"success":return"is-success";default:return"is-primary"}})()," ").concat(u?"is-loading":""),onClick:s,disabled:u,children:[(0,Ks.jsxs)("span",{className:"icon",children:["danger"===c&&(0,Ks.jsx)("i",{className:"fas fa-trash"}),"success"===c&&(0,Ks.jsx)("i",{className:"fas fa-check"}),"warning"===c&&(0,Ks.jsx)("i",{className:"fas fa-exclamation"}),"info"===c&&(0,Ks.jsx)("i",{className:"fas fa-info"})]}),(0,Ks.jsx)("span",{children:o})]})]})]})})},oa=()=>{const[e,t]=(0,a.useState)("management"),[n,s]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),[d,h]=(0,a.useState)(""),[f,m]=(0,a.useState)(""),[p,g]=(0,a.useState)(1),[v,y]=(0,a.useState)(0),[b]=(0,a.useState)(50),[x,w]=(0,a.useState)(!1),[j,N]=(0,a.useState)("add"),[S,k]=(0,a.useState)(null),[_,C]=(0,a.useState)(null),[E,T]=(0,a.useState)(""),[P,O]=(0,a.useState)([]),[R,A]=(0,a.useState)(!1),[I,D]=(0,a.useState)(""),[L,U]=(0,a.useState)(""),[B,F]=(0,a.useState)(""),[z,M]=(0,a.useState)([]),[W,q]=(0,a.useState)(!1),[H,V]=(0,a.useState)(null);(0,a.useEffect)(()=>{K(),$(),J(),G();const e=e=>{const t=e.detail;Z(t)},t=e=>{const t=e.detail,s="object"===typeof t?t:n.find(e=>e.billid===t);s&&ee(s)};return window.addEventListener("editBill",e),window.addEventListener("deleteBill",t),()=>{window.removeEventListener("editBill",e),window.removeEventListener("deleteBill",t)}},[]),(0,a.useEffect)(()=>{if(!(""!==E.trim())&&!(I||L||B))return void O([]);const e=setTimeout(()=>{Q()},500);return()=>clearTimeout(e)},[E,I,L,B]);const K=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;u(!0);const t=await na.getBills(e,b,"dateencoded",!1);t.success?(s(t.data),y(t.count),g(e)):h(t.error),u(!1)},$=async()=>{const e=await na.getCustomerTypes();e.success&&i(e.data)},J=async()=>{const e=await sa.getSurchargeSettings();e.success&&l(e.data)},G=async()=>{const e=await sa.getBarangays();e.success&&M(e.data)},Q=async()=>{A(!0),h("");const e=await sa.searchCustomers(E||"",{barangay:I,type:L,status:B});e.success?(O(e.data),0===e.data.length&&h("No customers found matching your criteria")):h(e.error),A(!1)},Y=e=>{C(e),O([]),T(""),X()},X=()=>{N("add"),k(null),w(!0)},Z=e=>{N("edit"),k(e),w(!0)},ee=e=>{V(e),q(!0)},te=Math.ceil(v/b);return(0,Ks.jsxs)("div",{className:"billing-page",style:{padding:"0"},children:[(0,Ks.jsxs)("div",{className:"level mb-3",children:[(0,Ks.jsx)("div",{className:"level-left",children:(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("h1",{className:"title is-4 mb-0",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-file-invoice-dollar"})}),"Billing Management"]})})}),(0,Ks.jsx)("div",{className:"level-right",children:(0,Ks.jsx)("div",{className:"level-item",children:n.length>0&&"management"===e&&(0,Ks.jsxs)("button",{className:"button is-info",onClick:()=>{const e=na.exportToCSV(n),t=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="bills_".concat((new Date).toISOString().split("T")[0],".csv"),a.click(),window.URL.revokeObjectURL(s)},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-file-csv"})}),(0,Ks.jsx)("span",{children:"Export CSV"})]})})})]}),d&&(0,Ks.jsxs)("div",{className:"notification is-danger is-light py-3",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>h("")}),d]}),f&&(0,Ks.jsxs)("div",{className:"notification is-success is-light py-3",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>m("")}),f]}),(0,Ks.jsx)("div",{className:"tabs is-boxed",children:(0,Ks.jsxs)("ul",{children:[(0,Ks.jsx)("li",{className:"management"===e?"is-active":"",onClick:()=>t("management"),children:(0,Ks.jsxs)("a",{children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-file-invoice"})}),(0,Ks.jsx)("span",{children:"Bill Management"})]})}),(0,Ks.jsx)("li",{className:"stats"===e?"is-active":"",onClick:()=>t("stats"),children:(0,Ks.jsxs)("a",{children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-chart-bar"})}),(0,Ks.jsx)("span",{children:"Encoding Stats"})]})})]})}),"management"===e&&(0,Ks.jsx)("div",{style:{width:"100%"},children:(0,Ks.jsxs)("div",{className:"box",style:{marginBottom:"0",padding:"1.5rem",borderRadius:"0"},children:[(0,Ks.jsxs)("h3",{className:"title is-6 mb-3",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-user-plus"})}),"Add New Bill - Search Customer"]}),(0,Ks.jsxs)("div",{className:"columns",style:{marginBottom:"0"},children:[(0,Ks.jsx)("div",{className:"column is-4",children:(0,Ks.jsxs)("div",{className:"field has-addons",style:{marginBottom:"0"},children:[(0,Ks.jsx)("div",{className:"control is-expanded",children:(0,Ks.jsx)("input",{className:"input",type:"text",placeholder:"Search by customer name or ID...",value:E,onChange:e=>T(e.target.value),onKeyPress:e=>"Enter"===e.key&&Q()})}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsxs)("button",{className:"button is-primary ".concat(R?"is-loading":""),onClick:Q,children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-search"})}),(0,Ks.jsx)("span",{children:"Search"})]})})]})}),(0,Ks.jsx)("div",{className:"column is-2",children:(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:I,onChange:e=>D(e.target.value),children:[(0,Ks.jsx)("option",{value:"",children:"All Barangays"}),z.map(e=>(0,Ks.jsx)("option",{value:e.barangay,children:e.barangay},e.barangay))]})})})}),(0,Ks.jsx)("div",{className:"column is-2",children:(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:L,onChange:e=>U(e.target.value),children:[(0,Ks.jsx)("option",{value:"",children:"All Types"}),r.map(e=>(0,Ks.jsx)("option",{value:e.type,children:e.type},e.type))]})})})}),(0,Ks.jsx)("div",{className:"column is-2",children:(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:B,onChange:e=>F(e.target.value),children:[(0,Ks.jsx)("option",{value:"",children:"All Status"}),(0,Ks.jsx)("option",{value:"Active",children:"Active"}),(0,Ks.jsx)("option",{value:"Disconnected",children:"Disconnected"})]})})})}),(0,Ks.jsx)("div",{className:"column is-2",children:(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsxs)("button",{className:"button is-light is-fullwidth",onClick:()=>{T(""),D(""),U(""),F(""),O([])},disabled:!E&&!I&&!L&&!B,title:"Clear all filters",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-times"})}),(0,Ks.jsx)("span",{children:"Clear"})]})})})]}),P.length>0&&(0,Ks.jsx)("div",{className:"table-container mt-3",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable is-narrow",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Customer ID"}),(0,Ks.jsx)("th",{children:"Name"}),(0,Ks.jsx)("th",{children:"Type"}),(0,Ks.jsx)("th",{children:"Barangay"}),(0,Ks.jsx)("th",{children:"Status"}),(0,Ks.jsx)("th",{width:"100",children:"Action"})]})}),(0,Ks.jsx)("tbody",{children:P.map(e=>(0,Ks.jsxs)("tr",{onClick:()=>Y(e),style:{cursor:"pointer"},title:"Click to add bill for this customer",children:[(0,Ks.jsx)("td",{className:"has-text-weight-bold",children:e.customerid}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("strong",{children:e.name})}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag is-info is-light",children:e.type})}),(0,Ks.jsx)("td",{children:e.barangay}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag is-small ".concat("Active"===e.status?"is-success":"is-danger"),children:e.status})}),(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("button",{className:"button is-small is-primary",onClick:t=>{t.stopPropagation(),Y(e)},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-plus"})}),(0,Ks.jsx)("span",{children:"Add Bill"})]})})]},e.customerid))})]})}),(0,Ks.jsxs)("div",{className:"mt-4",children:[(0,Ks.jsx)("hr",{}),(0,Ks.jsxs)("h3",{className:"title is-6 mb-3 mt-3",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-clock"})}),"Recent Bills Added"]}),c?(0,Ks.jsxs)("div",{className:"has-text-centered py-5",children:[(0,Ks.jsx)("span",{className:"icon is-large",children:(0,Ks.jsx)("i",{className:"fas fa-spinner fa-pulse fa-2x"})}),(0,Ks.jsx)("p",{className:"mt-3",children:"Loading bills..."})]}):0===n.length?(0,Ks.jsxs)("div",{className:"notification is-light has-text-centered",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-info-circle"})}),(0,Ks.jsx)("span",{children:"No bills found"})]}):(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable is-narrow",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Bill ID"}),(0,Ks.jsx)("th",{children:"Customer ID"}),(0,Ks.jsx)("th",{children:"Customer Name"}),(0,Ks.jsx)("th",{children:"Barangay"}),(0,Ks.jsx)("th",{children:"Billing Month"}),(0,Ks.jsx)("th",{children:"Consumption"}),(0,Ks.jsx)("th",{children:"Basic Amount"}),(0,Ks.jsx)("th",{children:"Status"}),(0,Ks.jsx)("th",{children:"Encoded By"}),(0,Ks.jsx)("th",{width:"120",children:"Actions"})]})}),(0,Ks.jsx)("tbody",{children:n.slice(0,10).map(e=>{var t,n,s,a;return(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{className:"has-text-weight-bold",children:e.billid}),(0,Ks.jsx)("td",{children:e.customerid}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("strong",{children:(null===(t=e.customers)||void 0===t?void 0:t.name)||"N/A"})}),(0,Ks.jsx)("td",{children:(null===(n=e.customers)||void 0===n?void 0:n.barangay)||"N/A"}),(0,Ks.jsx)("td",{children:(a=e.billedmonth,a?new Date(a).toLocaleDateString("en-PH",{year:"numeric",month:"long"}):"N/A")}),(0,Ks.jsxs)("td",{children:[e.consumption," cu.m"]}),(0,Ks.jsx)("td",{children:(s=e.basicamount,"\u20b1".concat(parseFloat(s||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})))}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag is-small ".concat("Paid"===e.paymentstatus?"is-success":"Partial"===e.paymentstatus?"is-warning":"is-danger"),children:e.paymentstatus})}),(0,Ks.jsx)("td",{children:e.encodedby||"N/A"}),(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("div",{className:"buttons are-small",children:[(0,Ks.jsx)("button",{className:"button is-info is-small",onClick:()=>Z(e),title:"Edit bill",children:(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-edit"})})}),(0,Ks.jsx)("button",{className:"button is-danger is-small",onClick:()=>ee(e),title:"Delete bill",children:(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-trash"})})})]})})]},e.billid)})})]})}),n.length>0&&te>1&&(0,Ks.jsxs)("nav",{className:"pagination is-small mt-3",role:"navigation",children:[(0,Ks.jsx)("button",{className:"button is-small",onClick:()=>K(p-1),disabled:1===p,children:"Previous"}),(0,Ks.jsx)("button",{className:"button is-small",onClick:()=>K(p+1),disabled:p===te,children:"Next"}),(0,Ks.jsx)("ul",{className:"pagination-list",children:(0,Ks.jsx)("li",{children:(0,Ks.jsxs)("span",{className:"pagination-ellipsis",children:["Page ",p," of ",te]})})})]})]})]})}),"stats"===e&&(0,Ks.jsx)("div",{style:{width:"100%"},children:(0,Ks.jsx)(ra,{})}),(0,Ks.jsx)(aa,{isOpen:x,onClose:()=>{w(!1),C(null)},mode:j,bill:S,preSelectedCustomer:_,onSuccess:e=>{m(e),K(p)},customerTypes:r,surchargeSettings:o}),(0,Ks.jsx)(ia,{isOpen:W&&null!==H,onClose:()=>{q(!1),V(null)},onConfirm:async()=>{if(!H)return;u(!0);const e=await na.deleteBill(H.billid);e.success?(m("Bill deleted successfully"),K(p),setTimeout(()=>m(""),3e3)):h(e.error),u(!1),q(!1),V(null)},title:"Confirm Delete",message:H?"Are you sure you want to delete bill #".concat(H.billid,"?"):"",subMessage:H?"Customer: ".concat(H.customername," | Month: ").concat(new Date(H.billedmonth).toLocaleDateString("en-PH",{year:"numeric",month:"long"})):"",confirmText:"Delete Bill",cancelText:"Cancel",type:"danger",loading:c})]})},la=e=>{let{isOpen:t,onClose:n,onConfirm:s,billCount:r,grandTotal:i,creditBalance:o=0,loading:l=!1,totalSurcharge:c=0}=e;const[u,d]=(0,a.useState)(""),[h,f]=(0,a.useState)(""),[m,p]=(0,a.useState)(!1),g=m?i-c:i,v=Math.min(o,g),y=g-v,b=o-v;(0,a.useEffect)(()=>{t&&(d(y.toFixed(2)),f(""))},[t,y]);if(!t)return null;const x=parseFloat(u||0)-y,w=x>0;return(0,Ks.jsx)("div",{className:"confirmation-dialog-overlay",children:(0,Ks.jsxs)("div",{className:"confirmation-dialog-content success",style:{maxWidth:"550px"},children:[(0,Ks.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,Ks.jsxs)("h3",{className:"title is-5 mb-3",children:[(0,Ks.jsx)("span",{className:"icon has-text-success",style:{marginRight:"0.5rem"},children:(0,Ks.jsx)("i",{className:"fas fa-cash-register"})}),"Confirm Payment Processing"]}),(0,Ks.jsxs)("div",{className:"box",style:{background:"#f0f9ff",border:"2px solid #3b82f6",marginBottom:"1rem"},children:[(0,Ks.jsxs)("div",{style:{marginBottom:"0.75rem"},children:[(0,Ks.jsx)("span",{className:"has-text-grey",children:"Number of Bills:"}),(0,Ks.jsx)("strong",{style:{float:"right",fontSize:"1.1rem"},children:r})]}),(0,Ks.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"0.75rem",marginBottom:"0.75rem"},children:[(0,Ks.jsx)("span",{className:"has-text-grey",children:"Grand Total:"}),(0,Ks.jsxs)("strong",{style:{float:"right",fontSize:"1.2rem",color:"#059669"},children:["\u20b1",i.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c>0&&m&&(0,Ks.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"0.75rem",marginBottom:"0.75rem"},children:[(0,Ks.jsx)("span",{className:"has-text-grey",children:"Surcharge Waived:"}),(0,Ks.jsxs)("strong",{style:{float:"right",fontSize:"1.2rem",color:"#dc2626"},children:["-\u20b1",c.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),v>0&&(0,Ks.jsxs)("div",{style:{borderTop:"1px solid #ddd",paddingTop:"0.75rem",marginBottom:"0.75rem"},children:[(0,Ks.jsx)("span",{className:"has-text-grey",children:"Credit Applied:"}),(0,Ks.jsxs)("strong",{style:{float:"right",fontSize:"1.2rem",color:"#d97706"},children:["-\u20b1",v.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,Ks.jsxs)("div",{style:{borderTop:"2px solid #3b82f6",paddingTop:"0.75rem",background:"#dbeafe",margin:"-1rem",marginTop:"0.75rem",padding:"1rem"},children:[(0,Ks.jsx)("span",{className:"has-text-grey has-text-weight-bold",children:"Amount to Pay:"}),(0,Ks.jsxs)("strong",{style:{float:"right",fontSize:"1.5rem",color:"#059669"},children:["\u20b1",y.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),c>0&&(0,Ks.jsx)("div",{className:"field",style:{marginBottom:"1rem"},children:(0,Ks.jsxs)("label",{className:"checkbox",children:[(0,Ks.jsx)("input",{type:"checkbox",checked:m,onChange:e=>p(e.target.checked),disabled:l})," ","Waive Surcharge (\u20b1",c.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2}),") - Remove late payment penalty"]})}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsxs)("label",{className:"label",children:["Amount Received ",(0,Ks.jsx)("span",{className:"has-text-danger",children:"*"})]}),(0,Ks.jsxs)("div",{className:"control has-icons-left",children:[(0,Ks.jsx)("input",{className:"input ".concat(h?"is-danger":""),type:"number",step:"0.01",placeholder:"Enter amount received",value:u,onChange:e=>{d(e.target.value),f("")},autoFocus:!0,disabled:l}),(0,Ks.jsx)("span",{className:"icon is-small is-left",children:(0,Ks.jsx)("i",{className:"fas fa-peso-sign"})})]}),h&&(0,Ks.jsx)("p",{className:"help is-danger",children:h}),!h&&w&&(0,Ks.jsxs)("p",{className:"help is-success",children:[(0,Ks.jsx)("i",{className:"fas fa-info-circle"})," New credit from overpayment: \u20b1",x.toFixed(2)]})]}),v>0&&(0,Ks.jsx)("div",{className:"notification is-warning is-light",style:{padding:"0.75rem 1rem",marginBottom:"1rem"},children:(0,Ks.jsxs)("p",{className:"is-size-7",children:[(0,Ks.jsxs)("strong",{children:[(0,Ks.jsx)("i",{className:"fas fa-piggy-bank"})," Credit Auto-Applied:"]}),(0,Ks.jsx)("br",{}),"\u20b1",v.toFixed(2)," from available credit balance has been automatically applied to this payment.",b>0&&" Remaining credit: \u20b1".concat(b.toFixed(2))]})}),w&&!h&&(0,Ks.jsx)("div",{className:"notification is-success is-light",style:{padding:"0.75rem 1rem"},children:(0,Ks.jsxs)("p",{className:"is-size-7",children:[(0,Ks.jsxs)("strong",{children:[(0,Ks.jsx)("i",{className:"fas fa-coins"})," Overpayment Detected:"]}),(0,Ks.jsx)("br",{}),"The excess amount of ",(0,Ks.jsxs)("strong",{children:["\u20b1",x.toFixed(2)]})," will be saved as credit and automatically applied to future bills."]})})]}),(0,Ks.jsxs)("div",{className:"buttons is-right",style:{marginBottom:"0"},children:[(0,Ks.jsx)("button",{className:"button",onClick:n,disabled:l,children:"Cancel"}),(0,Ks.jsxs)("button",{className:"button is-success ".concat(l?"is-loading":""),onClick:()=>{const e=parseFloat(u);if(isNaN(e)||e<0)return void f("Please enter a valid amount");if(e<y)return void f("Amount received (\u20b1".concat(e.toFixed(2),") is less than required (\u20b1").concat(y.toFixed(2),")"));s(e,v,e-y,m)},disabled:l,children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-check-circle"})}),(0,Ks.jsx)("span",{children:"Confirm Payment"})]})]})]})})},ca=()=>{const[e,t]=(0,a.useState)("search"),[n,s]=(0,a.useState)(""),[r,i]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[c,u]=(0,a.useState)(!1),[d,h]=(0,a.useState)(""),[f,m]=(0,a.useState)(""),[p,g]=(0,a.useState)("all"),[v,y]=(0,a.useState)("all"),[b,x]=(0,a.useState)("all"),[w,j]=(0,a.useState)([]),[N,S]=(0,a.useState)([]),[k,_]=(0,a.useState)(null),[C,E]=(0,a.useState)({todayCollection:0,todayCount:0,monthCollection:0,monthCount:0}),[T,P]=(0,a.useState)([]),[O,R]=(0,a.useState)(!1),[A,I]=(0,a.useState)(!1),[D,L]=(0,a.useState)(null),[U,B]=(0,a.useState)(""),[F,z]=(0,a.useState)(!1),[M,W]=(0,a.useState)(null),q=Vs.getUserSession();(0,a.useEffect)(()=>{H(),V(),K(),$()},[]),(0,a.useEffect)(()=>{if(!n.trim())return void i([]);const e=setTimeout(()=>{Q()},500);return()=>clearTimeout(e)},[n,p,v,b]);const H=async()=>{const e=await sa.getPaymentStats();e.success&&E(e.data)},V=async()=>{try{const{data:e}=await sa.searchCustomers("");if(e){const t=[...new Set(e.map(e=>e.barangay).filter(Boolean))];j(t.map(e=>({barangay:e})));const n=[...new Set(e.map(e=>e.type).filter(Boolean))];S(n.map(e=>({type:e})))}}catch(d){console.error("Error loading filter options:",d)}},K=async()=>{const e=await sa.getSurchargeSettings();e.success&&_(e.data)},$=async()=>{R(!0);const e=await sa.getRecentPayments(10);e.success&&P(e.data),R(!1)},J=()=>o.find(t=>t.customer.customerid===e),G=(e,t)=>k?e.map(e=>{const n=sa.calculateSurcharge(e,k),s=parseFloat(e.basicamount||0);let a=0;if(e.discountamount&&parseFloat(e.discountamount)>0)a=parseFloat(e.discountamount);else if(t&&t.discount){a=s*parseFloat(t.discount)/100}const r=s+(n?n.surchargeAmount:parseFloat(e.surchargeamount||0))-a;return Zs(Zs({},e),{},{surchargeInfo:n,calculatedDiscountAmount:a,calculatedTotal:r})}):e,Q=async()=>{if(!n.trim())return void h("Please enter a customer name or ID");u(!0),h("");const e=await sa.searchCustomers(n);if(e.success){let t=e.data;"all"!==p&&(t=t.filter(e=>e.barangay===p)),"all"!==v&&(t=t.filter(e=>e.type===v)),"all"!==b&&(t=t.filter(e=>e.status===b)),i(t),0===t.length&&h('No customers found matching "'.concat(n,'" with current filters.'))}else h("Search error: ".concat(e.error));u(!1)},Y=async e=>{if(o.find(t=>t.customer.customerid===e.customerid))return void t(e.customerid);u(!0),h("");const n=await sa.getCustomerDetails(e.customerid),s=n.success?n.data:e,a=await sa.getUnpaidBills(e.customerid),r=a.success?a.data:[],i=await sa.getPaymentHistory(e.customerid),c={customer:s,unpaidBills:r,paymentHistory:i.success?i.data:[],billsWithSurcharge:G(r,s),selectedBills:[],creditBalance:parseFloat(s.credit_balance||0)};l([...o,c]),t(e.customerid),u(!1)},X=t=>{l(n=>n.map(n=>n.customer.customerid===e?Zs(Zs({},n),{},{selectedBills:t}):n))},Z=async e=>{const t=await sa.getCustomerDetails(e),n=await sa.getUnpaidBills(e),s=await sa.getPaymentHistory(e),a=n.success?n.data:[],r=t.success?t.data:null,i=G(a,r);l(t=>t.map(t=>t.customer.customerid===e?Zs(Zs({},t),{},{customer:r||t.customer,unpaidBills:a,paymentHistory:s.success?s.data:[],billsWithSurcharge:i,creditBalance:r?parseFloat(r.credit_balance||0):0,selectedBills:[]}):t))},ee=e=>"\u20b1".concat(parseFloat(e||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})),te=e=>e?new Date(e).toLocaleDateString("en-PH",{year:"numeric",month:"long"}):"N/A";return(0,Ks.jsxs)("div",{className:"customers-page",children:[(0,Ks.jsx)("div",{className:"compact-header",children:(0,Ks.jsxs)("div",{className:"header-row",children:[(0,Ks.jsxs)("div",{className:"title-section",children:[(0,Ks.jsx)("h1",{className:"page-title",children:"Payment Processing"}),(0,Ks.jsxs)("div",{className:"stats-inline",children:[(0,Ks.jsxs)("span",{className:"stat-item",children:[(0,Ks.jsx)("i",{className:"fas fa-cash-register"}),(0,Ks.jsx)("strong",{children:ee(C.todayCollection)})," Today"]}),(0,Ks.jsxs)("span",{className:"stat-item active",children:[(0,Ks.jsx)("i",{className:"fas fa-calendar-alt"}),(0,Ks.jsx)("strong",{children:ee(C.monthCollection)})," This Month"]}),(0,Ks.jsxs)("span",{className:"stat-item",children:[(0,Ks.jsx)("i",{className:"fas fa-receipt"}),(0,Ks.jsx)("strong",{children:C.todayCount+C.monthCount})," Transactions"]})]})]}),(0,Ks.jsx)("div",{className:"header-actions",children:o.length>0&&(0,Ks.jsxs)("button",{className:"button is-info",onClick:()=>t("search"),children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-search"})}),(0,Ks.jsx)("span",{children:"Search Customers"})]})})]})}),d&&(0,Ks.jsxs)("div",{className:"notification is-warning",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>h("")}),d]}),f&&(0,Ks.jsxs)("div",{className:"notification is-success",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>m("")}),f]}),(0,Ks.jsx)("div",{className:"tabs is-boxed",children:(0,Ks.jsxs)("ul",{children:[(0,Ks.jsx)("li",{className:"search"===e?"is-active":"",onClick:()=>t("search"),children:(0,Ks.jsxs)("a",{children:[(0,Ks.jsx)("span",{className:"icon is-small",children:(0,Ks.jsx)("i",{className:"fas fa-search"})}),(0,Ks.jsx)("span",{children:"Customer Search"})]})}),o.map(n=>(0,Ks.jsxs)("li",{className:e===n.customer.customerid?"is-active":"",style:{position:"relative"},children:[(0,Ks.jsxs)("a",{onClick:()=>t(n.customer.customerid),style:{paddingRight:"2rem"},children:[(0,Ks.jsx)("span",{className:"icon is-small",children:(0,Ks.jsx)("i",{className:"fas fa-money-check-alt"})}),(0,Ks.jsx)("span",{children:n.customer.name})]}),(0,Ks.jsx)("button",{className:"delete is-small",onClick:s=>{s.stopPropagation(),(n=>{const s=o.filter(e=>e.customer.customerid!==n);l(s),e===n&&(s.length>0?t(s[s.length-1].customer.customerid):t("search"))})(n.customer.customerid)},style:{position:"absolute",top:"8px",right:"8px",zIndex:10},title:"Close tab"})]},n.customer.customerid))]})}),"search"===e&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("div",{className:"compact-filters",children:[(0,Ks.jsx)("div",{className:"search-input",children:(0,Ks.jsxs)("div",{className:"control has-icons-left",children:[(0,Ks.jsx)("input",{className:"input",type:"text",placeholder:"Search customer name or ID...",value:n,onChange:e=>s(e.target.value),onKeyPress:e=>"Enter"===e.key&&Q()}),(0,Ks.jsx)("span",{className:"icon is-small is-left",children:(0,Ks.jsx)("i",{className:"fas fa-search"})})]})}),(0,Ks.jsxs)("div",{className:"filter-row",children:[(0,Ks.jsx)("div",{className:"filter-group",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:p,onChange:e=>g(e.target.value),children:[(0,Ks.jsx)("option",{value:"all",children:"All Barangays"}),w.map(e=>(0,Ks.jsx)("option",{value:e.barangay,children:e.barangay},e.barangay))]})})}),(0,Ks.jsx)("div",{className:"filter-group",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:v,onChange:e=>y(e.target.value),children:[(0,Ks.jsx)("option",{value:"all",children:"All Types"}),N.map(e=>(0,Ks.jsx)("option",{value:e.type,children:e.type},e.type))]})})}),(0,Ks.jsx)("div",{className:"filter-group",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:b,onChange:e=>x(e.target.value),children:[(0,Ks.jsx)("option",{value:"all",children:"All Status"}),(0,Ks.jsx)("option",{value:"Active",children:"Active"}),(0,Ks.jsx)("option",{value:"Disconnected",children:"Disconnected"})]})})}),(0,Ks.jsxs)("button",{className:"button is-primary ".concat(c?"is-loading":""),onClick:Q,disabled:c,children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-search"})}),(0,Ks.jsx)("span",{children:"Search"})]}),(0,Ks.jsxs)("button",{className:"button is-info ".concat(c?"is-loading":""),onClick:async()=>{u(!0),h(""),s("");const e=await sa.searchCustomers("");if(e.success){let t=e.data;"all"!==p&&(t=t.filter(e=>e.barangay===p)),"all"!==v&&(t=t.filter(e=>e.type===v)),"all"!==b&&(t=t.filter(e=>e.status===b)),i(t),0===t.length&&h("No customers found with current filters.")}else h("Error loading customers: ".concat(e.error));u(!1)},disabled:c,children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-list"})}),(0,Ks.jsx)("span",{children:"Browse All"})]})]})]}),r.length>0&&(0,Ks.jsxs)("div",{className:"box",style:{marginTop:"1rem",padding:"1.5rem"},children:[(0,Ks.jsxs)("h3",{className:"title is-6 mb-3",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-users"})}),"Search Results"]}),(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Customer ID"}),(0,Ks.jsx)("th",{children:"Name"}),(0,Ks.jsx)("th",{children:"Type"}),(0,Ks.jsx)("th",{children:"Barangay"}),(0,Ks.jsx)("th",{children:"Status"}),(0,Ks.jsx)("th",{width:"100",children:"Action"})]})}),(0,Ks.jsx)("tbody",{children:r.map(e=>(0,Ks.jsxs)("tr",{onClick:()=>Y(e),style:{cursor:"pointer"},title:"Click to select customer",children:[(0,Ks.jsx)("td",{children:e.customerid}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("strong",{children:e.name})}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag is-info is-light",children:e.type})}),(0,Ks.jsx)("td",{children:e.barangay}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag ".concat("Active"===e.status?"is-success":"is-danger"),children:e.status})}),(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("button",{className:"button is-small is-primary",onClick:t=>{t.stopPropagation(),Y(e)},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-arrow-right"})}),(0,Ks.jsx)("span",{children:"Select"})]})})]},e.customerid))})]})})]}),T.length>0&&(0,Ks.jsxs)("div",{className:"box",style:{marginTop:"1rem",padding:"1.5rem"},children:[(0,Ks.jsxs)("h3",{className:"title is-6 mb-3",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-clock"})}),"Recent Payments"]}),(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-narrow is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Date Paid"}),(0,Ks.jsx)("th",{children:"Customer ID"}),(0,Ks.jsx)("th",{children:"Customer Name"}),(0,Ks.jsx)("th",{children:"Barangay"}),(0,Ks.jsx)("th",{children:"Billed Month"}),(0,Ks.jsx)("th",{children:"Amount Paid"})]})}),(0,Ks.jsx)("tbody",{children:T.map(e=>{var t,n;return(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("span",{className:"icon-text",children:[(0,Ks.jsx)("span",{className:"icon has-text-success",children:(0,Ks.jsx)("i",{className:"fas fa-check-circle"})}),(0,Ks.jsx)("span",{children:new Date(e.datepaid).toLocaleDateString("en-PH",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})}),(0,Ks.jsx)("td",{className:"has-text-weight-bold",children:e.customerid}),(0,Ks.jsx)("td",{children:(null===(t=e.customer)||void 0===t?void 0:t.name)||"N/A"}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag is-light",children:(null===(n=e.customer)||void 0===n?void 0:n.barangay)||"N/A"})}),(0,Ks.jsx)("td",{children:new Date(e.billedmonth).toLocaleDateString("en-PH",{year:"numeric",month:"long"})}),(0,Ks.jsxs)("td",{className:"has-text-weight-bold has-text-success",children:["\u20b1",parseFloat(e.totalbillamount||0).toLocaleString("en-PH",{minimumFractionDigits:2})]})]},e.billid)})})]})})]}),0===r.length&&!c&&0===T.length&&(0,Ks.jsxs)("div",{className:"has-text-centered",style:{padding:"3rem"},children:[(0,Ks.jsx)("span",{className:"icon is-large has-text-grey-light",children:(0,Ks.jsx)("i",{className:"fas fa-search fa-3x"})}),(0,Ks.jsx)("p",{className:"has-text-grey mt-4",children:"Search for customers to process payments"})]})]}),"search"!==e&&J()&&(()=>{const e=J(),{customer:t,unpaidBills:n,paymentHistory:s,billsWithSurcharge:a,selectedBills:r}=e;return(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("div",{className:"box",style:{background:"#f5f5f5",marginBottom:"1rem"},children:(0,Ks.jsx)("div",{className:"level is-mobile",children:(0,Ks.jsxs)("div",{className:"level-left",children:[(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"heading",children:"Customer"}),(0,Ks.jsx)("p",{className:"title is-5",children:t.name})]})}),(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"heading",children:"ID"}),(0,Ks.jsx)("p",{className:"title is-6",children:t.customerid})]})}),(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"heading",children:"Type"}),(0,Ks.jsx)("p",{children:(0,Ks.jsx)("span",{className:"tag is-info",children:t.type})})]})}),(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"heading",children:"Barangay"}),(0,Ks.jsx)("p",{className:"title is-6",children:t.barangay})]})}),(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"heading",children:"Discount"}),(0,Ks.jsxs)("p",{className:"title is-6",children:[t.discount||0,"%"]})]})}),(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"heading",children:"Status"}),(0,Ks.jsx)("p",{children:(0,Ks.jsx)("span",{className:"tag ".concat("Active"===t.status?"is-success":"is-danger"),children:t.status})})]})}),(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("p",{className:"heading",children:"Credit Balance"}),(0,Ks.jsx)("p",{className:"title is-6 has-text-success",children:ee(e.creditBalance||0)})]})})]})})}),(0,Ks.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,Ks.jsxs)("h2",{className:"title is-5",children:[(0,Ks.jsx)("i",{className:"fas fa-file-invoice-dollar"})," Unpaid Bills",n.length>0&&(0,Ks.jsx)("span",{className:"tag is-danger ml-2",children:n.length})]}),c?(0,Ks.jsx)("div",{className:"has-text-centered",style:{padding:"2rem"},children:(0,Ks.jsx)("button",{className:"button is-loading is-large is-ghost"})}):0===n.length?(0,Ks.jsxs)("div",{className:"notification is-success is-light has-text-centered",children:[(0,Ks.jsx)("i",{className:"fas fa-check-circle fa-2x"}),(0,Ks.jsx)("p",{className:"mt-2",children:"No unpaid bills"})]}):(0,Ks.jsxs)(Ks.Fragment,{children:[(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{width:"50",children:(0,Ks.jsx)("label",{className:"checkbox",children:(0,Ks.jsx)("input",{type:"checkbox",checked:r.length===a.length&&a.length>0,onChange:e=>{e.target.checked?X(a.map(e=>e.billid)):X([])}})})}),(0,Ks.jsx)("th",{children:"Bill ID"}),(0,Ks.jsx)("th",{children:"Billing Month"}),(0,Ks.jsx)("th",{children:"Previous"}),(0,Ks.jsx)("th",{children:"Current"}),(0,Ks.jsx)("th",{children:"Consumption"}),(0,Ks.jsx)("th",{children:"Basic Amount"}),(0,Ks.jsx)("th",{children:"Surcharge"}),(0,Ks.jsx)("th",{children:"Discount"}),(0,Ks.jsx)("th",{children:"Total Bill"}),(0,Ks.jsx)("th",{children:"Status"})]})}),(0,Ks.jsx)("tbody",{children:a.map(e=>{const t=e.surchargeInfo&&e.surchargeInfo.daysOverdue>0;return(0,Ks.jsxs)("tr",{className:r.includes(e.billid)?"is-selected":"",children:[(0,Ks.jsx)("td",{children:(0,Ks.jsx)("label",{className:"checkbox",children:(0,Ks.jsx)("input",{type:"checkbox",checked:r.includes(e.billid),onChange:t=>{t.target.checked?X([...r,e.billid]):X(r.filter(t=>t!==e.billid))}})})}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("strong",{children:e.billid})}),(0,Ks.jsxs)("td",{children:[(0,Ks.jsx)("div",{children:te(e.billedmonth)}),t&&(0,Ks.jsxs)("small",{className:"has-text-danger",children:[(0,Ks.jsx)("i",{className:"fas fa-exclamation-triangle"})," ",e.surchargeInfo.daysOverdue," days overdue"]})]}),(0,Ks.jsx)("td",{children:e.previousreading||0}),(0,Ks.jsx)("td",{children:e.currentreading||0}),(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("strong",{children:[e.consumption," cu.m"]})}),(0,Ks.jsx)("td",{children:ee(e.basicamount)}),(0,Ks.jsx)("td",{children:e.surchargeInfo&&e.surchargeInfo.surchargeAmount>0?(0,Ks.jsx)("span",{className:"has-text-danger has-text-weight-bold",children:ee(e.surchargeInfo.surchargeAmount)}):(0,Ks.jsx)("span",{className:"has-text-grey",children:"-"})}),(0,Ks.jsx)("td",{className:"has-text-success",children:e.calculatedDiscountAmount>0?"-".concat(ee(e.calculatedDiscountAmount)):"-"}),(0,Ks.jsx)("td",{className:"has-text-weight-bold is-size-5",children:ee(e.calculatedTotal||e.totalbillamount)}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag ".concat("Unpaid"===e.paymentstatus?"is-danger":"Partial"===e.paymentstatus?"is-warning":"is-info"),children:e.paymentstatus})})]},e.billid)})}),(0,Ks.jsx)("tfoot",{children:(0,Ks.jsxs)("tr",{className:"has-background-light",children:[(0,Ks.jsx)("td",{className:"has-text-centered has-text-weight-bold",children:r.length}),(0,Ks.jsx)("td",{colSpan:"5",className:"has-text-right has-text-weight-bold",children:"Selected Bills:"}),(0,Ks.jsxs)("td",{className:"has-text-weight-bold",children:[(0,Ks.jsx)("div",{className:"heading",children:"Total Basic Amount"}),(0,Ks.jsx)("div",{className:"is-size-5",children:ee(a.filter(e=>r.includes(e.billid)).reduce((e,t)=>e+parseFloat(t.basicamount||0),0))})]}),(0,Ks.jsxs)("td",{className:"has-text-weight-bold",children:[(0,Ks.jsx)("div",{className:"heading",children:"Total Surcharge"}),(0,Ks.jsx)("div",{className:"is-size-5 has-text-danger",children:ee(a.filter(e=>r.includes(e.billid)).reduce((e,t)=>{var n;return e+parseFloat((null===(n=t.surchargeInfo)||void 0===n?void 0:n.surchargeAmount)||0)},0))})]}),(0,Ks.jsxs)("td",{className:"has-text-weight-bold",children:[(0,Ks.jsx)("div",{className:"heading",children:"Total Discount"}),(0,Ks.jsxs)("div",{className:"is-size-5 has-text-success",children:["-",ee(a.filter(e=>r.includes(e.billid)).reduce((e,t)=>e+parseFloat(t.calculatedDiscountAmount||0),0))]})]}),(0,Ks.jsxs)("td",{className:"has-text-weight-bold",children:[(0,Ks.jsx)("div",{className:"heading",children:"Grand Total"}),(0,Ks.jsx)("div",{className:"is-size-4 has-text-success",children:ee(a.filter(e=>r.includes(e.billid)).reduce((e,t)=>e+parseFloat(t.calculatedTotal||t.totalbillamount||0),0))})]}),(0,Ks.jsx)("td",{})]})})]})}),r.length>0&&(0,Ks.jsxs)("div",{className:"buttons is-right mt-3",children:[(0,Ks.jsxs)("button",{className:"button is-small is-light",onClick:()=>X([]),children:[(0,Ks.jsx)("span",{className:"icon is-small",children:(0,Ks.jsx)("i",{className:"fas fa-times"})}),(0,Ks.jsx)("span",{children:"Clear"})]}),(0,Ks.jsxs)("button",{className:"button is-success",onClick:()=>{const n=a.filter(e=>r.includes(e.billid)),s=n.reduce((e,t)=>e+parseFloat(t.calculatedTotal||t.totalbillamount||0),0),i=n.reduce((e,t)=>{var n;return e+parseFloat((null===(n=t.surchargeInfo)||void 0===n?void 0:n.surchargeAmount)||0)},0);L({bills:r,customerid:t.customerid,count:r.length,totalAmount:s,totalSurcharge:i,creditBalance:e.creditBalance||0}),B(""),I(!0)},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-check-circle"})}),(0,Ks.jsx)("span",{children:"Process Payment"})]})]})]})]}),(0,Ks.jsxs)("div",{style:{marginTop:"1.5rem"},children:[(0,Ks.jsxs)("h2",{className:"title is-5",children:[(0,Ks.jsx)("i",{className:"fas fa-history"})," Payment History",s.length>0&&(0,Ks.jsx)("span",{className:"tag is-info ml-2",children:s.length})]}),c?(0,Ks.jsx)("div",{className:"has-text-centered",style:{padding:"2rem"},children:(0,Ks.jsx)("button",{className:"button is-loading is-large is-ghost"})}):0===s.length?(0,Ks.jsxs)("div",{className:"notification is-light has-text-centered",children:[(0,Ks.jsx)("i",{className:"fas fa-history fa-2x has-text-grey-light"}),(0,Ks.jsx)("p",{className:"has-text-grey mt-2",children:"No payment history"})]}):(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Bill ID"}),(0,Ks.jsx)("th",{children:"Billing Month"}),(0,Ks.jsx)("th",{children:"Previous"}),(0,Ks.jsx)("th",{children:"Current"}),(0,Ks.jsx)("th",{children:"Consumption"}),(0,Ks.jsx)("th",{children:"Amount Paid"}),(0,Ks.jsx)("th",{children:"Date Paid"}),(0,Ks.jsx)("th",{children:"Paid By"}),(0,Ks.jsx)("th",{children:"Status"}),(0,Ks.jsx)("th",{width:"120",children:"Actions"})]})}),(0,Ks.jsx)("tbody",{children:s.map(e=>{return(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{children:(0,Ks.jsx)("strong",{children:e.billid})}),(0,Ks.jsx)("td",{children:te(e.billedmonth)}),(0,Ks.jsx)("td",{children:e.previousreading||0}),(0,Ks.jsx)("td",{children:e.currentreading||0}),(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("strong",{children:[e.consumption," cu.m"]})}),(0,Ks.jsx)("td",{className:"has-text-weight-bold",children:ee(e.totalbillamount)}),(0,Ks.jsx)("td",{children:(t=e.datepaid,t?new Date(t).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}):"N/A")}),(0,Ks.jsx)("td",{children:e.paidby}),(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("span",{className:"tag is-success",children:[(0,Ks.jsx)("i",{className:"fas fa-check"})," ",e.paymentstatus]})}),(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("button",{className:"button is-warning is-small",onClick:()=>{W(e),z(!0)},title:"Mark as Unpaid",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-undo"})}),(0,Ks.jsx)("span",{children:"Unpaid"})]})})]},e.billid);var t})})]})})]})]})})(),(0,Ks.jsx)(la,{isOpen:A&&null!==D,onClose:()=>{I(!1),L(null)},onConfirm:async function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!D)return;u(!0);const a=n-t,r=J();if(!r)return h("Unable to find customer data"),void u(!1);const i=r.billsWithSurcharge.filter(e=>D.bills.includes(e.billid)).map(e=>{var n;const a=s?0:(null===(n=e.surchargeInfo)||void 0===n?void 0:n.surchargeAmount)||0,r=parseFloat(e.basicamount||0),i=e.calculatedDiscountAmount||0,o=r+a-i;return{billid:e.billid,basicamount:r,surchargeamount:a,discountamount:i,totalbillamount:o,advancepaymentamount:t>0?t/D.bills.length:0}}),o=await sa.processPayment(i,"".concat(q.firstname," ").concat(q.lastname),e,a);if(o.success){let e="Successfully processed payment for ".concat(o.data.paidCount," bill(s)!");t>0&&(e+=" Credit of \u20b1".concat(t.toFixed(2)," was applied.")),n>0&&(e+=" New credit of \u20b1".concat(n.toFixed(2)," added to account.")),m(e),await Z(D.customerid),H(),$(),setTimeout(()=>m(""),5e3)}else h(o.error);u(!1),I(!1),L(null)},billCount:(null===D||void 0===D?void 0:D.count)||0,grandTotal:(null===D||void 0===D?void 0:D.totalAmount)||0,totalSurcharge:(null===D||void 0===D?void 0:D.totalSurcharge)||0,creditBalance:(null===D||void 0===D?void 0:D.creditBalance)||0,loading:c}),(0,Ks.jsx)(ia,{isOpen:F&&null!==M,onClose:()=>{z(!1),W(null)},onConfirm:async()=>{if(!M)return;u(!0);const e=await sa.markBillAsUnpaid(M.billid);e.success?(m("Bill #".concat(M.billid," marked as unpaid successfully!")),await Z(M.customerid),H(),$(),setTimeout(()=>m(""),3e3)):h(e.error),u(!1),z(!1),W(null)},title:"Mark Bill as Unpaid?",message:M?"Are you sure you want to mark Bill #".concat(M.billid," as unpaid?"):"",subMessage:"This will reverse the payment status. Use this only if the bill was accidentally marked as paid.",confirmText:"Mark as Unpaid",cancelText:"Cancel",type:"warning",loading:c})]})},ua={async getCustomersWithCredit(){try{const{data:e,error:t}=await qs.from("customers").select("customerid, name, barangay, type, status, credit_balance").gt("credit_balance",0).order("credit_balance",{ascending:!1}).range(0,999999);if(t)throw t;return{success:!0,data:e||[]}}catch(e){return console.error("Error getting customers with credit:",e),{success:!1,error:e.message,data:[]}}},async getCreditStats(){try{const{data:e,error:t}=await qs.from("customers").select("credit_balance").range(0,999999);if(t)throw t;const n=e.filter(e=>parseFloat(e.credit_balance||0)>0),s=e.reduce((e,t)=>e+parseFloat(t.credit_balance||0),0);return{success:!0,data:{totalCustomers:e.length,customersWithCredit:n.length,totalCreditAmount:s,averageCredit:n.length>0?s/n.length:0}}}catch(e){return console.error("Error getting credit stats:",e),{success:!1,error:e.message}}},async searchCustomers(e){try{let t=qs.from("customers").select("customerid, name, barangay, type, status, credit_balance").range(0,999999);if(e){t=/^\d+$/.test(e)?t.or("name.ilike.%".concat(e,"%,customerid.eq.").concat(e)):t.ilike("name","%".concat(e,"%"))}t=t.order("name",{ascending:!0});const{data:n,error:s}=await t;if(s)throw s;return{success:!0,data:n||[]}}catch(t){return console.error("Error searching customers:",t),{success:!1,error:t.message,data:[]}}},async adjustCredit(e,t,n,s){try{const{data:a,error:r}=await qs.from("customers").select("credit_balance, name").eq("customerid",e).single();if(r)throw r;const i=parseFloat(a.credit_balance||0);let o;if("add"===n)o=i+parseFloat(t);else{if("deduct"!==n)return{success:!1,error:"Invalid adjustment type"};if(o=i-parseFloat(t),o<0)return{success:!1,error:"Cannot deduct more than available credit balance"}}const{error:l}=await qs.from("customers").update({credit_balance:o}).eq("customerid",e);if(l)throw l;return{success:!0,data:{customerid:e,customerName:a.name,previousBalance:i,adjustment:"add"===n?t:-t,newBalance:o,remarks:s}}}catch(a){return console.error("Error adjusting credit:",a),{success:!1,error:a.message}}},async getUnpaidBills(e){try{const{data:t,error:n}=await qs.from("bills").select("*").eq("customerid",e).eq("paymentstatus","Unpaid").order("billedmonth",{ascending:!0}).range(0,999999);if(n)throw n;return{success:!0,data:t||[]}}catch(t){return console.error("Error getting unpaid bills:",t),{success:!1,error:t.message,data:[]}}},async applyCreditToBills(e,t,n,s){try{const{data:a,error:r}=await qs.from("customers").select("credit_balance").eq("customerid",e).single();if(r)throw r;const i=parseFloat(a.credit_balance||0);if(n>i)return{success:!1,error:"Insufficient credit balance"};const o=t.map(e=>{let{billid:t,amount:n}=e;return qs.from("bills").update({paymentstatus:"Paid",advancepaymentamount:n,paidby:s,datepaid:(new Date).toISOString()}).eq("billid",t)}),l=await Promise.all(o);if(l.some(e=>e.error))throw new Error("Some bills failed to update");const c=i-n;return await qs.from("customers").update({credit_balance:c}).eq("customerid",e),{success:!0,data:{billsPaid:t.length,creditUsed:n,remainingCredit:c}}}catch(a){return console.error("Error applying credit to bills:",a),{success:!1,error:a.message}}}},da=()=>{const[e,t]=(0,a.useState)("overview"),[n,s]=(0,a.useState)([]),[r,i]=(0,a.useState)({totalCustomers:0,customersWithCredit:0,totalCreditAmount:0,averageCredit:0}),[o,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[d,h]=(0,a.useState)(""),[f,m]=(0,a.useState)(""),[p,g]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null),[b,x]=(0,a.useState)("add"),[w,j]=(0,a.useState)(""),[N,S]=(0,a.useState)(""),[k,_]=(0,a.useState)(!1),[C,E]=(0,a.useState)([]),[T,P]=(0,a.useState)([]),[O,R]=(0,a.useState)(!1),[A,I]=(0,a.useState)(null),D=Vs.getUserSession();(0,a.useEffect)(()=>{L()},[]),(0,a.useEffect)(()=>{if(o.trim()){const e=setTimeout(()=>{U()},500);return()=>clearTimeout(e)}L()},[o]);const L=async()=>{u(!0);const[e,t]=await Promise.all([ua.getCustomersWithCredit(),ua.getCreditStats()]);e.success?s(e.data):h(e.error),t.success&&i(t.data),u(!1)},U=async()=>{u(!0);const e=await ua.searchCustomers(o);e.success?s(e.data):h(e.error),u(!1)},B=e=>"\u20b1".concat(parseFloat(e||0).toLocaleString("en-PH",{minimumFractionDigits:2}));return(0,Ks.jsxs)("div",{className:"credit-management-page",style:{padding:"0"},children:[(0,Ks.jsx)("div",{className:"level mb-3",children:(0,Ks.jsx)("div",{className:"level-left",children:(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("h1",{className:"title is-4 mb-0",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-piggy-bank"})}),"Credit Management"]})})})}),d&&(0,Ks.jsxs)("div",{className:"notification is-danger is-light py-3",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>h("")}),d]}),f&&(0,Ks.jsxs)("div",{className:"notification is-success is-light py-3",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>m("")}),f]}),(0,Ks.jsxs)("div",{className:"columns mb-3",children:[(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-info-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Customers"}),(0,Ks.jsx)("p",{className:"title is-4",children:r.totalCustomers.toLocaleString()})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-success-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Customers with Credit"}),(0,Ks.jsx)("p",{className:"title is-4",children:r.customersWithCredit.toLocaleString()})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-warning-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Credit Amount"}),(0,Ks.jsx)("p",{className:"title is-4",children:B(r.totalCreditAmount)})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-primary-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Average Credit"}),(0,Ks.jsx)("p",{className:"title is-4",children:B(r.averageCredit)})]})})]}),(0,Ks.jsx)("div",{className:"box",style:{marginBottom:"1rem",padding:"1.5rem"},children:(0,Ks.jsxs)("div",{className:"field has-addons",children:[(0,Ks.jsx)("div",{className:"control is-expanded",children:(0,Ks.jsx)("input",{className:"input",type:"text",placeholder:"Search customer by name or ID...",value:o,onChange:e=>l(e.target.value)})}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsxs)("button",{className:"button is-primary ".concat(c?"is-loading":""),onClick:U,children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-search"})}),(0,Ks.jsx)("span",{children:"Search"})]})})]})}),(0,Ks.jsx)("div",{className:"box",style:{padding:"0"},children:c&&0===n.length?(0,Ks.jsx)("div",{className:"has-text-centered",style:{padding:"3rem"},children:(0,Ks.jsx)("button",{className:"button is-loading is-large is-ghost"})}):0===n.length?(0,Ks.jsxs)("div",{className:"has-text-centered",style:{padding:"3rem"},children:[(0,Ks.jsx)("span",{className:"icon is-large has-text-grey-light",children:(0,Ks.jsx)("i",{className:"fas fa-piggy-bank fa-3x"})}),(0,Ks.jsx)("p",{className:"has-text-grey mt-4",children:"No customers found"})]}):(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Customer ID"}),(0,Ks.jsx)("th",{children:"Customer Name"}),(0,Ks.jsx)("th",{children:"Barangay"}),(0,Ks.jsx)("th",{children:"Type"}),(0,Ks.jsx)("th",{children:"Status"}),(0,Ks.jsx)("th",{children:"Credit Balance"}),(0,Ks.jsx)("th",{width:"200",children:"Actions"})]})}),(0,Ks.jsx)("tbody",{children:n.map(e=>(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{className:"has-text-weight-bold",children:e.customerid}),(0,Ks.jsx)("td",{children:e.name}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag is-light",children:e.barangay})}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag is-info is-light",children:e.type})}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag ".concat("Active"===e.status?"is-success":"is-warning"," is-light"),children:e.status})}),(0,Ks.jsx)("td",{className:"has-text-weight-bold has-text-success",children:B(e.credit_balance)}),(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("div",{className:"buttons are-small",children:[(0,Ks.jsxs)("button",{className:"button is-info is-small",onClick:()=>(e=>{y(e),x("add"),j(""),S(""),g(!0)})(e),title:"Adjust Credit",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-edit"})}),(0,Ks.jsx)("span",{children:"Adjust"})]}),parseFloat(e.credit_balance||0)>0&&(0,Ks.jsxs)("button",{className:"button is-success is-small",onClick:()=>(async e=>{y(e),u(!0);const t=await ua.getUnpaidBills(e.customerid);t.success?(E(t.data),P([]),_(!0)):h(t.error),u(!1)})(e),title:"Apply Credit to Bills",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-check-circle"})}),(0,Ks.jsx)("span",{children:"Apply"})]})]})})]},e.customerid))})]})})}),p&&v&&(0,Ks.jsxs)("div",{className:"modal is-active",children:[(0,Ks.jsx)("div",{className:"modal-background",onClick:()=>g(!1)}),(0,Ks.jsxs)("div",{className:"modal-card",children:[(0,Ks.jsxs)("header",{className:"modal-card-head",children:[(0,Ks.jsxs)("p",{className:"modal-card-title",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-coins"})}),"Adjust Credit - ",v.name]}),(0,Ks.jsx)("button",{className:"delete",onClick:()=>g(!1)})]}),(0,Ks.jsxs)("section",{className:"modal-card-body",children:[(0,Ks.jsxs)("div",{className:"notification is-info is-light mb-3",children:[(0,Ks.jsx)("strong",{children:"Current Credit Balance:"})," ",B(v.credit_balance)]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Adjustment Type"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:b,onChange:e=>x(e.target.value),children:[(0,Ks.jsx)("option",{value:"add",children:"Add Credit"}),(0,Ks.jsx)("option",{value:"deduct",children:"Deduct Credit"})]})})})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsxs)("label",{className:"label",children:["Amount ",(0,Ks.jsx)("span",{className:"has-text-danger",children:"*"})]}),(0,Ks.jsxs)("div",{className:"control has-icons-left",children:[(0,Ks.jsx)("input",{className:"input",type:"number",step:"0.01",placeholder:"Enter amount",value:w,onChange:e=>j(e.target.value)}),(0,Ks.jsx)("span",{className:"icon is-small is-left",children:(0,Ks.jsx)("i",{className:"fas fa-peso-sign"})})]})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Remarks"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("textarea",{className:"textarea",placeholder:"Enter remarks (optional)",value:N,onChange:e=>S(e.target.value),rows:"3"})})]}),w&&(0,Ks.jsxs)("div",{className:"notification ".concat("add"===b?"is-success":"is-warning"," is-light"),children:[(0,Ks.jsx)("strong",{children:"New Balance:"})," ",B(parseFloat(v.credit_balance||0)+("add"===b?1:-1)*parseFloat(w||0))]})]}),(0,Ks.jsxs)("footer",{className:"modal-card-foot",children:[(0,Ks.jsxs)("button",{className:"button is-success ".concat(c?"is-loading":""),onClick:async()=>{if(!v||!w)return void h("Please fill in all required fields");const e=parseFloat(w);if(isNaN(e)||e<=0)return void h("Please enter a valid amount");u(!0);const t=await ua.adjustCredit(v.customerid,e,b,N);t.success?(m("Credit ".concat("add"===b?"added":"deducted"," successfully!")),g(!1),L(),setTimeout(()=>m(""),3e3)):h(t.error),u(!1)},disabled:c,children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-check"})}),(0,Ks.jsx)("span",{children:"Confirm Adjustment"})]}),(0,Ks.jsx)("button",{className:"button",onClick:()=>g(!1),children:"Cancel"})]})]})]}),k&&v&&(0,Ks.jsxs)("div",{className:"modal is-active",children:[(0,Ks.jsx)("div",{className:"modal-background",onClick:()=>_(!1)}),(0,Ks.jsxs)("div",{className:"modal-card",style:{width:"900px"},children:[(0,Ks.jsxs)("header",{className:"modal-card-head",children:[(0,Ks.jsxs)("p",{className:"modal-card-title",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-money-check-alt"})}),"Apply Credit - ",v.name]}),(0,Ks.jsx)("button",{className:"delete",onClick:()=>_(!1)})]}),(0,Ks.jsxs)("section",{className:"modal-card-body",children:[(0,Ks.jsx)("div",{className:"notification is-info is-light mb-3",children:(0,Ks.jsxs)("div",{className:"columns is-mobile",children:[(0,Ks.jsxs)("div",{className:"column",children:[(0,Ks.jsx)("strong",{children:"Available Credit:"})," ",B(v.credit_balance)]}),(0,Ks.jsxs)("div",{className:"column",children:[(0,Ks.jsx)("strong",{children:"Selected Total:"})," ",B(T.reduce((e,t)=>e+t.amount,0))]})]})}),0===C.length?(0,Ks.jsxs)("div",{className:"has-text-centered",style:{padding:"2rem"},children:[(0,Ks.jsx)("span",{className:"icon is-large has-text-grey-light",children:(0,Ks.jsx)("i",{className:"fas fa-check-circle fa-2x"})}),(0,Ks.jsx)("p",{className:"has-text-grey mt-3",children:"No unpaid bills found"})]}):(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable is-narrow",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{width:"50"}),(0,Ks.jsx)("th",{children:"Bill ID"}),(0,Ks.jsx)("th",{children:"Billed Month"}),(0,Ks.jsx)("th",{children:"Consumption"}),(0,Ks.jsx)("th",{children:"Amount"})]})}),(0,Ks.jsx)("tbody",{children:C.map(e=>{return(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{children:(0,Ks.jsx)("input",{type:"checkbox",checked:T.some(t=>t.billid===e.billid),onChange:()=>(e=>{const t=parseFloat(e.totalbillamount||0),n=T.findIndex(t=>t.billid===e.billid);P(n>=0?t=>t.filter(t=>t.billid!==e.billid):n=>[...n,{billid:e.billid,amount:t}])})(e)})}),(0,Ks.jsx)("td",{children:e.billid}),(0,Ks.jsx)("td",{children:(t=e.billedmonth,new Date(t).toLocaleDateString("en-PH",{year:"numeric",month:"long"}))}),(0,Ks.jsxs)("td",{children:[e.consumption," cu.m"]}),(0,Ks.jsx)("td",{className:"has-text-weight-bold",children:B(e.totalbillamount)})]},e.billid);var t})})]})})]}),(0,Ks.jsxs)("footer",{className:"modal-card-foot",children:[(0,Ks.jsxs)("button",{className:"button is-success ".concat(c?"is-loading":""),onClick:async()=>{if(0===T.length)return void h("Please select at least one bill");const e=T.reduce((e,t)=>e+parseFloat(t.amount),0);if(e>parseFloat(v.credit_balance||0))return void h("Total amount exceeds available credit");u(!0);const t=await ua.applyCreditToBills(v.customerid,T,e,"".concat(D.firstname," ").concat(D.lastname));t.success?(m("Credit applied to ".concat(t.data.billsPaid," bill(s) successfully!")),_(!1),L(),setTimeout(()=>m(""),3e3)):h(t.error),u(!1)},disabled:c||0===T.length,children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-check-circle"})}),(0,Ks.jsxs)("span",{children:["Apply Credit to ",T.length," Bill(s)"]})]}),(0,Ks.jsx)("button",{className:"button",onClick:()=>_(!1),children:"Cancel"})]})]})]})]})},ha={async getWaterUsageReport(e,t){try{const{data:n,error:s}=await qs.from("bills").select("billedmonth, consumption, customerid, customername, barangay").gte("billedmonth",e).lte("billedmonth",t).order("billedmonth",{ascending:!0}).range(0,999999);if(s)throw s;const a=n.reduce((e,t)=>e+parseFloat(t.consumption||0),0),r=n.length>0?a/n.length:0,i={};n.forEach(e=>{const t=e.billedmonth;i[t]||(i[t]={month:t,consumption:0,count:0}),i[t].consumption+=parseFloat(e.consumption||0),i[t].count++});const o={};return n.forEach(e=>{const t=e.barangay||"Unknown";o[t]||(o[t]={barangay:t,consumption:0,count:0}),o[t].consumption+=parseFloat(e.consumption||0),o[t].count++}),{success:!0,data:{totalConsumption:a,averageConsumption:r,billCount:n.length,byMonth:Object.values(i),byBarangay:Object.values(o).sort((e,t)=>t.consumption-e.consumption),rawData:n}}}catch(n){return console.error("Error getting water usage report:",n),{success:!1,error:n.message}}},async getRevenueReport(e,t){try{const{data:n,error:s}=await qs.from("bills").select("billedmonth, totalbillamount, paymentstatus, datepaid, basicamount, surchargeamount, discountamount, barangay").gte("billedmonth",e).lte("billedmonth",t).range(0,999999);if(s)throw s;const a=n.reduce((e,t)=>e+parseFloat(t.totalbillamount||0),0),r=n.filter(e=>"Paid"===e.paymentstatus).reduce((e,t)=>e+parseFloat(t.totalbillamount||0),0),i=n.filter(e=>"Unpaid"===e.paymentstatus).reduce((e,t)=>e+parseFloat(t.totalbillamount||0),0),o=n.reduce((e,t)=>e+parseFloat(t.surchargeamount||0),0),l=n.reduce((e,t)=>e+parseFloat(t.discountamount||0),0),c=n.filter(e=>"Paid"===e.paymentstatus).length,u=n.filter(e=>"Unpaid"===e.paymentstatus).length,d=n.length>0?c/n.length*100:0,h={};n.forEach(e=>{const t=e.billedmonth;h[t]||(h[t]={month:t,billed:0,paid:0,unpaid:0}),h[t].billed+=parseFloat(e.totalbillamount||0),"Paid"===e.paymentstatus?h[t].paid+=parseFloat(e.totalbillamount||0):h[t].unpaid+=parseFloat(e.totalbillamount||0)});const f={};return n.forEach(e=>{const t=e.barangay||"Unknown";f[t]||(f[t]={barangay:t,billed:0,paid:0,unpaid:0,billCount:0}),f[t].billed+=parseFloat(e.totalbillamount||0),f[t].billCount++,"Paid"===e.paymentstatus?f[t].paid+=parseFloat(e.totalbillamount||0):f[t].unpaid+=parseFloat(e.totalbillamount||0)}),{success:!0,data:{totalBilled:a,totalPaid:r,totalUnpaid:i,totalSurcharge:o,totalDiscount:l,paidCount:c,unpaidCount:u,collectionRate:d,byMonth:Object.values(h),byBarangay:Object.values(f).sort((e,t)=>t.billed-e.billed)}}}catch(n){return console.error("Error getting revenue report:",n),{success:!1,error:n.message}}},async getCollectionReport(e,t){try{const{data:n,error:s}=await qs.from("bills").select("datepaid, totalbillamount, paidby, customername, barangay").eq("paymentstatus","Paid").gte("datepaid",e).lte("datepaid",t).order("datepaid",{ascending:!0}).range(0,999999);if(s)throw s;const a=n.reduce((e,t)=>e+parseFloat(t.totalbillamount||0),0),r={};n.forEach(e=>{const t=e.datepaid.split("T")[0];r[t]||(r[t]={date:t,amount:0,count:0}),r[t].amount+=parseFloat(e.totalbillamount||0),r[t].count++});const i={};return n.forEach(e=>{const t=e.paidby||"Unknown";i[t]||(i[t]={collector:t,amount:0,count:0}),i[t].amount+=parseFloat(e.totalbillamount||0),i[t].count++}),{success:!0,data:{totalCollected:a,collectionCount:n.length,byDate:Object.values(r),byCollector:Object.values(i).sort((e,t)=>t.amount-e.amount)}}}catch(n){return console.error("Error getting collection report:",n),{success:!1,error:n.message}}},async getTopConsumers(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{const{data:s,error:a}=await qs.from("bills").select("customerid, customername, consumption, barangay").gte("billedmonth",e).lte("billedmonth",t).range(0,999999);if(a)throw a;const r={};s.forEach(e=>{const t=e.customerid;r[t]||(r[t]={customerid:t,customername:e.customername,barangay:e.barangay,totalConsumption:0,billCount:0}),r[t].totalConsumption+=parseFloat(e.consumption||0),r[t].billCount++});return{success:!0,data:Object.values(r).sort((e,t)=>t.totalConsumption-e.totalConsumption).slice(0,n)}}catch(s){return console.error("Error getting top consumers:",s),{success:!1,error:s.message}}}},fa=()=>{const[e,t]=(0,a.useState)("water"),[n,s]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(null),[f,m]=(0,a.useState)(null),[p,g]=(0,a.useState)(null),[v,y]=(0,a.useState)([]);(0,a.useEffect)(()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0);s(t.toISOString().split("T")[0]),i(n.toISOString().split("T")[0])},[]),(0,a.useEffect)(()=>{n&&r&&b()},[n,r]);const b=async()=>{l(!0),u("");try{const[e,t,s,a]=await Promise.all([ha.getWaterUsageReport(n,r),ha.getRevenueReport(n,r),ha.getCollectionReport(n,r),ha.getTopConsumers(n,r,10)]);e.success&&h(e.data),t.success&&m(t.data),s.success&&g(s.data),a.success&&y(a.data),e.success&&t.success&&s.success||u("Some reports failed to load")}catch(e){u("Failed to load reports")}l(!1)},x=e=>"\u20b1".concat(parseFloat(e||0).toLocaleString("en-PH",{minimumFractionDigits:2})),w=e=>parseFloat(e||0).toLocaleString("en-PH",{minimumFractionDigits:2}),j=e=>new Date(e).toLocaleDateString("en-PH",{year:"numeric",month:"long"}),N=(e,t)=>{const s=e.map(e=>Object.values(e).join(",")).join("\n"),a=new Blob([s],{type:"text/csv"}),i=window.URL.createObjectURL(a),o=document.createElement("a");o.href=i,o.download="".concat(t,"_").concat(n,"_").concat(r,".csv"),o.click(),window.URL.revokeObjectURL(i)};return(0,Ks.jsxs)("div",{className:"reports-page",style:{padding:"0"},children:[(0,Ks.jsxs)("div",{className:"level mb-3",children:[(0,Ks.jsx)("div",{className:"level-left",children:(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("h1",{className:"title is-4 mb-0",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-chart-bar"})}),"Reports & Analytics"]})})}),(0,Ks.jsx)("div",{className:"level-right",children:(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("button",{className:"button is-info",onClick:b,disabled:o,children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-sync"})}),(0,Ks.jsx)("span",{children:"Refresh"})]})})})]}),c&&(0,Ks.jsxs)("div",{className:"notification is-danger is-light py-3",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>u("")}),c]}),(0,Ks.jsx)("div",{className:"box",style:{marginBottom:"1rem",padding:"1.5rem"},children:(0,Ks.jsxs)("div",{className:"columns",children:[(0,Ks.jsx)("div",{className:"column is-4",children:(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Start Date"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("input",{className:"input",type:"date",value:n,onChange:e=>s(e.target.value)})})]})}),(0,Ks.jsx)("div",{className:"column is-4",children:(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"End Date"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("input",{className:"input",type:"date",value:r,onChange:e=>i(e.target.value)})})]})}),(0,Ks.jsx)("div",{className:"column is-4",children:(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"\xa0"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsxs)("div",{className:"buttons",children:[(0,Ks.jsx)("button",{className:"button is-light is-small",onClick:()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0);s(t.toISOString().split("T")[0]),i(n.toISOString().split("T")[0])},children:"This Month"}),(0,Ks.jsx)("button",{className:"button is-light is-small",onClick:()=>{const e=new Date,t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),11,31);s(t.toISOString().split("T")[0]),i(n.toISOString().split("T")[0])},children:"This Year"})]})})]})})]})}),(0,Ks.jsx)("div",{className:"tabs is-boxed",children:(0,Ks.jsxs)("ul",{children:[(0,Ks.jsx)("li",{className:"water"===e?"is-active":"",children:(0,Ks.jsxs)("a",{onClick:()=>t("water"),children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-tint"})}),(0,Ks.jsx)("span",{children:"Water Usage"})]})}),(0,Ks.jsx)("li",{className:"revenue"===e?"is-active":"",children:(0,Ks.jsxs)("a",{onClick:()=>t("revenue"),children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-dollar-sign"})}),(0,Ks.jsx)("span",{children:"Revenue"})]})}),(0,Ks.jsx)("li",{className:"collections"===e?"is-active":"",children:(0,Ks.jsxs)("a",{onClick:()=>t("collections"),children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-hand-holding-usd"})}),(0,Ks.jsx)("span",{children:"Collections"})]})})]})}),o?(0,Ks.jsxs)("div",{className:"has-text-centered",style:{padding:"3rem"},children:[(0,Ks.jsx)("button",{className:"button is-loading is-large is-ghost"}),(0,Ks.jsx)("p",{className:"has-text-grey mt-3",children:"Loading reports..."})]}):(0,Ks.jsxs)(Ks.Fragment,{children:["water"===e&&d&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("div",{className:"columns mb-3",children:[(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-info-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Consumption"}),(0,Ks.jsxs)("p",{className:"title is-4",children:[w(d.totalConsumption)," cu.m"]})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-success-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Average Consumption"}),(0,Ks.jsxs)("p",{className:"title is-4",children:[w(d.averageConsumption)," cu.m"]})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-warning-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Bills"}),(0,Ks.jsx)("p",{className:"title is-4",children:d.billCount.toLocaleString()})]})})]}),(0,Ks.jsxs)("div",{className:"box",style:{marginBottom:"1rem"},children:[(0,Ks.jsxs)("div",{className:"level",children:[(0,Ks.jsx)("div",{className:"level-left",children:(0,Ks.jsx)("h2",{className:"title is-5 mb-3",children:"Monthly Consumption"})}),(0,Ks.jsx)("div",{className:"level-right",children:(0,Ks.jsxs)("button",{className:"button is-small is-info",onClick:()=>N(d.byMonth,"monthly_consumption"),children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-download"})}),(0,Ks.jsx)("span",{children:"Export"})]})})]}),(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Month"}),(0,Ks.jsx)("th",{children:"Total Consumption"}),(0,Ks.jsx)("th",{children:"Bill Count"}),(0,Ks.jsx)("th",{children:"Average"})]})}),(0,Ks.jsx)("tbody",{children:d.byMonth.map(e=>(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{children:j(e.month)}),(0,Ks.jsxs)("td",{className:"has-text-weight-bold",children:[w(e.consumption)," cu.m"]}),(0,Ks.jsx)("td",{children:e.count.toLocaleString()}),(0,Ks.jsxs)("td",{children:[w(e.consumption/e.count)," cu.m"]})]},e.month))})]})})]}),(0,Ks.jsxs)("div",{className:"box",style:{marginBottom:"1rem"},children:[(0,Ks.jsx)("h2",{className:"title is-5 mb-3",children:"Consumption by Barangay"}),(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Barangay"}),(0,Ks.jsx)("th",{children:"Total Consumption"}),(0,Ks.jsx)("th",{children:"Customer Count"}),(0,Ks.jsx)("th",{children:"Average per Customer"})]})}),(0,Ks.jsx)("tbody",{children:d.byBarangay.map(e=>(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{className:"has-text-weight-bold",children:e.barangay}),(0,Ks.jsxs)("td",{children:[w(e.consumption)," cu.m"]}),(0,Ks.jsx)("td",{children:e.count.toLocaleString()}),(0,Ks.jsxs)("td",{children:[w(e.consumption/e.count)," cu.m"]})]},e.barangay))})]})})]}),(0,Ks.jsxs)("div",{className:"box",children:[(0,Ks.jsx)("h2",{className:"title is-5 mb-3",children:"Top 10 Consumers"}),(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"#"}),(0,Ks.jsx)("th",{children:"Customer ID"}),(0,Ks.jsx)("th",{children:"Customer Name"}),(0,Ks.jsx)("th",{children:"Barangay"}),(0,Ks.jsx)("th",{children:"Total Consumption"}),(0,Ks.jsx)("th",{children:"Average per Bill"})]})}),(0,Ks.jsx)("tbody",{children:v.map((e,t)=>(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{className:"has-text-weight-bold",children:t+1}),(0,Ks.jsx)("td",{children:e.customerid}),(0,Ks.jsx)("td",{children:e.customername}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag is-light",children:e.barangay})}),(0,Ks.jsxs)("td",{className:"has-text-weight-bold has-text-danger",children:[w(e.totalConsumption)," cu.m"]}),(0,Ks.jsxs)("td",{children:[w(e.totalConsumption/e.billCount)," cu.m"]})]},e.customerid))})]})})]})]}),"revenue"===e&&f&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("div",{className:"columns mb-3",children:[(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-info-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Billed"}),(0,Ks.jsx)("p",{className:"title is-4",children:x(f.totalBilled)})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-success-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Paid"}),(0,Ks.jsx)("p",{className:"title is-4",children:x(f.totalPaid)})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-danger-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Unpaid"}),(0,Ks.jsx)("p",{className:"title is-4",children:x(f.totalUnpaid)})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-primary-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Collection Rate"}),(0,Ks.jsxs)("p",{className:"title is-4",children:[f.collectionRate.toFixed(1),"%"]})]})})]}),(0,Ks.jsxs)("div",{className:"columns mb-3",children:[(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-warning-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Surcharges"}),(0,Ks.jsx)("p",{className:"title is-5",children:x(f.totalSurcharge)})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-success-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Discounts"}),(0,Ks.jsx)("p",{className:"title is-5",children:x(f.totalDiscount)})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-info-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Paid Bills"}),(0,Ks.jsx)("p",{className:"title is-5",children:f.paidCount.toLocaleString()})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-danger-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Unpaid Bills"}),(0,Ks.jsx)("p",{className:"title is-5",children:f.unpaidCount.toLocaleString()})]})})]}),(0,Ks.jsxs)("div",{className:"box",style:{marginBottom:"1rem"},children:[(0,Ks.jsxs)("div",{className:"level",children:[(0,Ks.jsx)("div",{className:"level-left",children:(0,Ks.jsx)("h2",{className:"title is-5 mb-3",children:"Monthly Revenue"})}),(0,Ks.jsx)("div",{className:"level-right",children:(0,Ks.jsxs)("button",{className:"button is-small is-info",onClick:()=>N(f.byMonth,"monthly_revenue"),children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-download"})}),(0,Ks.jsx)("span",{children:"Export"})]})})]}),(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Month"}),(0,Ks.jsx)("th",{children:"Billed Amount"}),(0,Ks.jsx)("th",{children:"Paid Amount"}),(0,Ks.jsx)("th",{children:"Unpaid Amount"}),(0,Ks.jsx)("th",{children:"Collection %"})]})}),(0,Ks.jsx)("tbody",{children:f.byMonth.map(e=>(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{children:j(e.month)}),(0,Ks.jsx)("td",{children:x(e.billed)}),(0,Ks.jsx)("td",{className:"has-text-success has-text-weight-bold",children:x(e.paid)}),(0,Ks.jsx)("td",{className:"has-text-danger has-text-weight-bold",children:x(e.unpaid)}),(0,Ks.jsxs)("td",{children:[e.billed>0?(e.paid/e.billed*100).toFixed(1):0,"%"]})]},e.month))})]})})]}),(0,Ks.jsxs)("div",{className:"box",children:[(0,Ks.jsx)("h2",{className:"title is-5 mb-3",children:"Revenue by Barangay"}),(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Barangay"}),(0,Ks.jsx)("th",{children:"Bills"}),(0,Ks.jsx)("th",{children:"Billed Amount"}),(0,Ks.jsx)("th",{children:"Paid Amount"}),(0,Ks.jsx)("th",{children:"Unpaid Amount"}),(0,Ks.jsx)("th",{children:"Collection %"})]})}),(0,Ks.jsx)("tbody",{children:f.byBarangay.map(e=>(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{className:"has-text-weight-bold",children:e.barangay}),(0,Ks.jsx)("td",{children:e.billCount.toLocaleString()}),(0,Ks.jsx)("td",{children:x(e.billed)}),(0,Ks.jsx)("td",{className:"has-text-success",children:x(e.paid)}),(0,Ks.jsx)("td",{className:"has-text-danger",children:x(e.unpaid)}),(0,Ks.jsxs)("td",{children:[e.billed>0?(e.paid/e.billed*100).toFixed(1):0,"%"]})]},e.barangay))})]})})]})]}),"collections"===e&&p&&(0,Ks.jsxs)("div",{children:[(0,Ks.jsxs)("div",{className:"columns mb-3",children:[(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-success-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Total Collected"}),(0,Ks.jsx)("p",{className:"title is-4",children:x(p.totalCollected)})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-info-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Collection Count"}),(0,Ks.jsx)("p",{className:"title is-4",children:p.collectionCount.toLocaleString()})]})}),(0,Ks.jsx)("div",{className:"column",children:(0,Ks.jsxs)("div",{className:"box has-background-primary-light",children:[(0,Ks.jsx)("p",{className:"heading",children:"Average per Collection"}),(0,Ks.jsx)("p",{className:"title is-4",children:x(p.totalCollected/p.collectionCount)})]})})]}),(0,Ks.jsxs)("div",{className:"box",style:{marginBottom:"1rem"},children:[(0,Ks.jsxs)("div",{className:"level",children:[(0,Ks.jsx)("div",{className:"level-left",children:(0,Ks.jsx)("h2",{className:"title is-5 mb-3",children:"Daily Collections"})}),(0,Ks.jsx)("div",{className:"level-right",children:(0,Ks.jsxs)("button",{className:"button is-small is-info",onClick:()=>N(p.byDate,"daily_collections"),children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-download"})}),(0,Ks.jsx)("span",{children:"Export"})]})})]}),(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Date"}),(0,Ks.jsx)("th",{children:"Amount Collected"}),(0,Ks.jsx)("th",{children:"Collection Count"}),(0,Ks.jsx)("th",{children:"Average"})]})}),(0,Ks.jsx)("tbody",{children:p.byDate.map(e=>(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{children:new Date(e.date).toLocaleDateString("en-PH")}),(0,Ks.jsx)("td",{className:"has-text-weight-bold has-text-success",children:x(e.amount)}),(0,Ks.jsx)("td",{children:e.count.toLocaleString()}),(0,Ks.jsx)("td",{children:x(e.amount/e.count)})]},e.date))})]})})]}),(0,Ks.jsxs)("div",{className:"box",children:[(0,Ks.jsx)("h2",{className:"title is-5 mb-3",children:"Collections by Collector"}),(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Collector"}),(0,Ks.jsx)("th",{children:"Amount Collected"}),(0,Ks.jsx)("th",{children:"Collection Count"}),(0,Ks.jsx)("th",{children:"Average per Collection"})]})}),(0,Ks.jsx)("tbody",{children:p.byCollector.map(e=>(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{className:"has-text-weight-bold",children:e.collector}),(0,Ks.jsx)("td",{className:"has-text-success has-text-weight-bold",children:x(e.amount)}),(0,Ks.jsx)("td",{children:e.count.toLocaleString()}),(0,Ks.jsx)("td",{children:x(e.amount/e.count)})]},e.collector))})]})})]})]})]})]})},ma={async getAllUsers(){try{const{data:e,error:t}=await qs.from("users").select("*").order("firstname",{ascending:!0}).limit(1e4);if(t)throw t;return{success:!0,data:e||[]}}catch(e){return console.error("Error getting users:",e),{success:!1,error:e.message,data:[]}}},async searchUsers(e){try{const{data:t,error:n}=await qs.from("users").select("*").or("firstname.ilike.%".concat(e,"%,lastname.ilike.%").concat(e,"%")).order("firstname",{ascending:!0}).limit(1e4);if(n)throw n;return{success:!0,data:t||[]}}catch(t){return console.error("Error searching users:",t),{success:!1,error:t.message,data:[]}}},async addUser(e){try{const t={userid:crypto.randomUUID(),firstname:e.firstname,lastname:e.lastname,email:e.email,password:"admin",department:e.department,position:e.position,role:e.role,status:e.status||"Active"},{data:n,error:s}=await qs.from("users").insert([t]).select();if(s)throw s;return{success:!0,data:n[0]}}catch(t){return console.error("Error adding user:",t),{success:!1,error:t.message}}},async updateUser(e,t){try{const n={firstname:t.firstname,lastname:t.lastname,department:t.department,position:t.position,role:t.role,status:t.status},{data:s,error:a}=await qs.from("users").update(n).eq("userid",e).select();if(a)throw a;return{success:!0,data:s[0]}}catch(n){return console.error("Error updating user:",n),{success:!1,error:n.message}}},async deleteUser(e){try{const{error:t}=await qs.from("users").delete().eq("userid",e);if(t)throw t;return{success:!0}}catch(t){return console.error("Error deleting user:",t),{success:!1,error:t.message}}},async getUserById(e){try{const{data:t,error:n}=await qs.from("users").select("*").eq("userid",e).single();if(n)throw n;return{success:!0,data:t}}catch(t){return console.error("Error getting user:",t),{success:!1,error:t.message}}}},pa=()=>{const[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)([]),[r,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(""),[f,m]=(0,a.useState)(!1),[p,g]=(0,a.useState)("add"),[v,y]=(0,a.useState)(null),[b,x]=(0,a.useState)({firstname:"",lastname:"",email:"",department:"",position:"",role:"Reader",status:"Active"}),[w,j]=(0,a.useState)(!1),[N,S]=(0,a.useState)(null);(0,a.useEffect)(()=>{k()},[]),(0,a.useEffect)(()=>{_()},[r,e]);const k=async()=>{l(!0);const e=await ma.getAllUsers();e.success?(t(e.data),s(e.data)):u(e.error),l(!1)},_=()=>{if(!r.trim())return void s(e);const t=e.filter(e=>"".concat(e.firstname," ").concat(e.lastname).toLowerCase().includes(r.toLowerCase())||e.firstname.toLowerCase().includes(r.toLowerCase())||e.lastname.toLowerCase().includes(r.toLowerCase()));s(t)},C=async()=>{if(!r.trim())return void s(e);l(!0);const t=await ma.searchUsers(r);t.success?s(t.data):u(t.error),l(!1)},E=()=>{m(!1),y(null),x({firstname:"",lastname:"",email:"",department:"",position:"",role:"Reader",status:"Active"})},T=(e,t)=>{x(n=>Zs(Zs({},n),{},{[e]:t}))},P=()=>{S(null),j(!1)},O=e=>{switch(e){case"Admin":return"is-danger";case"Manager":return"is-warning";case"Collector":return"is-info";default:return"is-light"}};return(0,Ks.jsxs)("div",{className:"users-page",style:{padding:"0"},children:[(0,Ks.jsxs)("div",{className:"level mb-3",children:[(0,Ks.jsx)("div",{className:"level-left",children:(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("h1",{className:"title is-4 mb-0",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-users"})}),"User Management"]})})}),(0,Ks.jsx)("div",{className:"level-right",children:(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsxs)("button",{className:"button is-primary",onClick:()=>{g("add"),y(null),x({firstname:"",lastname:"",email:"",department:"",position:"",role:"Reader",status:"Active"}),m(!0)},children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-user-plus"})}),(0,Ks.jsx)("span",{children:"Add User"})]})})})]}),c&&(0,Ks.jsxs)("div",{className:"notification is-danger is-light py-3",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>u("")}),c]}),d&&(0,Ks.jsxs)("div",{className:"notification is-success is-light py-3",children:[(0,Ks.jsx)("button",{className:"delete",onClick:()=>h("")}),d]}),(0,Ks.jsx)("div",{className:"box",style:{marginBottom:"1rem",padding:"1.5rem"},children:(0,Ks.jsxs)("div",{className:"field has-addons",children:[(0,Ks.jsx)("div",{className:"control is-expanded",children:(0,Ks.jsx)("input",{className:"input",type:"text",placeholder:"Search by first name or last name...",value:r,onChange:e=>i(e.target.value),onKeyPress:e=>"Enter"===e.key&&C()})}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsxs)("button",{className:"button is-primary ".concat(o?"is-loading":""),onClick:C,children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-search"})}),(0,Ks.jsx)("span",{children:"Search"})]})})]})}),(0,Ks.jsx)("div",{className:"box",style:{padding:"0"},children:o&&0===n.length?(0,Ks.jsx)("div",{className:"has-text-centered",style:{padding:"3rem"},children:(0,Ks.jsx)("button",{className:"button is-loading is-large is-ghost"})}):0===n.length?(0,Ks.jsxs)("div",{className:"has-text-centered",style:{padding:"3rem"},children:[(0,Ks.jsx)("span",{className:"icon is-large has-text-grey-light",children:(0,Ks.jsx)("i",{className:"fas fa-users fa-3x"})}),(0,Ks.jsx)("p",{className:"has-text-grey mt-4",children:"No users found"})]}):(0,Ks.jsx)("div",{className:"table-container",children:(0,Ks.jsxs)("table",{className:"table is-fullwidth is-striped is-hoverable",children:[(0,Ks.jsx)("thead",{children:(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("th",{children:"Name"}),(0,Ks.jsx)("th",{children:"Email"}),(0,Ks.jsx)("th",{children:"Role"}),(0,Ks.jsx)("th",{children:"Department"}),(0,Ks.jsx)("th",{children:"Position"}),(0,Ks.jsx)("th",{children:"Status"}),(0,Ks.jsx)("th",{width:"150",children:"Actions"})]})}),(0,Ks.jsx)("tbody",{children:n.map(e=>{return(0,Ks.jsxs)("tr",{children:[(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("strong",{children:[e.firstname," ",e.lastname]})}),(0,Ks.jsx)("td",{children:e.email}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag ".concat(O(e.role)),children:e.role})}),(0,Ks.jsx)("td",{children:e.department||"-"}),(0,Ks.jsx)("td",{children:e.position||"-"}),(0,Ks.jsx)("td",{children:(0,Ks.jsx)("span",{className:"tag ".concat((t=e.status,"Active"===t?"is-success":"is-danger")),children:e.status})}),(0,Ks.jsx)("td",{children:(0,Ks.jsxs)("div",{className:"buttons are-small",children:[(0,Ks.jsx)("button",{className:"button is-info is-small",onClick:()=>(e=>{g("edit"),y(e),x({firstname:e.firstname,lastname:e.lastname,email:e.email,department:e.department||"",position:e.position||"",role:e.role,status:e.status}),m(!0)})(e),title:"Edit User",children:(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-edit"})})}),(0,Ks.jsx)("button",{className:"button is-danger is-small",onClick:()=>(e=>{S(e),j(!0)})(e),title:"Delete User",children:(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-trash"})})})]})})]},e.userid);var t})})]})})}),f&&(0,Ks.jsxs)("div",{className:"modal is-active",children:[(0,Ks.jsx)("div",{className:"modal-background",onClick:E}),(0,Ks.jsxs)("div",{className:"modal-card",style:{width:"600px"},children:[(0,Ks.jsxs)("header",{className:"modal-card-head",children:[(0,Ks.jsxs)("p",{className:"modal-card-title",children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-user-".concat("add"===p?"plus":"edit")})}),"add"===p?"Add New User":"Edit User"]}),(0,Ks.jsx)("button",{className:"delete","aria-label":"close",onClick:E})]}),(0,Ks.jsxs)("section",{className:"modal-card-body",children:[(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsxs)("label",{className:"label",children:["First Name ",(0,Ks.jsx)("span",{className:"has-text-danger",children:"*"})]}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("input",{className:"input",type:"text",placeholder:"Enter first name",value:b.firstname,onChange:e=>T("firstname",e.target.value)})})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsxs)("label",{className:"label",children:["Last Name ",(0,Ks.jsx)("span",{className:"has-text-danger",children:"*"})]}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("input",{className:"input",type:"text",placeholder:"Enter last name",value:b.lastname,onChange:e=>T("lastname",e.target.value)})})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsxs)("label",{className:"label",children:["Email ",(0,Ks.jsx)("span",{className:"has-text-danger",children:"*"})]}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("input",{className:"input",type:"email",placeholder:"Enter email",value:b.email,onChange:e=>T("email",e.target.value),disabled:"edit"===p})}),"edit"===p&&(0,Ks.jsx)("p",{className:"help",children:"Email cannot be edited"})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Department"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("input",{className:"input",type:"text",placeholder:"Enter department",value:b.department,onChange:e=>T("department",e.target.value)})})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsx)("label",{className:"label",children:"Position"}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("input",{className:"input",type:"text",placeholder:"Enter position",value:b.position,onChange:e=>T("position",e.target.value)})})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsxs)("label",{className:"label",children:["Role ",(0,Ks.jsx)("span",{className:"has-text-danger",children:"*"})]}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:b.role,onChange:e=>T("role",e.target.value),children:[(0,Ks.jsx)("option",{value:"Admin",children:"Admin"}),(0,Ks.jsx)("option",{value:"Manager",children:"Manager"}),(0,Ks.jsx)("option",{value:"Collector",children:"Collector"}),(0,Ks.jsx)("option",{value:"Reader",children:"Reader"})]})})})]}),(0,Ks.jsxs)("div",{className:"field",children:[(0,Ks.jsxs)("label",{className:"label",children:["Status ",(0,Ks.jsx)("span",{className:"has-text-danger",children:"*"})]}),(0,Ks.jsx)("div",{className:"control",children:(0,Ks.jsx)("div",{className:"select is-fullwidth",children:(0,Ks.jsxs)("select",{value:b.status,onChange:e=>T("status",e.target.value),children:[(0,Ks.jsx)("option",{value:"Active",children:"Active"}),(0,Ks.jsx)("option",{value:"Inactive",children:"Inactive"})]})})})]}),"add"===p&&(0,Ks.jsx)("div",{className:"notification is-info is-light",children:(0,Ks.jsxs)("p",{className:"is-size-7",children:[(0,Ks.jsx)("strong",{children:"Note:"})," Default password will be set to ",(0,Ks.jsx)("strong",{children:'"admin"'})]})})]}),(0,Ks.jsxs)("footer",{className:"modal-card-foot",children:[(0,Ks.jsxs)("button",{className:"button is-success ".concat(o?"is-loading":""),onClick:async()=>{if(!b.firstname.trim()||!b.lastname.trim()||!b.email.trim())return void u("Please fill in all required fields (First Name, Last Name, Email)");let e;l(!0),u(""),e="add"===p?await ma.addUser(b):await ma.updateUser(v.userid,b),e.success?(h("User ".concat("add"===p?"added":"updated"," successfully!")),E(),k(),setTimeout(()=>h(""),3e3)):u(e.error),l(!1)},disabled:o,children:[(0,Ks.jsx)("span",{className:"icon",children:(0,Ks.jsx)("i",{className:"fas fa-save"})}),(0,Ks.jsx)("span",{children:"add"===p?"Add User":"Save Changes"})]}),(0,Ks.jsx)("button",{className:"button",onClick:E,children:"Cancel"})]})]})]}),(0,Ks.jsx)(ia,{isOpen:w&&null!==N,onClose:P,onConfirm:async()=>{if(!N)return;l(!0);const e=await ma.deleteUser(N.userid);e.success?(h("User deleted successfully!"),P(),k(),setTimeout(()=>h(""),3e3)):u(e.error),l(!1)},title:"Confirm Delete",message:N?"Are you sure you want to delete user ".concat(N.firstname," ").concat(N.lastname,"?"):"",subMessage:"This action cannot be undone.",confirmText:"Delete User",cancelText:"Cancel",type:"danger",loading:o})]})},ga=()=>(0,Ks.jsxs)("div",{children:[(0,Ks.jsx)("div",{className:"level",children:(0,Ks.jsx)("div",{className:"level-left",children:(0,Ks.jsx)("div",{className:"level-item",children:(0,Ks.jsx)("h1",{className:"title",children:"System Tools & Utilities"})})})}),(0,Ks.jsx)("div",{className:"card",children:(0,Ks.jsx)("div",{className:"card-content",children:(0,Ks.jsxs)("div",{className:"has-text-centered",style:{padding:"4rem 2rem"},children:[(0,Ks.jsx)("span",{className:"icon is-large has-text-grey-light",children:(0,Ks.jsx)("i",{className:"fas fa-tools fa-4x"})}),(0,Ks.jsx)("h2",{className:"title is-3 has-text-grey mt-4",children:"Coming Soon"}),(0,Ks.jsx)("p",{className:"subtitle has-text-grey",children:"System tools and utilities will be available soon."}),(0,Ks.jsx)("p",{className:"has-text-grey",children:"This page will include database backup, data import/export, system maintenance, and configuration tools."})]})})})]}),va=e=>{let{onLogout:t}=e;const[n,s]=(0,a.useState)(null),[r,i]=(0,a.useState)(!1),o=ne(),l=ee(),c=[{name:"Dashboard",icon:"fas fa-tachometer-alt",path:"/dashboard"},{name:"Customers",icon:"fas fa-users",path:"/dashboard/customers"},{name:"Billing",icon:"fas fa-file-invoice-dollar",path:"/dashboard/billing"},{name:"Payments",icon:"fas fa-credit-card",path:"/dashboard/payments"},{name:"Credit Management",icon:"fas fa-chart-line",path:"/dashboard/credit-management"},{name:"Reports",icon:"fas fa-chart-bar",path:"/dashboard/reports"},{name:"Users",icon:"fas fa-user-cog",path:"/dashboard/users"},{name:"Tools",icon:"fas fa-tools",path:"/dashboard/tools"}],u=(()=>{const e=l.pathname,t=c.find(t=>t.path===e);return t?t.name:"Dashboard"})();(0,a.useEffect)(()=>{const e=Vs.getUserSession();e?s(e):o("/login")},[o]),(0,a.useEffect)(()=>{const e=()=>{const e=document.querySelector(".dashboard-header"),t=document.querySelector(".content-container"),n=t?t.scrollTop>10:window.scrollY>10;e&&(n?e.classList.add("scrolled"):e.classList.remove("scrolled"))},t=document.querySelector(".content-container");return t?(t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)):(window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e))},[]),(0,a.useEffect)(()=>{"/dashboard"===l.pathname&&o("/dashboard",{replace:!0})},[l.pathname,o]);const d=e=>{const t=c.find(t=>t.name===e);t&&o(t.path),i(!1)};return n?(0,Ks.jsxs)("div",{className:"dashboard-container",children:[(0,Ks.jsxs)("header",{className:"dashboard-header",children:[(0,Ks.jsxs)("div",{className:"header-content",children:[(0,Ks.jsxs)("div",{className:"header-left",children:[(0,Ks.jsx)("div",{className:"brand-icon",children:(0,Ks.jsx)("i",{className:"fas fa-building"})}),(0,Ks.jsxs)("div",{className:"brand-text",children:[(0,Ks.jsx)("h1",{className:"brand-title",children:"Water Billing System"}),(0,Ks.jsx)("p",{className:"brand-subtitle",children:"LGU Concepcion, Romblon"})]})]}),(0,Ks.jsx)("nav",{className:"header-center",children:(0,Ks.jsx)("div",{className:"nav-menu",children:c.map(e=>(0,Ks.jsxs)("button",{className:"nav-item ".concat(u===e.name?"active":""),onClick:()=>d(e.name),children:[(0,Ks.jsx)("i",{className:e.icon}),(0,Ks.jsx)("span",{children:e.name})]},e.name))})}),(0,Ks.jsxs)("div",{className:"header-right",children:[(0,Ks.jsxs)("div",{className:"user-info",children:[(0,Ks.jsxs)("span",{className:"user-name",children:[n.firstname," ",n.lastname]}),(0,Ks.jsx)("span",{className:"user-role",children:n.role})]}),(0,Ks.jsxs)("div",{className:"user-dropdown",children:[(0,Ks.jsxs)("button",{className:"user-button",children:[(0,Ks.jsx)("div",{className:"user-avatar",children:(0,Ks.jsx)("i",{className:"fas fa-user"})}),(0,Ks.jsx)("i",{className:"fas fa-chevron-down"})]}),(0,Ks.jsxs)("div",{className:"dropdown-menu",children:[(0,Ks.jsxs)("a",{className:"dropdown-item",children:[(0,Ks.jsx)("i",{className:"fas fa-user-edit"}),(0,Ks.jsx)("span",{children:"Profile"})]}),(0,Ks.jsxs)("a",{className:"dropdown-item",children:[(0,Ks.jsx)("i",{className:"fas fa-cog"}),(0,Ks.jsx)("span",{children:"Settings"})]}),(0,Ks.jsx)("hr",{className:"dropdown-divider"}),(0,Ks.jsxs)("a",{className:"dropdown-item",onClick:()=>{Vs.logout(),t&&t(),o("/login",{replace:!0})},children:[(0,Ks.jsx)("i",{className:"fas fa-sign-out-alt"}),(0,Ks.jsx)("span",{children:"Logout"})]})]})]})]}),(0,Ks.jsxs)("button",{className:"mobile-menu-toggle ".concat(r?"active":""),onClick:()=>i(!r),children:[(0,Ks.jsx)("span",{}),(0,Ks.jsx)("span",{}),(0,Ks.jsx)("span",{})]})]}),(0,Ks.jsx)("div",{className:"mobile-nav ".concat(r?"active":""),children:c.map(e=>(0,Ks.jsxs)("button",{className:"mobile-nav-item ".concat(u===e.name?"active":""),onClick:()=>d(e.name),children:[(0,Ks.jsx)("i",{className:e.icon}),(0,Ks.jsx)("span",{children:e.name})]},e.name))})]}),(0,Ks.jsx)("main",{className:"dashboard-main",children:(0,Ks.jsx)("div",{className:"content-container",children:(0,Ks.jsxs)(be,{children:[(0,Ks.jsx)(ve,{index:!0,element:(0,Ks.jsx)(Js,{user:n})}),(0,Ks.jsx)(ve,{path:"customers",element:(0,Ks.jsx)(ta,{})}),(0,Ks.jsx)(ve,{path:"billing",element:(0,Ks.jsx)(oa,{})}),(0,Ks.jsx)(ve,{path:"payments",element:(0,Ks.jsx)(ca,{})}),(0,Ks.jsx)(ve,{path:"credit-management",element:(0,Ks.jsx)(da,{})}),(0,Ks.jsx)(ve,{path:"reports",element:(0,Ks.jsx)(fa,{})}),(0,Ks.jsx)(ve,{path:"users",element:(0,Ks.jsx)(pa,{})}),(0,Ks.jsx)(ve,{path:"tools",element:(0,Ks.jsx)(ga,{})})]})})})]}):(0,Ks.jsx)("div",{className:"container",children:(0,Ks.jsx)("div",{className:"section",children:(0,Ks.jsx)("div",{className:"has-text-centered",children:(0,Ks.jsx)("button",{className:"button is-loading is-large",children:"Loading"})})})})},ya=e=>{let{children:t}=e;return Vs.isAuthenticated()?t:(0,Ks.jsx)(ge,{to:"/login",replace:!0})};const ba=function(){const[e,t]=(0,a.useState)(Vs.isAuthenticated());return(0,a.useEffect)(()=>{const e=()=>{t(Vs.isAuthenticated())};return e(),window.addEventListener("storage",e),window.addEventListener("authChange",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("authChange",e)}},[]),(0,Ks.jsx)(je,{children:(0,Ks.jsx)("div",{className:"App",children:(0,Ks.jsxs)(be,{children:[(0,Ks.jsx)(ve,{path:"/",element:e?(0,Ks.jsx)(ge,{to:"/dashboard",replace:!0}):(0,Ks.jsx)(ge,{to:"/login",replace:!0})}),(0,Ks.jsx)(ve,{path:"/login",element:e?(0,Ks.jsx)(ge,{to:"/dashboard",replace:!0}):(0,Ks.jsx)($s,{onLoginSuccess:()=>t(!0)})}),(0,Ks.jsx)(ve,{path:"/dashboard/*",element:(0,Ks.jsx)(ya,{children:(0,Ks.jsx)(va,{onLogout:()=>t(!1)})})}),(0,Ks.jsx)(ve,{path:"*",element:(0,Ks.jsx)(ge,{to:"/",replace:!0})})]})})})};i.createRoot(document.getElementById("root")).render((0,Ks.jsx)(a.StrictMode,{children:(0,Ks.jsx)(ba,{})}))})();
//# sourceMappingURL=main.1ffd7a96.js.map